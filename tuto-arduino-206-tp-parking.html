<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>[TP] Parking &bull; Le blog d'Eskimon</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="/static/css/hljs-monokai.css" />
    <link rel="stylesheet" href="/static/css/style.css" />
    <!-- Google font -->
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/static/images/favicon/favicon.ico">
    <link rel="apple-touch-icon" sizes="57x57" href="/static/images/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/static/images/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/static/images/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/static/images/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/static/images/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/static/images/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/static/images/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/static/images/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/images/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/static/images/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/static/images/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/images/favicon/favicon-16x16.png">
    <link rel="manifest" href="/static/images/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/static/images/favicon/ms-icon-144x144.png">


    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-46353906-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-46353906-1');
    </script>

    <meta name="description" content="Il est temps de mettre vos connaissances à rude épreuve en réalisant cette maquette de parking avec votre fidèle Arduino !" />

  <meta name="tags" content="arduino" />
  <meta name="tags" content="tuto" />


  <meta property="og:site_name" content="Le blog d'Eskimon">
  <meta property="og:title" content="[TP] Parking">
  <meta property="og:url" content="https://eskimon.fr/tuto-arduino-206-tp-parking">
  <meta property="og:language" content="fr_FR">
  <meta property="og:type" content="website">

  <meta property="twitter:domain" content="https://eskimon.fr/">
  <meta property="twitter:card" content="summary">
  <meta property="twitter:url" content="https://eskimon.fr/tuto-arduino-206-tp-parking">
  <meta property="twitter:title" content="[TP] Parking">
<meta property="twitter:description" content="Il est temps de mettre vos connaissances à rude épreuve en réalisant cette maquette de parking avec votre fidèle Arduino !">  <meta property="twitter:site" content="SITENAME">
  <meta property="twitter:creator" content="@eskimon_fr">

  <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
  <meta name="DC.publisher" lang="fr" content="Le blog d'Eskimon" />
  <meta name="DC.creator" content="Eskimon" />
  <meta name="DC.type" content="text" />
  <meta name="DC.title" content="[TP] Parking" />
  <meta name="DC.abstract" content="[TP] Parking – Il est temps de mettre vos connaissances à rude épreuve en réalisant cette maquette de parking avec votre fidèle Arduino !" />
  <meta name="DC.subject" lang="fr" content="Arduino/B - Gestion des entrées - sorties – arduino; tuto" />
<meta name="DC.description" lang="fr" content="Il est temps de mettre vos connaissances à rude épreuve en réalisant cette maquette de parking avec votre fidèle Arduino !" />  <meta name="DC.date" content="2013-12-10T20:03:00+01:00" />
  <meta name="DC.format" content="text/html" />
  <meta name="DC.language" content="fr" />
  <meta name="DC.rights" content="CC BY-NC-SA" />

  <script type="application/ld+json">
    [{
        "@context": "http://schema.org",
        "@type": "Article",
        "mainEntityOfPage": {
          "@type": "WebPage",
          "@id": "https://eskimon.fr/tuto-arduino-206-tp-parking"
        },
        "headline": ""[TP] Parking"",
        "datePublished": "2013-12-10T20:03:00+01:00",
        "image": [
            "https://eskimon.fr/static/images/logo.png"
        ],
        "author": {
            "@type": "Person",
            "name": "Eskimon",
            "image": "https://eskimon.fr/static/images/logo.png"
        },
        "publisher": {
            "@type": "Organization",
            "name": "Eskimon",
            "logo": {
                "@type": "ImageObject",
                "url": "https://eskimon.fr/static/images/logo.png"
            }
        },
        "description": ""Il est temps de mettre vos connaissances \u00e0 rude \u00e9preuve en r\u00e9alisant cette maquette de parking avec votre fid\u00e8le Arduino !""
    },
    {
        "@context": "http://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [{
            "@type": "ListItem",
            "position": 1,
            "item": {
                "@id": "https://eskimon.fr/category/arduino",
                "name": ""Arduino""
            }
        }
        , {
            "@type": "ListItem",
            "position": 2,
            "item": {
                "@id": "https://eskimon.fr/subcategory/arduino/b-gestion-des-entrees-sorties",
                "name": ""B - Gestion des entr\u00e9es - sorties""
            }
        }
        , {
            "@type": "ListItem",
            "position": 3,
            "item": {
                "@id": "https://eskimon.fr/tuto-arduino-206-tp-parking",
                "name": ""[TP] Parking""
            }
        }]
    }]
    </script>

</head>

<body>
<nav class="navbar navbar-expand-lg navbar-light bg-secondary-l40 py-0">
    <a class="navbar-brand" href="/">
        <img src="/static/images/logo.png" width="20" height="20" alt="">
        Le blog d'Eskimon
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
        <div class="navbar-nav ml-auto">
                <a class="nav-item nav-link active" href="/category/arduino">Arduino</a>
                <a class="nav-item nav-link " href="/category/articles">Articles</a>
                <a class="nav-item nav-link " href="/category/tuto">Tuto</a>
        </div>
    </div>
</nav>
    <div class="container-fluid es-verticalfill">
<div class="row">
    <!-- Sidebar -->
    <div class="col-lg-2 d-none d-lg-block sticky-top es-scrollable pt-3 px-1 bg-light es-ul-bordered" id="es-side-summary">
        <nav class="px-2" id="es-side-summary-content">
            <!-- Summary will come here -->
        </nav>
        <hr>
        <!-- Add here self-promo for ebook -->
    </div>
    <!-- Main content -->
    <div class="col-md-10 col-lg-8 col-xl-7 offset-md-1 offset-lg-1 offset-xl-1 d-block pt-3" id="es-content">
        <article>
            <div class="alert alert-danger alert-dismissible fade show" role="alert">
                Je suis en train de faire quelques tests pendant quelques semaines avec un nouveau service pour gérer la publicité.
                Veuillez m'excuser si cette dernière est trop envahissante, les règlages sont en cours !
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb bg-white">
                    <li class="breadcrumb-item"><a href="/category/arduino">Arduino</a></li>
                        <li class="breadcrumb-item"><a href="/subcategory/arduino/b-gestion-des-entrees-sorties">B - Gestion des entrées - sorties</a></li>
                    <li class="breadcrumb-item active" aria-current="page">[TP] Parking</li>
                </ol>
            </nav>
            <header class="es-post-info">
                <h1 class="text-center my-4">[TP] Parking</h1>
            </header>
            <footer class="es-post-info pb-2 mb-2">
                <div class="row align-items-center">
                    <div class="col-auto mr-auto">
                        <span class="vcard author">
                            <a class="" href="/author/eskimon" rel="author">Eskimon</a>
                        </span>
                        ,
                        <time class="" datetime="2013-12-10T20:03:00+01:00" pubdate>
                            le mar. 10 décembre 2013
                        </time>
                            (<a href="https://eskimon.fr/tuto-arduino-206-tp-parking#disqus_thread" data-disqus-identifier="tuto-arduino-206-tp-parking">commentaires</a>)
                    </div>
                    <div class="col-auto">
                        <a class="btn btn-outline-primary btn-sm" href="/tag/arduino" rel="tag">arduino</a>
                        <a class="btn btn-outline-primary btn-sm" href="/tag/tuto" rel="tag">tuto</a>
                    </div>
                </div>
            </footer>
            <button type="button" id="sidebarCollapse" class="float-right btn btn-secondary sticky-top d-block d-lg-none">
                Sommaire
            </button>
            <!-- /.post-info -->
            <div class="entry-content">
                <p>
 Ça y est, une page se tourne avec l’acquisition de nombreuses connaissances de base.
C’est donc l’occasion idéale pour faire un (gros
 <img alt=":diable:" class="smiley" src="./static/smileys/diable.png"/>
 ) TP qui utilisera l’ensemble de vos connaissances durement acquises.
J’aime utiliser les situations de la vie réelle, je vais donc en prendre une pour ce sujet. Je vous propose de réaliser la gestion d’un parking souterrain… RDV aux consignes pour les détails.
</p>
<h3 id="sommaire">
 <a aria-hidden="true" href="#sommaire">
  <span class="es-autolink-heading">
  </span>
 </a>
 Sommaire
</h3>
<ul>
 <li>
  <p>
   <a href="#consigne">
    Consigne
   </a>
  </p>
  <ul>
   <li>
    <ul>
     <li>
      <a href="#histoire">
       Histoire
      </a>
     </li>
     <li>
      <a href="#matériel">
       Matériel
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li>
  <p>
   <a href="#correction">
    Correction !
   </a>
  </p>
  <ul>
   <li>
    <p>
     <a href="#montage">
      Montage
     </a>
    </p>
    <ul>
     <li>
      <a href="#schéma">
       Schéma
      </a>
     </li>
     <li>
      <a href="#procédure-de-montage">
       Procédure de montage
      </a>
     </li>
    </ul>
   </li>
   <li>
    <p>
     <a href="#programme">
      Programme
     </a>
    </p>
    <ul>
     <li>
      <a href="#les-variables-utiles-et-déclarations">
       Les variables utiles et déclarations
      </a>
     </li>
     <li>
      <a href="#linitialisation-de-la-fonction-setup">
       L’initialisation de la fonction setup()
      </a>
     </li>
     <li>
      <a href="#la-boucle-principale-loop">
       La boucle principale (loop)
      </a>
     </li>
     <li>
      <a href="#les-fonctions-daffichages">
       Les fonctions d’affichages
      </a>
     </li>
     <li>
      <a href="#et-le-code-au-complet">
       Et le code au complet
      </a>
     </li>
    </ul>
   </li>
   <li>
    <a href="#conclusion">
     Conclusion
    </a>
   </li>
  </ul>
 </li>
</ul>
<h3 id="consigne">
 <a aria-hidden="true" href="#consigne">
  <span class="es-autolink-heading">
  </span>
 </a>
 Consigne
</h3>
<p>
 Après tant de connaissances chacune séparée dans son coin, nous allons pouvoir mettre en œuvre tout ce petit monde dans un TP traitant sur un sujet de la vie courante : les
 <strong>
  parkings
 </strong>
 !
</p>
<h5 id="histoire">
 <a aria-hidden="true" href="#histoire">
  <span class="es-autolink-heading">
  </span>
 </a>
 Histoire
</h5>
<p>
 Le maire de zCity à décidé de rentabiliser le parking communal d’une capacité de 99 places (pas une de plus ni de moins).
En effet, chaque jour des centaines de zTouristes viennent se promener en voiture et ont besoin de la garer quelque part.
Le parking, n’étant pour le moment pas rentable, servira à financer l’entretien de la ville.
Pour cela, il faut rajouter au parking existant un afficheur permettant de savoir le nombre de places disponibles en temps réel (le système de paiement du parking ne sera pas traité).
Il dispose aussi dans la ville des lumières vertes et rouges signalant un parking complet ou non.
Enfin, l’entrée du parking est équipée de deux barrières (une pour l’entrée et l’autre pour la sortie).
Chaque entrée de voiture ou sortie génère un signal pour la gestion du nombre de places.
Le maire vous a choisi pour vos compétences, votre esprit de créativité et il sait que vous aimez les défis. Vous acceptez évidemment en lui promettant de réussir dans les plus brefs délais !
</p>
<h5 id="matériel">
 <a aria-hidden="true" href="#matériel">
  <span class="es-autolink-heading">
  </span>
 </a>
 Matériel
</h5>
<p>
 Pour mener à bien ce TP voici la liste des courses conseillée :
</p>
<ul>
 <li>
  Une carte Arduino (évidemment)
 </li>
 <li>
  2 LEDs avec leur résistance de limitations de courant (habituellement 330 Ohms) -&gt; Elles symbolisent les témoins lumineux disposés dans la ville
 </li>
 <li>
  2 boutons (avec 2 résistances de 10 kOhms et 2 condensateurs de 10 nF) -&gt; Ce sont les "capteurs" d’entrée et de sortie.
 </li>
 <li>
  2 afficheurs 7 segments -&gt; pour afficher le nombre de places disponibles
  <p>
   &lt;/li&gt;
  </p>
 </li>
 <li>
  1 décodeur 4 bits vers 7 segments
 </li>
 <li>
  7 résistances de 330 Ohms (pour les 7 segments)
 </li>
 <li>
  Une breadboard pour assembler le tout
 </li>
 <li>
  Un paquet de fils
 </li>
 <li>
  Votre cerveau et quelques doigts…
 </li>
</ul>
<p>
 Voici une vidéo pour vous montrer le résultat attendu par le maire :
</p>
<div class="text-center">
 <div class="video-container">
  <div class="video-wrapper">
   <iframe allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/pZWYGTFN7nM" width="560">
   </iframe>
  </div>
 </div>
</div>
<div class="text-center">
 <p>
  <strong>
   Bon courage !
  </strong>
 </p>
</div>
<h3 id="correction">
 <a aria-hidden="true" href="#correction">
  <span class="es-autolink-heading">
  </span>
 </a>
 Correction !
</h3>
<p>
 J’espère que tout s’est bien passé pour vous et que le maire sera content de votre travail.
Voilà maintenant une correction (parmi tant d’autres, comme souvent en programmation et en électronique).
Nous commencerons par voir le schéma électronique, puis ensuite nous rentrerons dans le code.
</p>
<h4 id="montage">
 <a aria-hidden="true" href="#montage">
  <span class="es-autolink-heading">
  </span>
 </a>
 Montage
</h4>
<p>
 Le montage électronique est la base de ce qui va nous servir pour réaliser le système.
Une fois qu’il est terminé on pourra l’utiliser grâce aux entrées/sorties de la carte Arduino et lui faire faire pleins de choses.
Mais ça, vous le savez déjà.
Alors ici pas de grand discours, il "suffit" de reprendre les différents blocs vus un par un dans les chapitres précédents et de faire le montage de façon simple.
</p>
<h5 id="schéma">
 <a aria-hidden="true" href="#schéma">
  <span class="es-autolink-heading">
  </span>
 </a>
 Schéma
</h5>
<p>
 Je vous montre le schéma que j’ai réalisé, il n’est pas absolu et peut différer selon ce que vous avez fait, mais il reprend essentiellement tous les "blocs" (ou mini montages électroniques) que l’on a vus dans les précédents chapitres, en les assemblant de façon logique et ordonnée :
</p>
<div class="custom-block custom-block-spoiler">
 <div class="custom-block-body">
  <p>
   <img alt="TP Parking - Schéma" src="./images/uploaded/tuto-arduino-206-tp-parking/tp-parking-schema.png"/>
  </p>
  <p>
   <img alt="TP Parking - Montage" src="./images/uploaded/tuto-arduino-206-tp-parking/tp-parking-montage.png"/>
  </p>
 </div>
</div>
<h5 id="procédure-de-montage">
 <a aria-hidden="true" href="#procédure-de-montage">
  <span class="es-autolink-heading">
  </span>
 </a>
 Procédure de montage
</h5>
<p>
 Voici l’ordre que j’ai suivi pour réaliser le montage :
</p>
<ul>
 <li>
  Débrancher la carte Arduino !
 </li>
 <li>
  <p>
   Mettre les boutons
  </p>
  <ul>
   <li>
    Mettre les résistances de pull-up
   </li>
   <li>
    Puis les condensateurs de filtrage
   </li>
   <li>
    Et tirez des fils de signaux jusqu’à la carte Arduino
   </li>
   <li>
    Enfin, vérifiez la position des alimentations (+5V et masse)
   </li>
  </ul>
 </li>
 <li>
  Mettre les LEDs rouge et verte avec leur résistance de limitation de courant et un fil vers Arduino
 </li>
 <li>
  <p>
   Mettre les décodeurs
  </p>
  <ul>
   <li>
    Relier les fils ABCD à Arduino
   </li>
   <li>
    Mettre au +5V ou à la masse les signaux de commandes du décodeur
   </li>
   <li>
    Mettre les résistances de limitations de courant des 7 segments
   </li>
   <li>
    Enfin, vérifier la position des alimentations (+5V et masse)
   </li>
  </ul>
 </li>
 <li>
  Puis mettre les afficheurs -&gt; les relier entre le décodeur et leurs segments) -&gt; les connecter au +5V
 </li>
 <li>
  Amener du +5V et la masse sur la breadboard
 </li>
</ul>
<p>
 Ce étant terminé, la maquette est fin prête à être utilisée !
Évidemment, cela fait un montage (un peu) plus complet que les précédents !
</p>
<h4 id="programme">
 <a aria-hidden="true" href="#programme">
  <span class="es-autolink-heading">
  </span>
 </a>
 Programme
</h4>
<p>
 Nous allons maintenant voir une solution de programme pour le problème de départ.
La vôtre sera peut-être (voire surement) différente, et ce n’est pas grave, un problème n’exige pas une solution unique.
Je n’ai peut-être même pas la meilleure solution ! (mais ça m’étonnerait :P
 <img alt=":ninja:" class="smiley" src="./static/smileys/ninja.png"/>
 )
</p>
<h5 id="les-variables-utiles-et-déclarations">
 <a aria-hidden="true" href="#les-variables-utiles-et-déclarations">
  <span class="es-autolink-heading">
  </span>
 </a>
 Les variables utiles et déclarations
</h5>
<p>
 Tout d’abord, nous allons voir les variables globales que nous allons utiliser ainsi que les déclarations utiles à faire.
Pour ma part, j’utilise six variables globales.
Vous reconnaîtrez la plupart d’entre elles car elles viennent des chapitres précédents.
</p>
<ul>
 <li>
  Celles pour stocker l’état des boutons un coup sur l’autre et une pour le stocker de manière courante
 </li>
 <li>
  Un char stockant le nombre de places disponibles dans le parking
 </li>
 <li>
  Un booléen désignant l’afficheur utilisé en dernier
 </li>
 <li>
  Un long stockant l’information de temps pour le rafraîchissement de l’affichage
 </li>
</ul>
<p>
 Voici ces différentes variables commentées.
</p>
<div class="custom-block custom-block-spoiler">
 <div class="custom-block-body">
  <figure>
   <div class="hljs-code-div">
    <div class="hljs-line-numbers">
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
    </div>
    <pre><code class="hljs language-cpp"><span class="hljs-comment">// les broches du décodeur 7 segments</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> bit_A = <span class="hljs-number">2</span>;
<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> bit_B = <span class="hljs-number">3</span>;
<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> bit_C = <span class="hljs-number">4</span>;
<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> bit_D = <span class="hljs-number">5</span>;
<span class="hljs-comment">// les broches des transistors pour l'afficheur des dizaines et des unités</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> alim_dizaine = <span class="hljs-number">6</span>;
<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> alim_unite = <span class="hljs-number">7</span>;
<span class="hljs-comment">// les broches des boutons</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> btn_entree = <span class="hljs-number">8</span>;
<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> btn_sortie = <span class="hljs-number">9</span>;
<span class="hljs-comment">// les leds de signalements</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> led_rouge = <span class="hljs-number">12</span>;
<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> led_verte = <span class="hljs-number">11</span>;
<span class="hljs-comment">// les mémoires d'état des boutons</span>
<span class="hljs-keyword">int</span> mem_entree = HIGH;
<span class="hljs-keyword">int</span> mem_sortie = HIGH;
<span class="hljs-keyword">int</span> etat = HIGH; <span class="hljs-comment">// variable stockant l'état courant d'un bouton</span>

<span class="hljs-keyword">char</span> place_dispo = <span class="hljs-number">99</span>; <span class="hljs-comment">// contenu des places dispos</span>
<span class="hljs-keyword">bool</span> afficheur = <span class="hljs-literal">false</span>;
<span class="hljs-keyword">long</span> temps;
</code></pre>
   </div>
   <figcaption>
    Les variables et constantes
   </figcaption>
  </figure>
 </div>
</div>
<h5 id="linitialisation-de-la-fonction-setup">
 <a aria-hidden="true" href="#linitialisation-de-la-fonction-setup">
  <span class="es-autolink-heading">
  </span>
 </a>
 L’initialisation de la fonction setup()
</h5>
<p>
 Je ne vais pas faire un long baratin sur cette partie car je pense que vous serez en mesure de tout comprendre très facilement car il n’y a vraiment rien d’original par rapport à tout ce que l’on a fait avant (réglages des entrées/sorties et de leurs niveaux).
</p>
<div class="custom-block custom-block-spoiler">
 <div class="custom-block-body">
  <figure>
   <div class="hljs-code-div">
    <div class="hljs-line-numbers">
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
    </div>
    <pre><code class="hljs language-cpp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-comment">// Les broches sont toutes des sorties (sauf les boutons)</span>
    pinMode(bit_A, OUTPUT);
    pinMode(bit_B, OUTPUT);
    pinMode(bit_C, OUTPUT);
    pinMode(bit_D, OUTPUT);
    pinMode(alim_dizaine, OUTPUT);
    pinMode(alim_unite, OUTPUT);
    pinMode(led_rouge, OUTPUT);
    pinMode(led_verte, OUTPUT);

    pinMode(btn_entree, INPUT);
    pinMode(btn_sortie, INPUT);

    <span class="hljs-comment">// Les broches sont toutes mise à l'état bas (sauf led rouge éteinte)</span>
    digitalWrite(bit_A, LOW);
    digitalWrite(bit_B, LOW);
    digitalWrite(bit_C, LOW);
    digitalWrite(bit_D, LOW);
    digitalWrite(alim_dizaine, LOW);
    digitalWrite(alim_unite, LOW);
    digitalWrite(led_rouge, HIGH);
    digitalWrite(led_verte, LOW); <span class="hljs-comment">// vert par défaut</span>
    <span class="hljs-comment">// rappel: dans cette configuration, la LED est éteinte à l'état HIGH</span>

    temps = millis(); <span class="hljs-comment">// enregistre "l'heure"</span>
}
</code></pre>
   </div>
   <figcaption>
    L’initialisation
   </figcaption>
  </figure>
 </div>
</div>
<h5 id="la-boucle-principale-loop">
 <a aria-hidden="true" href="#la-boucle-principale-loop">
  <span class="es-autolink-heading">
  </span>
 </a>
 La boucle principale (loop)
</h5>
<p>
 Ici se trouve la partie la plus compliquée du TP.
En effet, elle doit s’occuper de gérer d’une part une boucle de rafraichissement de l’allumage des afficheurs 7 segments et d’autre part gérer les évènements.
Rappelons-nous de l’organigramme vu dans la dernière partie sur les 7 segments :
</p>
<p>
 <img alt="Organigramme TP Parking" src="./images/uploaded/tuto-arduino-206-tp-parking/organigramme-tp-parking.jpg"/>
</p>
<p>
 Dans notre application, la gestion d’évènements sera "une voiture rentre-t/sort-elle du parking ?" qui sera symbolisée par un appui sur un bouton.
Ensuite, il faudra aussi prendre en compte l’affichage de la disponibilité sur les LEDs selon si le parking est complet ou non…
Voici une manière de coder tout cela :
</p>
<div class="custom-block custom-block-spoiler">
 <div class="custom-block-body">
  <div class="hljs-code-div">
   <div class="hljs-line-numbers">
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
   </div>
   <pre><code class="hljs language-cpp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-comment">// si ca fait plus de 10 ms qu'on affiche, on change de 7 segments</span>
    <span class="hljs-keyword">if</span>((millis() - temps) &gt; <span class="hljs-number">10</span>)
    {
        <span class="hljs-comment">// on inverse la valeur de "afficheur"</span>
        <span class="hljs-comment">// pour changer d'afficheur (unité ou dizaine)</span>
        afficheur = !afficheur;
        <span class="hljs-comment">// on affiche</span>
        afficher_nombre(place_dispo, afficheur);
        temps = millis(); <span class="hljs-comment">// on met à jour le temps</span>
    }

    <span class="hljs-comment">// on test maintenant si les boutons ont subi un appui (ou pas)</span>
    <span class="hljs-comment">// d'abord le bouton plus puis le moins</span>
    etat = digitalRead(btn_entree);
    <span class="hljs-keyword">if</span>((etat != mem_entree) &amp;&amp; (etat == LOW))
        place_dispo += <span class="hljs-number">1</span>;
    mem_entree = etat; <span class="hljs-comment">// on enregistre l'état du bouton pour le tour suivant</span>

    <span class="hljs-comment">// et maintenant pareil pour le bouton qui décrémente</span>
    etat = digitalRead(btn_sortie);
    <span class="hljs-keyword">if</span>((etat != mem_sortie) &amp;&amp; (etat == LOW))
        place_dispo -= <span class="hljs-number">1</span>;
    mem_sortie = etat; <span class="hljs-comment">// on enregistre l'état du bouton pour le tour suivant</span>

    <span class="hljs-comment">// on applique des limites au nombre pour ne pas dépasser 99 ou 0</span>
    <span class="hljs-keyword">if</span>(place_dispo &gt; <span class="hljs-number">99</span>)
        place_dispo = <span class="hljs-number">99</span>;
    <span class="hljs-keyword">if</span>(place_dispo &lt; <span class="hljs-number">0</span>)
        place_dispo = <span class="hljs-number">0</span>;

    <span class="hljs-comment">// on met à jour l'état des leds</span>
    <span class="hljs-comment">// on commence par les éteindres</span>
    digitalWrite(led_verte, HIGH);
    digitalWrite(led_rouge, HIGH);
    <span class="hljs-keyword">if</span>(place_dispo == <span class="hljs-number">0</span>) <span class="hljs-comment">// s'il n'y a plus de place</span>
        digitalWrite(led_rouge, LOW);
    <span class="hljs-keyword">else</span>
        digitalWrite(led_verte, LOW);
}
</code></pre>
  </div>
 </div>
</div>
<p>
 Dans les lignes 4 à 11, on retrouve la gestion du rafraichissement des 7 segments.
Ensuite, on s’occupe de réceptionner les évènements en faisant un test par bouton pour savoir si son état a changé et s’il est à l’état bas.
Enfin, on va borner le nombre de places et faire l’affichage sur les LED en conséquence.
Vous voyez, ce n’était pas si difficile en fait ! Si, un peu quand même, non ?
 <img alt="^^" class="smiley" src="./static/smileys/hihi.png"/>
 Il ne reste maintenant plus qu’à faire les fonctions d’affichages.
</p>
<h5 id="les-fonctions-daffichages">
 <a aria-hidden="true" href="#les-fonctions-daffichages">
  <span class="es-autolink-heading">
  </span>
 </a>
 Les fonctions d’affichages
</h5>
<p>
 Là encore, je ne vais pas faire de grand discours puisque ces fonctions sont exactement les mêmes que celles réalisées dans la partie concernant l’affichage sur plusieurs afficheurs.
Si elles ne vous semblent pas claires, je vous conseille de revenir sur le chapitre concernant les 7 segments.
</p>
<div class="custom-block custom-block-spoiler">
 <div class="custom-block-body">
  <figure>
   <div class="hljs-code-div">
    <div class="hljs-line-numbers">
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
     <span>
     </span>
    </div>
    <pre><code class="hljs language-cpp"><span class="hljs-comment">// fonction permettant d'afficher un nombre</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">afficher_nombre</span><span class="hljs-params">(<span class="hljs-keyword">char</span> nombre, <span class="hljs-keyword">bool</span> afficheur)</span>
</span>{
    <span class="hljs-keyword">long</span> temps;
    <span class="hljs-keyword">char</span> unite = <span class="hljs-number">0</span>, dizaine = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">if</span>(nombre &gt; <span class="hljs-number">9</span>)
        dizaine = nombre / <span class="hljs-number">10</span>; <span class="hljs-comment">// on recupere les dizaines</span>
    unite = nombre - (dizaine*<span class="hljs-number">10</span>); <span class="hljs-comment">// on recupere les unités</span>

    <span class="hljs-keyword">if</span>(afficheur)
    {
        <span class="hljs-comment">// on affiche les dizaines</span>
        digitalWrite(alim_unite, LOW);
        digitalWrite(alim_dizaine, HIGH);
        afficher(dizaine);
    }
    <span class="hljs-keyword">else</span>
    {
        <span class="hljs-comment">// on affiche les unités</span>
        digitalWrite(alim_dizaine, LOW);
        digitalWrite(alim_unite, HIGH);
        afficher(unite);
    }
}

<span class="hljs-comment">// fonction écriveant sur un seul afficheur</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">afficher</span><span class="hljs-params">(<span class="hljs-keyword">char</span> chiffre)</span>
</span>{
    <span class="hljs-comment">// on commence par écrire 0, donc tout à l'état bas</span>
    digitalWrite(bit_A, LOW);
    digitalWrite(bit_B, LOW);
    digitalWrite(bit_C, LOW);
    digitalWrite(bit_D, LOW);

    <span class="hljs-keyword">if</span>(chiffre &gt;= <span class="hljs-number">8</span>)
    {
        digitalWrite(bit_D, HIGH);
        chiffre = chiffre - <span class="hljs-number">8</span>;
    }
    <span class="hljs-keyword">if</span>(chiffre &gt;= <span class="hljs-number">4</span>)
    {
        digitalWrite(bit_C, HIGH);
        chiffre = chiffre - <span class="hljs-number">4</span>;
    }
    <span class="hljs-keyword">if</span>(chiffre &gt;= <span class="hljs-number">2</span>)
    {
        digitalWrite(bit_B, HIGH);
        chiffre = chiffre - <span class="hljs-number">2</span>;
    }
    <span class="hljs-keyword">if</span>(chiffre &gt;= <span class="hljs-number">1</span>)
    {
        digitalWrite(bit_A, HIGH);
        chiffre = chiffre - <span class="hljs-number">1</span>;
    }
}
</code></pre>
   </div>
   <figcaption>
    Les fonctions d’affichage
   </figcaption>
  </figure>
 </div>
</div>
<h5 id="et-le-code-au-complet">
 <a aria-hidden="true" href="#et-le-code-au-complet">
  <span class="es-autolink-heading">
  </span>
 </a>
 Et le code au complet
</h5>
<p>
 Si vous voulez tester l’ensemble de l’application sans faire d’erreurs de copier/coller, voici le code complet (qui doit fonctionner si on considère que vous avez branché chaque composant au même endroit que sur le schéma fourni au départ !)
</p>
<figure>
 <div class="hljs-code-div">
  <div class="hljs-line-numbers">
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
  </div>
  <pre><code class="hljs language-cpp"><span class="hljs-comment">// les broches du décodeur 7 segments</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> bit_A = <span class="hljs-number">2</span>;
<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> bit_B = <span class="hljs-number">3</span>;
<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> bit_C = <span class="hljs-number">4</span>;
<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> bit_D = <span class="hljs-number">5</span>;
<span class="hljs-comment">// les broches des transistors pour l'afficheur des dizaines et celui des unités</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> alim_dizaine = <span class="hljs-number">6</span>;
<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> alim_unite = <span class="hljs-number">7</span>;
<span class="hljs-comment">// les broches des boutons</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> btn_entree = <span class="hljs-number">8</span>;
<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> btn_sortie = <span class="hljs-number">9</span>;
<span class="hljs-comment">// les leds de signalements</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> led_rouge = <span class="hljs-number">12</span>;
<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> led_verte = <span class="hljs-number">11</span>;
<span class="hljs-comment">// les mémoires d'état des boutons</span>
<span class="hljs-keyword">int</span> mem_entree = HIGH;
<span class="hljs-keyword">int</span> mem_sortie = HIGH;
<span class="hljs-keyword">int</span> etat = HIGH; <span class="hljs-comment">// variable stockant l'état courant d'un bouton</span>

<span class="hljs-keyword">char</span> place_dispo = <span class="hljs-number">10</span>; <span class="hljs-comment">// contenu des places dispos</span>
<span class="hljs-keyword">bool</span> afficheur = <span class="hljs-literal">false</span>;
<span class="hljs-keyword">long</span> temps;

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-comment">// Les broches sont toutes des sorties (sauf les boutons)</span>
    pinMode(bit_A, OUTPUT);
    pinMode(bit_B, OUTPUT);
    pinMode(bit_C, OUTPUT);
    pinMode(bit_D, OUTPUT);
    pinMode(alim_dizaine, OUTPUT);
    pinMode(alim_unite, OUTPUT);
    pinMode(btn_entree, INPUT);
    pinMode(btn_sortie, INPUT);
    pinMode(led_rouge, OUTPUT);
    pinMode(led_verte, OUTPUT);

    <span class="hljs-comment">// Les broches sont toutes mises à l'état bas (sauf led rouge éteinte)</span>
    digitalWrite(bit_A, LOW);
    digitalWrite(bit_B, LOW);
    digitalWrite(bit_C, LOW);
    digitalWrite(bit_D, LOW);
    digitalWrite(alim_dizaine, LOW);
    digitalWrite(alim_unite, LOW);
    digitalWrite(led_rouge, HIGH);
    digitalWrite(led_verte, LOW); <span class="hljs-comment">// vert par défaut</span>
    temps = millis(); <span class="hljs-comment">// enregistre "l'heure"</span>
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-comment">// si ca fait plus de 10 ms qu'on affiche, on change de 7 segments</span>
    <span class="hljs-keyword">if</span>((millis() - temps) &gt; <span class="hljs-number">10</span>)
    {
        <span class="hljs-comment">// on inverse la valeur de "afficheur"</span>
        <span class="hljs-comment">// pour changer d'afficheur (unité ou dizaine)</span>
        afficheur = !afficheur;
        <span class="hljs-comment">// on affiche</span>
        afficher_nombre(place_dispo, afficheur);
        temps = millis(); <span class="hljs-comment">// on met à jour le temps</span>
    }

    <span class="hljs-comment">// on test maintenant si les boutons ont subi un appui (ou pas)</span>
    <span class="hljs-comment">// d'abord le bouton plus puis le moins</span>
    etat = digitalRead(btn_entree);
    <span class="hljs-keyword">if</span>((etat != mem_entree) &amp;&amp; (etat == LOW))
        place_dispo += <span class="hljs-number">1</span>;
    mem_entree = etat; <span class="hljs-comment">// on enregistre l'état du bouton pour le tour suivant</span>

    <span class="hljs-comment">// et maintenant pareil pour le bouton qui décrémente</span>
    etat = digitalRead(btn_sortie);
    <span class="hljs-keyword">if</span>((etat != mem_sortie) &amp;&amp; (etat == LOW))
        place_dispo -= <span class="hljs-number">1</span>;
    mem_sortie = etat; <span class="hljs-comment">// on enregistre l'état du bouton pour le tour suivant</span>

    <span class="hljs-comment">// on applique des limites au nombre pour ne pas dépasser 99 ou 0</span>
    <span class="hljs-keyword">if</span>(place_dispo &gt; <span class="hljs-number">99</span>)
        place_dispo = <span class="hljs-number">99</span>;
    <span class="hljs-keyword">if</span>(place_dispo &lt; <span class="hljs-number">0</span>)
        place_dispo = <span class="hljs-number">0</span>;

    <span class="hljs-comment">// on met à jour l'état des leds</span>
    <span class="hljs-comment">// on commence par les éteindre</span>
    digitalWrite(led_verte, HIGH);
    digitalWrite(led_rouge, HIGH);
    <span class="hljs-keyword">if</span>(place_dispo == <span class="hljs-number">0</span>) <span class="hljs-comment">// s'il n'y a plus de place</span>
        digitalWrite(led_rouge, LOW);
    <span class="hljs-keyword">else</span>
        digitalWrite(led_verte, LOW);
}

<span class="hljs-comment">// fonction permettant d'afficher un nombre</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">afficher_nombre</span><span class="hljs-params">(<span class="hljs-keyword">char</span> nombre, <span class="hljs-keyword">bool</span> afficheur)</span>
</span>{
    <span class="hljs-keyword">long</span> temps;
    <span class="hljs-keyword">char</span> unite = <span class="hljs-number">0</span>, dizaine = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">if</span>(nombre &gt; <span class="hljs-number">9</span>)
        dizaine = nombre / <span class="hljs-number">10</span>; <span class="hljs-comment">// on récupère les dizaines</span>
    unite = nombre - (dizaine*<span class="hljs-number">10</span>); <span class="hljs-comment">// on récupère les unités</span>

    <span class="hljs-keyword">if</span>(afficheur)
    {
        <span class="hljs-comment">// on affiche les dizaines</span>
        digitalWrite(alim_unite, LOW);
        digitalWrite(alim_dizaine, HIGH);
        afficher(dizaine);
    }
    <span class="hljs-keyword">else</span>
    {
        <span class="hljs-comment">// on affiche les unités</span>
        digitalWrite(alim_dizaine, LOW);
        digitalWrite(alim_unite, HIGH);
        afficher(unite);
    }
}

<span class="hljs-comment">// fonction écrivant sur un seul afficheur</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">afficher</span><span class="hljs-params">(<span class="hljs-keyword">char</span> chiffre)</span>
</span>{
    <span class="hljs-comment">// on commence par écrire 0, donc tout à l'état bas</span>
    digitalWrite(bit_A, LOW);
    digitalWrite(bit_B, LOW);
    digitalWrite(bit_C, LOW);
    digitalWrite(bit_D, LOW);

    <span class="hljs-keyword">if</span>(chiffre &gt;= <span class="hljs-number">8</span>)
    {
        digitalWrite(bit_D, HIGH);
        chiffre = chiffre - <span class="hljs-number">8</span>;
    }
    <span class="hljs-keyword">if</span>(chiffre &gt;= <span class="hljs-number">4</span>)
    {
        digitalWrite(bit_C, HIGH);
        chiffre = chiffre - <span class="hljs-number">4</span>;
    }
    <span class="hljs-keyword">if</span>(chiffre &gt;= <span class="hljs-number">2</span>)
    {
        digitalWrite(bit_B, HIGH);
        chiffre = chiffre - <span class="hljs-number">2</span>;
    }
    <span class="hljs-keyword">if</span>(chiffre &gt;= <span class="hljs-number">1</span>)
    {
        digitalWrite(bit_A, HIGH);
        chiffre = chiffre - <span class="hljs-number">1</span>;
    }
}
<span class="hljs-comment">// Fin du programme !</span>
</code></pre>
 </div>
 <figcaption>
  Le code complet
 </figcaption>
</figure>
<h4 id="conclusion">
 <a aria-hidden="true" href="#conclusion">
  <span class="es-autolink-heading">
  </span>
 </a>
 Conclusion
</h4>
<p>
 Bon, si vous ne comprenez pas tout du premier coup, c’est un petit peu normal, c’est en effet difficile de reprendre un programme que l’on a pas fait soi-même et ce pour diverses raisons.
Le principal est que vous ayez cherché une solution par vous-même et que vous soyez arrivé à réaliser l’objectif final.
Si vous n’avez pas réussi mais que vous pensiez y être presque, alors je vous invite à chercher profondément le pourquoi du comment votre programme ne fonctionne pas ou pas entièrement, cela vous aidera à trouver vos erreurs et à ne plus en refaire !
</p>
<p>
 Il est pas magnifique ce parking ? J’espère que vous avez apprécié sa réalisation.
Nous allons maintenant continuer à apprendre de nouvelles choses, toujours plus sympas les unes que les autres.
Un conseil, gardez votre travail quelques part au chaud, vous pourriez l’améliorer avec vos connaissances futures !
</p>
            </div>
            <!-- /.entry-content -->
            <hr>
            <div class="row bg-light my-2 py-2 rounded">
                <div class="col mr-auto">
                    <a class="" href="/tuto-arduino-205-afficheurs-7-segments" rel="prev">
                        <i class="fas fa-chevron-left fa-lg"></i>
                        tuto-arduino-205-afficheurs-7-segments
                    </a>
                </div>
                <div class="col-auto">
                    <a class="" href="/tuto-arduino-301-généralités-sur-la-voie-série" rel="next">
                        tuto-arduino-301-généralités-sur-la-voie-série
                        <i class="fas fa-chevron-right fa-lg"></i>
                    </a>
                </div>
            </div>
            <div class="text-center">
                <img class="es-licence-pic" src="/static/images/CC BY-NC-SA.png" alt="Licence CC BY-NC-SA" title="Article sous licence CC BY-NC-SA">
            </div>
            <div class="my-3 text-center">
                <a class="btn btn-outline-dark mx-1" href="https://twitter.com/share?url=https://eskimon.fr/tuto-arduino-206-tp-parking&amp;text=[TP] Parking - https://eskimon.fr/tuto-arduino-206-tp-parking" rel="nofollow" title="Partager cet article sur Twitter" role="button" data-toggle="tooltip" data-placement="top">
                    <i class="fab fa-twitter fa-lg"></i>
                </a>
                <a class="btn btn-outline-dark mx-1" href="https://www.facebook.com/sharer.php?u=https://eskimon.fr/tuto-arduino-206-tp-parking&amp;t=[TP] Parking - https://eskimon.fr/tuto-arduino-206-tp-parking" rel="nofollow" title="Partager cet article sur Facebook" role="button" data-toggle="tooltip" data-placement="top">
                    <i class="fab fa-facebook-f fa-lg"></i>
                </a>
                <a class="btn btn-outline-dark mx-1" href="https://plus.google.com/share?url=https://eskimon.fr/tuto-arduino-206-tp-parking&amp;hl=fr" rel="nofollow" title="Partager cet article sur Google +" role="button" data-toggle="tooltip" data-placement="top">
                    <i class="fab fa-google-plus fa-lg"></i>
                </a>
                <!--<a class="btn btn-outline-dark mx-1" href="http://sharetodiaspora.github.io/?url=https://eskimon.fr/tuto-arduino-206-tp-parking&amp;title=[TP] Parking - https://eskimon.fr/tuto-arduino-206-tp-parking" rel="nofollow"  title="Partager cet article sur Diaspora" role="button" data-toggle="tooltip" data-placement="top">
                    <i class="fab fa-google-plus fa-lg"></i>
                </a>-->
                <a class="btn btn-outline-dark mx-1" href="mailto:?subject=[TP] Parking&amp;body=https://eskimon.fr/tuto-arduino-206-tp-parking"rel="nofollow" title="Partager cet article par email" role="button" data-toggle="tooltip" data-placement="top">
                    <i class="far fa-envelope fa-lg"></i>
                </a>
            </div>
            <hr>
            <!-- disqus start -->
            <div id="disqus_thread"></div>
            <script>
                var disqus_config = function () {
                    this.page.url = 'https://eskimon.fr/tuto-arduino-206-tp-parking';
                    this.page.identifier = 'tuto-arduino-206-tp-parking';
                    this.page.title = '[TP] Parking';
                };
                (function () { // DON'T EDIT BELOW THIS LINE
                    var d = document, s = d.createElement('script');
                    s.src = 'https://eskimon-fr.disqus.com/embed.js';
                    s.setAttribute('data-timestamp', +new Date());
                    (d.head || d.body).appendChild(s);
                })();
            </script>
            <noscript>Please enable JavaScript to view the
                <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
            </noscript>
            <!-- disqus end -->
        </article>
    </div>
    <div class="d-none d-xl-block col-xl-1 offset-xl-1 px-0">
        <div class="d-flex flex-column justify-content-around align-items-end h-100" id="es-right-ad-block">
            <!-- Pub ajouté auto -->
        </div>
    </div>
</div>
    </div>
<footer class="container-fluid bg-dark small text-white px-3">
<div class="row">
    <div class="col align-self-center">
        © Eskimon -
        Blog propulsé par <a class="bold text-white" href="https://blog.getpelican.com/" rel="nofollow">Pelican</a> -
        Thème fait maison
    </div>
    <div class="col align-self-end text-right">
        <a class="btn btn-lg text-light" href="https://github.com/Eskimon" rel="nofollow" title="Mon profil Github">
            <i class="fab fa-github fa-lg"></i>
        </a>
        <a class="btn btn-lg text-light" href="https://twitter.com/Eskimon_fr" rel="nofollow" title="Me suivre sur Linkedin">
            <i class="fab fa-twitter fa-lg"></i>
        </a>
    </div>
  </div>
</footer>
    <!-- For formula -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!-- Font awesome -->
    <script src="https://use.fontawesome.com/releases/v5.0.0/js/all.js"></script>
    <!-- JQuery first -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <!-- Popper.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <!-- Bootstrap -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <!-- For tooltips -->
    <script>$(function () {  $('[data-toggle="tooltip"]').tooltip()})</script>
    <script src="/static/js/my-scripts.js"></script>
<script>
function create_side_summary() {
    // Duplicate summary
    var main_summary = $('#sommaire').next();
    if(main_summary.length === 0)
        return
    var side_summary = main_summary.clone();
    side_summary.addClass('pl-0');
    var all_p = side_summary.find('p');
    all_p.contents().unwrap();
    var all_li = side_summary.find('li');
    all_li.addClass('pl-1');

    // scrollspy - in
    side_summary.attr('id', 'es-side-summary-mainlist');
    //side_summary.addClass('nav');
    //all_li.addClass('nav-item');
    var all_a = side_summary.find('a');
    all_a.addClass('nav-link');
    var all_ul = side_summary.find('ul');
    all_ul.addClass('pl-1');
    $('body').scrollspy({ target: '#es-side-summary-mainlist' });
    // scrollspy - out

    var summary_title = document.createElement("h4");
    summary_title.className = 'navbar-brand';
    summary_title.innerHTML = 'Sommaire';
    $(summary_title).prependTo('#es-side-summary-content');
    side_summary.appendTo('#es-side-summary-content');
    main_summary.addClass('es-subul-collapse');
}

function generate_spoilers() {
    all_secret = $('.custom-block-spoiler');
    all_secret.each(function( index ) {
        let content = $(this).html();
        $(this).html('');
        $(this).addClass('card');
        var headerText = document.createElement("button");
        var cardHeader = document.createElement("div");
        var cardBodyWrapper = document.createElement("div");
        var cardBody = document.createElement("div");
        $(headerText).text('Contenu masqué, cliquez pour afficher');
        $(headerText).addClass('btn btn-link btn-sm');
        $(headerText).attr('data-toggle', 'collapse');
        $(headerText).attr('data-target', '#collapse-' + index);
        $(headerText).attr('aria-controls', 'collapse-' + index);
        $(headerText).attr('aria-expanded', 'false');
        $(cardHeader).append(headerText);
        $(cardHeader).addClass('card-header');
        $(cardHeader).attr('id', 'spoiler-' + index);
        $(cardBody).html(content);
        $(cardBody).addClass('card-body');
        $(cardBodyWrapper).append(cardBody);
        $(cardBodyWrapper).addClass('collapse hide');
        $(cardBodyWrapper).attr('id', 'collapse-' + index)
        $(cardBodyWrapper).attr('aria-labelledby', 'spoiler-' + index)
        $(this).prepend(cardHeader);
        $(this).append(cardBodyWrapper);
    });

    $('.collapse').collapse({toggle: false});
}

function load_extra_ads() {
    // Load right side blocks
    var sidebar = $('#es-right-ad-block');
    var n_height = Math.floor(sidebar.height() / 2000);
    for (i = 0; i < n_height; i++) {
        var frag = document.createDocumentFragment();
        var newAdBlock = document.createElement("div");
        var block1 = document.createElement("ins");
        var block2 = document.createElement("script");

        block1.innerHTML = '<ins class="adsbygoogle" ' +
            'style="display:inline-block;width:120px;height:600px" ' +
            'data-ad-client="ca-pub-2080155902357792" ' +
            'data-ad-slot="4023722026"></ins>';
        block2.innerHTML = '(adsbygoogle = window.adsbygoogle || []).push({});';

        $(newAdBlock).append(block1);
        $(newAdBlock).append(block2);
        $(frag).append(newAdBlock);

        $(sidebar).append(frag);
    }

    // Load in feed blocks (above every h3)
    var frag = document.createDocumentFragment();
    var newAdBlock = document.createElement("div");
    var block1 = document.createElement("ins");
    var block2 = document.createElement("script");
    block1.innerHTML = '<ins class="adsbygoogle"' +
    'style = "display:inline-block;width:970px;height:90px"' +
    'data - ad - client="ca-pub-2080155902357792"' +
    'data - ad - slot="7100712740" ></ins >'
    block2.innerHTML = '(adsbygoogle = window.adsbygoogle || []).push({});';
    $(newAdBlock).append(block1);
    $(newAdBlock).append(block2);
    newAdBlock.className = 'my-3 text-center';
    $(frag).append(newAdBlock);
    var titles = $('.entry-content h3').slice(1);
    $(frag).insertBefore(titles);
}

$(document).ready(function () {

    create_side_summary();
    generate_spoilers();

    // when opening the sidebar
    $('#sidebarCollapse').on('click', function () {
        // open sidebar
        $('#es-side-summary').removeClass('d-none');
        $('#es-content').addClass('d-none');
        $('#sidebarCollapse').removeClass('sticky-top');
    });

    // if dismiss or overlay was clicked
    $('#es-side-summary').on('click', function () {
      // hide the sidebar
      $('#es-side-summary').addClass('d-none');
      $('#es-content').removeClass('d-none');
      $('#sidebarCollapse').addClass('sticky-top');
    });
});
</script>

<script id="dsq-count-scr" src="//eskimon-fr.disqus.com/count.js" async></script>
</body>

</html>
