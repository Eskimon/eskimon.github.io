<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>TP Arduino : Faire une animation Space Invaders sur LCD &bull; Le blog d'Eskimon</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="/static/css/hljs-monokai.css" />
    <link rel="stylesheet" href="/static/css/style.css" />
    <!-- Google font -->
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/static/images/favicon/favicon.ico">
    <link rel="apple-touch-icon" sizes="57x57" href="/static/images/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/static/images/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/static/images/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/static/images/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/static/images/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/static/images/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/static/images/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/static/images/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/images/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/static/images/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/static/images/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/images/favicon/favicon-16x16.png">
    <link rel="manifest" href="/static/images/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/static/images/favicon/ms-icon-144x144.png">


    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-46353906-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-46353906-1');
    </script>

    <meta name="description" content="Comment s’amuser à faire un pseudo écran de veille sur un écran LCD d’Arduino" />

  <meta name="tags" content="arduino" />
  <meta name="tags" content="tp" />

  <link rel="canonical" href="https://zestedesavoir.com/contenus/917/tp-arduino-faire-une-animation-space-invaders-sur-lcd/" />

  <meta property="og:site_name" content="Le blog d'Eskimon">
  <meta property="og:title" content="TP Arduino : Faire une animation Space Invaders sur LCD">
  <meta property="og:url" content="https://eskimon.fr/tp-arduino-faire-une-animation-space-invaders-sur-lcd">
  <meta property="og:language" content="fr_FR">
  <meta property="og:type" content="website">

  <meta property="twitter:domain" content="https://eskimon.fr/">
  <meta property="twitter:card" content="summary">
  <meta property="twitter:url" content="https://eskimon.fr/tp-arduino-faire-une-animation-space-invaders-sur-lcd">
  <meta property="twitter:title" content="TP Arduino : Faire une animation Space Invaders sur LCD">
<meta property="twitter:description" content="Comment s’amuser à faire un pseudo écran de veille sur un écran LCD d’Arduino">  <meta property="twitter:site" content="SITENAME">
  <meta property="twitter:creator" content="@eskimon_fr">

  <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
  <meta name="DC.publisher" lang="fr" content="Le blog d'Eskimon" />
  <meta name="DC.creator" content="Eskimon" />
  <meta name="DC.type" content="text" />
  <meta name="DC.title" content="TP Arduino : Faire une animation Space Invaders sur LCD" />
  <meta name="DC.abstract" content="TP Arduino : Faire une animation Space Invaders sur LCD – Comment s’amuser à faire un pseudo écran de veille sur un écran LCD d’Arduino" />
  <meta name="DC.subject" lang="fr" content=" – arduino; tp" />
<meta name="DC.description" lang="fr" content="Comment s’amuser à faire un pseudo écran de veille sur un écran LCD d’Arduino" />  <meta name="DC.date" content="2016-05-28T05:24:00+02:00" />
  <meta name="DC.format" content="text/html" />
  <meta name="DC.language" content="fr" />
  <meta name="DC.rights" content="CC BY" />

  <script type="application/ld+json">
    [{
        "@context": "http://schema.org",
        "@type": "Article",
        "mainEntityOfPage": {
          "@type": "WebPage",
          "@id": "https://eskimon.fr/tp-arduino-faire-une-animation-space-invaders-sur-lcd"
        },
        "headline": ""TP Arduino : Faire une animation Space Invaders sur LCD"",
        "datePublished": "2016-05-28T05:24:00+02:00",
        "image": [
            "https://eskimon.fr/static/images/logo.png"
        ],
        "author": {
            "@type": "Person",
            "name": "Eskimon",
            "image": "https://eskimon.fr/static/images/logo.png"
        },
        "publisher": {
            "@type": "Organization",
            "name": "Eskimon",
            "logo": {
                "@type": "ImageObject",
                "url": "https://eskimon.fr/static/images/logo.png"
            }
        },
        "description": ""Comment s\u2019amuser \u00e0 faire un pseudo \u00e9cran de veille sur un \u00e9cran LCD d\u2019Arduino""
    },
    {
        "@context": "http://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [{
            "@type": "ListItem",
            "position": 1,
            "item": {
                "@id": "https://eskimon.fr/category/arduino",
                "name": ""Arduino""
            }
        }
        , {
            "@type": "ListItem",
            "position": 2,
            "item": {
                "@id": "https://eskimon.fr/tp-arduino-faire-une-animation-space-invaders-sur-lcd",
                "name": ""TP Arduino : Faire une animation Space Invaders sur LCD""
            }
        }]
    }]
    </script>

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
         (adsbygoogle = window.adsbygoogle || []).push({
              google_ad_client: "ca-pub-2080155902357792",
              enable_page_level_ads: true
         });
    </script>
</head>

<body>
<nav class="navbar navbar-expand-lg navbar-light bg-secondary-l40 py-0">
    <a class="navbar-brand" href="/">
        <img src="/static/images/logo.png" width="20" height="20" alt="">
        Le blog d'Eskimon
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
        <div class="navbar-nav ml-auto">
                <a class="nav-item nav-link active" href="/category/arduino">Arduino</a>
                <a class="nav-item nav-link " href="/category/articles">Articles</a>
                <a class="nav-item nav-link " href="/category/web">Web</a>
        </div>
    </div>
</nav>
    <div class="container-fluid es-verticalfill">
<div class="row">
    <!-- Sidebar -->
    <div class="col-lg-2 d-none d-lg-block sticky-top es-scrollable pt-3 px-1 bg-light es-ul-bordered" id="es-side-summary">
        <nav class="px-2" id="es-side-summary-content">
            <!-- Summary will come here -->
        </nav>
        <hr>
        <!-- Self-promo for ebook -->
        <div class="text-center">
            <h4>Ebook Arduino !</h4>
            <a href="/ebook-tutoriel-arduino.html"><img src="/images/couverture-mini.png" alt="couverture ebook" title="couverture de l'ebook"></a>
        </div>
        <hr>
        <!-- Blog side carree -->
        <div id="es-side-summary-bot-annonce" class="text-center">
            <ins class="adsbygoogle"
                 style="display:inline-block;width:250px;height:250px"
                 data-ad-client="ca-pub-2080155902357792"
                 data-ad-slot="6115810402"></ins>
            <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>
    </div>
    <!-- Main content -->
    <div class="col-md-10 col-lg-8 col-xl-7 offset-md-1 offset-lg-1 offset-xl-1 d-block pt-3" id="es-content">
        <article>
            <!-- Leaderboard head article -->
            <ins class="adsbygoogle"
                style="display:inline-block;width:970px;height:90px"
                data-ad-client="ca-pub-2080155902357792"
                data-ad-slot="7158680773"></ins>
            <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb bg-white">
                    <li class="breadcrumb-item"><a href="/category/arduino">Arduino</a></li>
                    <li class="breadcrumb-item active" aria-current="page">TP Arduino : Faire une animation Space Invaders sur LCD</li>
                </ol>
            </nav>
            <header class="es-post-info">
                <h1 class="text-center my-4">TP Arduino : Faire une animation Space Invaders sur LCD</h1>
            </header>
            <footer class="es-post-info pb-2 mb-2">
                <div class="row align-items-center">
                    <div class="col-auto mr-auto">
                        <span class="vcard author">
                            <a class="" href="/author/eskimon" rel="author">Eskimon</a>
                        </span>
                        ,
                        <time class="" datetime="2016-05-28T05:24:00+02:00" pubdate>
                            le sam. 28 mai 2016
                        </time>
                            (<a href="https://eskimon.fr/tp-arduino-faire-une-animation-space-invaders-sur-lcd#disqus_thread" data-disqus-identifier="tp-arduino-faire-une-animation-space-invaders-sur-lcd">commentaires</a>)
                    </div>
                    <div class="col-auto">
                        <a class="btn btn-outline-primary btn-sm" href="/tag/arduino" rel="tag">arduino</a>
                        <a class="btn btn-outline-primary btn-sm" href="/tag/tp" rel="tag">tp</a>
                    </div>
                </div>
            </footer>
            <button type="button" id="sidebarCollapse" class="float-right btn btn-secondary sticky-top d-block d-lg-none">
                Sommaire
            </button>
            <!-- /.post-info -->
            <div class="entry-content">
                <p>
 Il y a quelques temps, j’avais participé à un petit atelier créatif de programmation pour réaliser une animation de fond d’écran sur le thème «
 <em>
  Space Invaders
 </em>
 ». Le simple but était de s’amuser à coder pour faire bouger un
 <em>
  invader
 </em>
 sur un écran. Comme il n’était pas précisé de quel écran il s’agissait, ni quelles étaient les limites de l’application, je me suis amusé à sortir du cadre « ordinateur = CPU + clavier + écran » et j’ai proposé une solution à base d’Arduino et d’un écran LCD alphanumérique.
</p>
<p>
 Je vous propose dans ce petit tutoriel de voir comment j’ai développé ma solution visible sur la vidéo ci-dessous.
</p>
<div class="text-center">
 <div class="video-container">
  <div class="video-wrapper">
   <iframe allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/nyFxEGcdvZY" width="560">
   </iframe>
  </div>
 </div>
</div>
<div class="custom-block alert alert-primary">
 <div class="custom-block-body">
  <p>
   Si vous débutez sur Arduino, vous pouvez aller relire le chapitre concernant
   <a href="https://zestedesavoir.com/tutoriels/686/arduino-premiers-pas-en-informatique-embarquee/748_laffichage-une-autre-maniere-dinteragir/">
    les écrans LCD et Arduino
   </a>
   pour vous échauffer.
   <img alt=":)" class="smiley" src="./static/smileys/smile.png"/>
  </p>
 </div>
</div>
<h3 id="sommaire">
 <a aria-hidden="true" href="#sommaire">
  <span class="es-autolink-heading">
  </span>
 </a>
 Sommaire
</h3>
<ul>
 <li>
  <p>
   <a href="#matériel-nécessaire-et-mise-en-route">
    Matériel nécessaire et mise en route
   </a>
  </p>
  <ul>
   <li>
    <a href="#le-matériel">
     Le matériel
    </a>
   </li>
   <li>
    <a href="#câbler-lensemble">
     Câbler l’ensemble
    </a>
   </li>
  </ul>
 </li>
 <li>
  <p>
   <a href="#le-setup">
    Le setup
   </a>
  </p>
  <ul>
   <li>
    <a href="#créer-les-invaders-dans-le-code">
     Créer les invaders dans le code
    </a>
   </li>
   <li>
    <a href="#le-reste-du-setup">
     Le reste du setup
    </a>
   </li>
  </ul>
 </li>
 <li>
  <a href="#animation-et-code-complet">
   Animation et code complet
  </a>
 </li>
</ul>
<h3 id="matériel-nécessaire-et-mise-en-route">
 <a aria-hidden="true" href="#matériel-nécessaire-et-mise-en-route">
  <span class="es-autolink-heading">
  </span>
 </a>
 Matériel nécessaire et mise en route
</h3>
<h4 id="le-matériel">
 <a aria-hidden="true" href="#le-matériel">
  <span class="es-autolink-heading">
  </span>
 </a>
 Le matériel
</h4>
<p>
 Pour effectuer ce montage, pas besoin de grand-chose ! Il vous faudra simplement une carte Arduino (Uno dans mon cas) et un écran LCD. Et c’est tout !
</p>
<h4 id="câbler-lensemble">
 <a aria-hidden="true" href="#câbler-lensemble">
  <span class="es-autolink-heading">
  </span>
 </a>
 Câbler l’ensemble
</h4>
<p>
 Pour ce qui est du câblage, là encore, rien de compliqué. Si vous avez suivi le tutoriel Arduino sur les écrans LCD, il ne devrait pas y avoir de problème. C’est pourquoi je vous propose ici le schéma électronique qui présente comment brancher l’écran en mode « 4 bits » à l’Arduino.
</p>
<p>
 Pour plus d’explications,
 <a href="https://zestedesavoir.com/tutoriels/686/arduino-premiers-pas-en-informatique-embarquee/748_laffichage-une-autre-maniere-dinteragir/3443_les-ecrans-lcd/#3-10695_comment-on-sen-sert">
  le tuto est ici
 </a>
 .
 <img alt=";)" class="smiley" src="./static/smileys/clin.png"/>
</p>
<figure>
 <img alt="Câblage écran LCD — schéma." src="./images/uploaded/tp-arduino-faire-une-animation-space-invaders-sur-lcd/cablage-ecran-lcd-schema.png"/>
 <figcaption>
  Câblage écran LCD — schéma.
 </figcaption>
</figure>
<figure>
 <img alt="Câblage écran LCD — montage." src="./images/uploaded/tp-arduino-faire-une-animation-space-invaders-sur-lcd/cablage-ecran-lcd-montage.png"/>
 <figcaption>
  Câblage écran LCD — montage.
 </figcaption>
</figure>
<h3 id="le-setup">
 <a aria-hidden="true" href="#le-setup">
  <span class="es-autolink-heading">
  </span>
 </a>
 Le setup
</h3>
<p>
 L’initialisation des variables va avoir une certaine importance ici. En effet, le dessin du petit
 <em>
  invader
 </em>
 <img src="./images/uploaded/tp-arduino-faire-une-animation-space-invaders-sur-lcd/2985ef8e-5c24-46da-8771-0fa5ddef25aagif.gif"/>
 n’existe bien entendu pas de base dans l’Arduino ou dans le jeu de caractères du LCD. Il va donc falloir lui « apprendre » à le dessiner. Pour rendre les choses un peu plus sympa, on va le dessiner de deux manières, comme sur le dessin précédent : une fois avec les « bras » baissés et une fois avec les « bras » levés.
</p>
<p>
 Voici un point de vue sous forme de grille de l’envahisseur.
</p>
<div class="text-center">
 <p>
  <img alt="*Invader* bras en bas." src="./images/uploaded/tp-arduino-faire-une-animation-space-invaders-sur-lcd/invader-bras-en-bas.png"/>
  <img alt="*Invader* bras en haut." src="./images/uploaded/tp-arduino-faire-une-animation-space-invaders-sur-lcd/invader-bras-en-haut.png"/>
 </p>
</div>
<p>
 Comme vous pouvez le voir, ces figures ont une taille de 10 pixels de large et 8 de haut, or un caractère affichable par l’écran ne peut avoir qu’une taille de 5 par 8.
Il va donc falloir découper l'
 <strong>
  invader
 </strong>
 pour l’afficher en deux morceaux côte à côte comme montré avec la ligne rouge sur les images. Ce qui signifie qu’au final, on va créer non pas deux caractères, mais bien quatre. Un pour chacune des parties de chaque
 <em>
  invader
 </em>
 . Si on avait voulu faire une animation avec trois étapes par
 <em>
  invader
 </em>
 , il aurait fallu faire six caractères (et je vous rappelle que l’écran est limité à huit caractères personnalisés).
</p>
<h4 id="créer-les-invaders-dans-le-code">
 <a aria-hidden="true" href="#créer-les-invaders-dans-le-code">
  <span class="es-autolink-heading">
  </span>
 </a>
 Créer les
 <em>
  invaders
 </em>
 dans le code
</h4>
<div class="custom-block alert alert-primary">
 <div class="custom-block-body">
  <p>
   Si vous ne vous vous souvenez plus trop comment faire des caractères personnalisés, n’hésitez pas à aller relire
   <a href="https://zestedesavoir.com/tutoriels/686/arduino-premiers-pas-en-informatique-embarquee/748_laffichage-une-autre-maniere-dinteragir/3444_votre-premier-texte-sur-le-lcd/#3-10698_creer-un-caractere">
    le tutoriel
   </a>
   .
   <img alt=";)" class="smiley" src="./static/smileys/clin.png"/>
  </p>
 </div>
</div>
<p>
 Maintenant que le dessin est prêt, nous allons devoir créer ces caractères dans le code à envoyer à l’Arduino. Ainsi, notre carte pourra « apprendre » à l’écran les nouveaux dessins. Pour cela, on utilise quatre tableaux d’octets (
 <code>
  byte
 </code>
 ). Ils sont triés dans l’ordre, de telle façon que chaque paire (0–1 et 2–3) représente les parties gauche et droite de la figure. Chacun de ces tableaux représentera de manière binaire les images vues ci-dessus.
</p>
<div class="hljs-code-div">
 <div class="hljs-line-numbers">
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
 </div>
 <pre><code class="hljs language-cpp"><span class="hljs-comment">// Partie gauche de l'invader bras baissés.</span>
byte invader_low_left[<span class="hljs-number">8</span>] = {
  B00100,
  B00010,
  B00111,
  B01101,
  B11111,
  B10111,
  B10100,
  B00010
};
<span class="hljs-comment">// Partie droite de l'invader bras baissés.</span>
byte invader_low_right[<span class="hljs-number">8</span>] = {
  B00100,
  B01000,
  B11100,
  B10110,
  B11111,
  B11101,
  B00101,
  B01000
};
<span class="hljs-comment">// Partie gauche de l'invader bras levés.</span>
byte invader_high_left[<span class="hljs-number">8</span>] = {
  B00100,
  B10010,
  B10111,
  B11101,
  B11111,
  B01111,
  B00100,
  B01000
};
<span class="hljs-comment">// Partie droite de l'invader bras levés.</span>
byte invader_high_right[<span class="hljs-number">8</span>] = {
  B00100,
  B01001,
  B11101,
  B10111,
  B11111,
  B11110,
  B00100,
  B00010
};
</code></pre>
</div>
<h4 id="le-reste-du-setup">
 <a aria-hidden="true" href="#le-reste-du-setup">
  <span class="es-autolink-heading">
  </span>
 </a>
 Le reste du
 <em>
  setup
 </em>
</h4>
<p>
 Voilà, le plus dur est fait, il ne nous reste plus qu’à intégrer les bricoles qui font que notre LCD va comprendre ce qu’on lui dit.
</p>
<p>
 Pour cela, on va, dans l’ordre :
</p>
<ol>
 <li>
  Ajouter la librairie
  <code>
   &lt;LiquidCrystal.h&gt;
  </code>
  en haut de notre fichier ;
 </li>
 <li>
  Déclarer un objet
  <code>
   LiquidCrystal
  </code>
  avec les bonnes broches à utiliser ;
 </li>
 <li>
  Dans le
  <code>
   setup()
  </code>
  , envoyer les quatre caractères au LCD (en mode « commande ») ;
 </li>
 <li>
  Démarrer la communication avec le LCD (passage en mode « écriture ») ;
 </li>
 <li>
  Démarrer le générateur de nombres aléatoires pour faire bouger l'
  <em>
   invader
  </em>
  .
 </li>
</ol>
<p>
 Cela pourra se traduire en code Arduino de la manière suivante.
</p>
<div class="hljs-code-div">
 <div class="hljs-line-numbers">
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
 </div>
 <pre><code class="hljs language-cpp"><span class="hljs-comment">// 1. On inclut la librairie LiquidCrystal.</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;LiquidCrystal.h&gt;</span></span>

<span class="hljs-comment">// 2. On crée un objet LiquidCrystal (nommé « lcd » dans notre cas).</span>
<span class="hljs-function">LiquidCrystal <span class="hljs-title">lcd</span><span class="hljs-params">(<span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>)</span></span>;

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-comment">/*
     Ne pas oublier de créer les quatre tableaux
     pour les caractère représentant les invaders
     (omis ici pour gagner de la place/visibilité).
  */</span>

  <span class="hljs-comment">// 3. On envoie les nouveaux caractères à l’écran.</span>
  lcd.createChar(<span class="hljs-number">0</span>, invader_low_left);   <span class="hljs-comment">// Apprend le caractère à l’écran LCD.</span>
  lcd.createChar(<span class="hljs-number">1</span>, invader_low_right);  <span class="hljs-comment">// Apprend le caractère à l’écran LCD.</span>
  lcd.createChar(<span class="hljs-number">2</span>, invader_high_left);  <span class="hljs-comment">// Apprend le caractère à l’écran LCD.</span>
  lcd.createChar(<span class="hljs-number">3</span>, invader_high_right); <span class="hljs-comment">// Apprend le caractère à l’écran LCD.</span>

  <span class="hljs-comment">// 4. On passe l’écran en mode « écriture ».</span>
  lcd.begin(<span class="hljs-number">16</span>, <span class="hljs-number">2</span>);

  <span class="hljs-comment">// 5. On démarre le générateur de nombres aléatoires.</span>
  randomSeed(analogRead(<span class="hljs-number">0</span>)); <span class="hljs-comment">// Initialise l’aléatoire avec une lecture analogique.</span>

  <span class="hljs-comment">// 6. Bonus, on dit coucou à l’utilisateur, puis on efface.</span>
  lcd.write(<span class="hljs-string">"Hello World!"</span>);
  delay(<span class="hljs-number">2000</span>);
  lcd.clear();
}
</code></pre>
</div>
<p>
 Le code complet du
 <em>
  setup
 </em>
 avec la création des caractères.
</p>
<div class="custom-block custom-block-spoiler">
 <div class="custom-block-body">
  <div class="hljs-code-div">
   <div class="hljs-line-numbers">
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
   </div>
   <pre><code class="hljs language-cpp"><span class="hljs-comment">// 1. On inclut la librairie LiquidCrystal.</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;LiquidCrystal.h&gt;</span></span>

<span class="hljs-comment">// 2. On crée un objet LiquidCrystal (nommé « lcd » dans notre cas).</span>
<span class="hljs-function">LiquidCrystal <span class="hljs-title">lcd</span><span class="hljs-params">(<span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>)</span></span>;

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{

  <span class="hljs-comment">// Partie gauche de l'invader bras baissés.</span>
  byte invader_low_left[<span class="hljs-number">8</span>] = {
    B00100,
    B00010,
    B00111,
    B01101,
    B11111,
    B10111,
    B10100,
    B00010
  };
  <span class="hljs-comment">// Partie droite de l'invader bras baissés.</span>
  byte invader_low_right[<span class="hljs-number">8</span>] = {
    B00100,
    B01000,
    B11100,
    B10110,
    B11111,
    B11101,
    B00101,
    B01000
  };
  <span class="hljs-comment">// Partie gauche de l'invader bras levés.</span>
  byte invader_high_left[<span class="hljs-number">8</span>] = {
    B00100,
    B10010,
    B10111,
    B11101,
    B11111,
    B01111,
    B00100,
    B01000
  };
  <span class="hljs-comment">// Partie droite de l'invader bras levés.</span>
  byte invader_high_right[<span class="hljs-number">8</span>] = {
    B00100,
    B01001,
    B11101,
    B10111,
    B11111,
    B11110,
    B00100,
    B00010
  };

  <span class="hljs-comment">// 3. On envoie les nouveaux caractères à l’écran.</span>
  lcd.createChar(<span class="hljs-number">0</span>, invader_low_left);   <span class="hljs-comment">// Apprend le caractère à l’écran LCD.</span>
  lcd.createChar(<span class="hljs-number">1</span>, invader_low_right);  <span class="hljs-comment">// Apprend le caractère à l’écran LCD.</span>
  lcd.createChar(<span class="hljs-number">2</span>, invader_high_left);  <span class="hljs-comment">// Apprend le caractère à l’écran LCD.</span>
  lcd.createChar(<span class="hljs-number">3</span>, invader_high_right); <span class="hljs-comment">// Apprend le caractère à l’écran LCD.</span>

  <span class="hljs-comment">// 4. On passe l’écran en mode « écriture ».</span>
  lcd.begin(<span class="hljs-number">16</span>, <span class="hljs-number">2</span>);

  <span class="hljs-comment">// 5. On démarre le générateur de nombres aléatoires.</span>
  randomSeed(analogRead(<span class="hljs-number">0</span>)); <span class="hljs-comment">// Initialise l’aléatoire avec une lecture analogique.</span>

  <span class="hljs-comment">// 6. Bonus, on dit coucou à l’utilisateur, puis on efface.</span>
  lcd.write(<span class="hljs-string">"Hello World!"</span>);
  delay(<span class="hljs-number">2000</span>);
  lcd.clear();
}
</code></pre>
  </div>
 </div>
</div>
<h3 id="animation-et-code-complet">
 <a aria-hidden="true" href="#animation-et-code-complet">
  <span class="es-autolink-heading">
  </span>
 </a>
 Animation et code complet
</h3>
<p>
 Maintenant que tout est mis en place, il ne reste plus qu’à réaliser l’animation proprement dite.
</p>
<p>
 Pour faire les choses proprement, on va écrire une fonction
 <code>
  drawInvader()
 </code>
 pour dessiner. Cette fonction prendra en paramètre la ligne et la colonne où l'
 <em>
  invader
 </em>
 doit être dessiné, et bien sûr l’état de l'
 <em>
  invader
 </em>
 (bras levés ou baissés).
Comme vous avez pu le voir dans le
 <em>
  setup
 </em>
 , on va utiliser une fonction permettant de générer des nombres aléatoires pour déterminer la position du vaisseau. Cette fonction se nomme tout simplement
 <code>
  random()
 </code>
 et prend en paramètre la borne inférieure (incluse) et la borne supérieure (non incluse) du nombre aléatoire à retourner (un
 <code>
  long
 </code>
 ). Dans notre cas, en vertical, on veut pouvoir obtenir 0 ou 1, et en horizontal, 0 à 14 (car si on fait 15, la seconde moitié de l'
 <em>
  invader
 </em>
 ne sera pas affichée
 <img alt=";)" class="smiley" src="./static/smileys/clin.png"/>
 ). On va donc faire ce qui suit.
</p>
<div class="hljs-code-div">
 <div class="hljs-line-numbers">
  <span>
  </span>
  <span>
  </span>
 </div>
 <pre><code class="hljs language-cpp"><span class="hljs-keyword">char</span> ligne = random(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>);
<span class="hljs-keyword">char</span> colonne = random(<span class="hljs-number">0</span>, <span class="hljs-number">15</span>);
</code></pre>
</div>
<p>
 La suite de la
 <em>
  loop
 </em>
 &lt;—COMMENT boucle serait vraiment mieux &gt;&lt; COMMENT—&gt; est assez simple. Une fois que l’on a les coordonnées, on appelle la fonction
 <code>
  drawInvader
 </code>
 une première fois avec l’état « bras baissés », on fait une petite pause, puis on refait l’appel avec les bras levés pour obtenir l’animation complète. De nouveau une petite pause, puis le cycle repart du début.
</p>
<p>
 Voici le code complet de la boucle.
</p>
<div class="hljs-code-div">
 <div class="hljs-line-numbers">
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
 </div>
 <pre><code class="hljs language-cpp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-keyword">char</span> ligne = random(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>);
  <span class="hljs-keyword">char</span> colonne = random(<span class="hljs-number">0</span>, <span class="hljs-number">15</span>);
  drawInvader(ligne, colonne, <span class="hljs-number">0</span>); <span class="hljs-comment">// État 0 : bras baissés.</span>
  delay(<span class="hljs-number">800</span>);
  drawInvader(ligne, colonne, <span class="hljs-number">1</span>); <span class="hljs-comment">// État 1 : bras levés.</span>
  delay(<span class="hljs-number">800</span>);
  lcd.clear();
}
</code></pre>
</div>
<div class="custom-block alert alert-info">
 <div class="custom-block-body">
  <p>
   C’est bien beau mais
   <code>
    drawInvader
   </code>
   dans tout ça ?
  </p>
 </div>
</div>
<p>
 Une difficulté ? Où ça ?
 <img alt=";)" class="smiley" src="./static/smileys/clin.png"/>
 Si vous savez comment afficher un caractère personnalisé sur l’écran, alors il ne devrait y avoir aucun problème.
 <img alt=":)" class="smiley" src="./static/smileys/smile.png"/>
</p>
<p>
 En effet, la suite logique des opérations sera la suivante :
</p>
<ol>
 <li>
  On efface l’écran ;
 </li>
 <li>
  On place le curseur au bon endroit ;
 </li>
 <li>
  On affiche la moitié gauche ;
 </li>
 <li>
  On affiche la moitié droite (logiquement à la suite).
 </li>
</ol>
<p>
 Et en code, voici ce que cela donnerait.
</p>
<div class="hljs-code-div">
 <div class="hljs-line-numbers">
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
 </div>
 <pre><code class="hljs language-cpp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">drawInvader</span><span class="hljs-params">(<span class="hljs-keyword">char</span> ligne, <span class="hljs-keyword">char</span> colonne, <span class="hljs-keyword">char</span> etat)</span>
</span>{
  lcd.clear(); <span class="hljs-comment">// Efface l’écran.</span>
  lcd.setCursor(colonne, ligne);   <span class="hljs-comment">// Se place au bon pixel.</span>
  lcd.write((<span class="hljs-keyword">uint8_t</span>) (<span class="hljs-number">0</span>+etat*<span class="hljs-number">2</span>)); <span class="hljs-comment">// Affiche la moitié gauche.</span>
  lcd.write((<span class="hljs-keyword">uint8_t</span>) (<span class="hljs-number">1</span>+etat*<span class="hljs-number">2</span>)); <span class="hljs-comment">// Affiche la moitié droite.</span>
}
</code></pre>
</div>
<p>
 <code>
  etat
 </code>
 sera la variable qui dira si les bras sont levés ou baissés. Comme les caractères sont enregistrés dans l’ordre (bras baissés gauche, bras baissés droite, bras levés gauche, bras levés droite), il suffit de faire une multiplication par 2 pour se situer au bon endroit. On ajoute 0 ou 1 si on envoie la moitié gauche ou droite (gauche : 0, droite : 1).
</p>
<p>
 Et voila ! Vous avez maintenant tout le code pour faire une jolie animation
 <em>
  Space Invaders
 </em>
 sur votre écran LCD et donner un petit côté années 80 à votre Arduino !
 <img alt=":D" class="smiley" src="./static/smileys/heureux.png"/>
</p>
<div class="custom-block custom-block-spoiler">
 <div class="custom-block-body">
  <div class="hljs-code-div">
   <div class="hljs-line-numbers">
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
    <span>
    </span>
   </div>
   <pre><code class="hljs language-cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;LiquidCrystal.h&gt;</span></span>

<span class="hljs-function">LiquidCrystal <span class="hljs-title">lcd</span><span class="hljs-params">(<span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>)</span></span>;

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{

  <span class="hljs-comment">// Partie gauche de l'invader bras baissés.</span>
  byte invader_low_left[<span class="hljs-number">8</span>] = {
    B00100,
    B00010,
    B00111,
    B01101,
    B11111,
    B10111,
    B10100,
    B00010
  };
  <span class="hljs-comment">// Partie droite de l'invader bras baissés.</span>
  byte invader_low_right[<span class="hljs-number">8</span>] = {
    B00100,
    B01000,
    B11100,
    B10110,
    B11111,
    B11101,
    B00101,
    B01000
  };
  <span class="hljs-comment">// Partie gauche de l'invader bras levés.</span>
  byte invader_high_left[<span class="hljs-number">8</span>] = {
    B00100,
    B10010,
    B10111,
    B11101,
    B11111,
    B01111,
    B00100,
    B01000
  };
  <span class="hljs-comment">// Partie droite de l'invader bras levés.</span>
  byte invader_high_right[<span class="hljs-number">8</span>] = {
    B00100,
    B01001,
    B11101,
    B10111,
    B11111,
    B11110,
    B00100,
    B00010
  };

  lcd.createChar(<span class="hljs-number">0</span>, invader_low_left);   <span class="hljs-comment">// Apprend le caractère à l’écran LCD.</span>
  lcd.createChar(<span class="hljs-number">1</span>, invader_low_right);  <span class="hljs-comment">// Apprend le caractère à l’écran LCD.</span>
  lcd.createChar(<span class="hljs-number">2</span>, invader_high_left);  <span class="hljs-comment">// Apprend le caractère à l’écran LCD.</span>
  lcd.createChar(<span class="hljs-number">3</span>, invader_high_right); <span class="hljs-comment">// Apprend le caractère à l’écran LCD.</span>

  lcd.begin(<span class="hljs-number">16</span>, <span class="hljs-number">2</span>);

  randomSeed(analogRead(<span class="hljs-number">0</span>)); <span class="hljs-comment">// Initialise l’aléatoire avec une lecture analogique.</span>

  lcd.write(<span class="hljs-string">"Hello World!"</span>);
  delay(<span class="hljs-number">2000</span>);
  lcd.clear();
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-keyword">char</span> ligne = random(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>);
  <span class="hljs-keyword">char</span> colonne = random(<span class="hljs-number">0</span>, <span class="hljs-number">15</span>);
  drawInvader(ligne, colonne, <span class="hljs-number">0</span>);
  delay(<span class="hljs-number">800</span>);
  drawInvader(ligne, colonne, <span class="hljs-number">1</span>);
  delay(<span class="hljs-number">800</span>);
  lcd.clear();
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">drawInvader</span><span class="hljs-params">(<span class="hljs-keyword">char</span> ligne, <span class="hljs-keyword">char</span> colonne, <span class="hljs-keyword">char</span> etat)</span>
</span>{
  lcd.clear(); <span class="hljs-comment">// Efface l’écran.</span>
  lcd.setCursor(colonne, ligne);   <span class="hljs-comment">// Se place au bon pixel.</span>
  lcd.write((<span class="hljs-keyword">uint8_t</span>) (<span class="hljs-number">0</span>+etat*<span class="hljs-number">2</span>)); <span class="hljs-comment">// Affiche la moitié gauche.</span>
  lcd.write((<span class="hljs-keyword">uint8_t</span>) (<span class="hljs-number">1</span>+etat*<span class="hljs-number">2</span>)); <span class="hljs-comment">// Affiche la moitié droite.</span>
}
</code></pre>
  </div>
 </div>
</div>
<p>
 Voici une démonstration interactive :
</p>
<div class="video-container">
 <div class="video-wrapper">
  <iframe allowfullscreen="" frameborder="0" height="800" src="https://www.tinkercad.com/embed/5iymNgseWcN" width="100%">
  </iframe>
 </div>
</div>
<p>
 Bien sûr, comme pour tout code, des améliorations pourraient être faites. Par exemple, on pourrait utiliser des constantes avec des
 <code>
  #define
 </code>
 pour éviter d’envoyer 0 ou 1 pour l’état. On écrirait ainsi
 <code>
  BAISSE
 </code>
 ou
 <code>
  LEVE
 </code>
 et ça serait déjà plus propre.
</p>
<p>
 Si vous le souhaitez, en guise d’exercice d’approfondissement, vous pouvez essayer de rajouter une étape intermédiaire où les bras du vaisseau seront à l’horizontale. Attention, il faudra peut-être revoir l’ordre d’enregistrement des caractères dans la mémoire de l’écran, donc le calcul pour les appeler.
 <img alt=";)" class="smiley" src="./static/smileys/clin.png"/>
 Amusez-vous bien et n’hésitez pas à poser des questions ou faire des remarques en commentaires.
 <img alt=":)" class="smiley" src="./static/smileys/smile.png"/>
</p>
<div class="custom-block alert alert-primary">
 <div class="custom-block-body">
  <p>
   Un gros merci à
   <a href="https://zestedesavoir.com/membres/voir/Dominus Carnufex/">
    Dominus Carnufex
   </a>
   qui, comme souvent sur mes contenus, à eu l’immense loisir de s’écorcher la rétine sur mes fautes
   <img alt=":D" class="smiley" src="./static/smileys/heureux.png"/>
   .
  </p>
 </div>
</div>
            </div>
            <!-- /.entry-content -->
            <hr>
            <div class="text-center">
                <img class="es-licence-pic" src="/static/images/CC BY.png" alt="Licence CC BY" title="Article sous licence CC BY">
            </div>
            <div class="my-3 text-center">
                <a class="btn btn-outline-dark mx-1" href="https://twitter.com/share?url=https://eskimon.fr/tp-arduino-faire-une-animation-space-invaders-sur-lcd&amp;text=TP Arduino : Faire une animation Space Invaders sur LCD - https://eskimon.fr/tp-arduino-faire-une-animation-space-invaders-sur-lcd" rel="nofollow" title="Partager cet article sur Twitter" role="button" data-toggle="tooltip" data-placement="top">
                    <i class="fab fa-twitter fa-lg"></i>
                </a>
                <a class="btn btn-outline-dark mx-1" href="https://www.facebook.com/sharer.php?u=https://eskimon.fr/tp-arduino-faire-une-animation-space-invaders-sur-lcd&amp;t=TP Arduino : Faire une animation Space Invaders sur LCD - https://eskimon.fr/tp-arduino-faire-une-animation-space-invaders-sur-lcd" rel="nofollow" title="Partager cet article sur Facebook" role="button" data-toggle="tooltip" data-placement="top">
                    <i class="fab fa-facebook-f fa-lg"></i>
                </a>
                <a class="btn btn-outline-dark mx-1" href="https://plus.google.com/share?url=https://eskimon.fr/tp-arduino-faire-une-animation-space-invaders-sur-lcd&amp;hl=fr" rel="nofollow" title="Partager cet article sur Google +" role="button" data-toggle="tooltip" data-placement="top">
                    <i class="fab fa-google-plus fa-lg"></i>
                </a>
                <!--<a class="btn btn-outline-dark mx-1" href="http://sharetodiaspora.github.io/?url=https://eskimon.fr/tp-arduino-faire-une-animation-space-invaders-sur-lcd&amp;title=TP Arduino : Faire une animation Space Invaders sur LCD - https://eskimon.fr/tp-arduino-faire-une-animation-space-invaders-sur-lcd" rel="nofollow"  title="Partager cet article sur Diaspora" role="button" data-toggle="tooltip" data-placement="top">
                    <i class="fab fa-google-plus fa-lg"></i>
                </a>-->
                <a class="btn btn-outline-dark mx-1" href="mailto:?subject=TP Arduino : Faire une animation Space Invaders sur LCD&amp;body=https://eskimon.fr/tp-arduino-faire-une-animation-space-invaders-sur-lcd"rel="nofollow" title="Partager cet article par email" role="button" data-toggle="tooltip" data-placement="top">
                    <i class="far fa-envelope fa-lg"></i>
                </a>
            </div>
            <hr>
            <div class="text-center">
                <!-- billboard horizontal fin article -->
                <ins class="adsbygoogle" style="display:inline-block;width:970px;height:250px" data-ad-client="ca-pub-2080155902357792" data-ad-slot="6471099302"></ins>
                <script>
                    (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
            </div>
            <!-- disqus start -->
            <div id="disqus_thread"></div>
            <script>
                var disqus_config = function () {
                    this.page.url = 'https://eskimon.fr/tp-arduino-faire-une-animation-space-invaders-sur-lcd';
                    this.page.identifier = 'tp-arduino-faire-une-animation-space-invaders-sur-lcd';
                    this.page.title = 'TP Arduino : Faire une animation Space Invaders sur LCD';
                };
                (function () { // DON'T EDIT BELOW THIS LINE
                    var d = document, s = d.createElement('script');
                    s.src = 'https://eskimon-fr.disqus.com/embed.js';
                    s.setAttribute('data-timestamp', +new Date());
                    (d.head || d.body).appendChild(s);
                })();
            </script>
            <noscript>Please enable JavaScript to view the
                <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
            </noscript>
            <!-- disqus end -->
        </article>
    </div>
    <div class="d-none d-xl-block col-xl-1 offset-xl-1 px-0">
        <div class="d-flex flex-column justify-content-around align-items-end h-100" id="es-right-ad-block">
            <!-- Pub ajouté auto -->
        </div>
    </div>
</div>
    </div>
<footer class="container-fluid bg-dark small text-white px-3">
<div class="row">
    <div class="col align-self-center">
        © Eskimon -
        Blog propulsé par <a class="bold text-white" href="https://blog.getpelican.com/" rel="nofollow">Pelican</a> -
        Thème fait maison
    </div>
    <div class="col align-self-end text-right">
        <a class="btn btn-lg text-light" href="https://github.com/Eskimon" rel="nofollow" title="Mon profil Github">
            <i class="fab fa-github fa-lg"></i>
        </a>
        <a class="btn btn-lg text-light" href="https://twitter.com/Eskimon_fr" rel="nofollow" title="Me suivre sur Linkedin">
            <i class="fab fa-twitter fa-lg"></i>
        </a>
    </div>
  </div>
</footer>
    <!-- For formula -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!-- Font awesome -->
    <script src="https://use.fontawesome.com/releases/v5.0.0/js/all.js"></script>
    <!-- JQuery first -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <!-- Popper.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <!-- Bootstrap -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <!-- For tooltips -->
    <script>$(function () {  $('[data-toggle="tooltip"]').tooltip()})</script>
    <script src="/static/js/my-scripts.js"></script>
<script>
function create_side_summary() {
    // Duplicate summary
    var main_summary = $('#sommaire').next();
    if(main_summary.length === 0)
        return
    var side_summary = main_summary.clone();
    side_summary.addClass('pl-0');
    var all_p = side_summary.find('p');
    all_p.contents().unwrap();
    var all_li = side_summary.find('li');
    all_li.addClass('pl-1');

    // scrollspy - in
    side_summary.attr('id', 'es-side-summary-mainlist');
    //side_summary.addClass('nav');
    //all_li.addClass('nav-item');
    var all_a = side_summary.find('a');
    all_a.addClass('nav-link');
    var all_ul = side_summary.find('ul');
    all_ul.addClass('pl-1');
    $('body').scrollspy({ target: '#es-side-summary-mainlist' });
    // scrollspy - out

    var summary_title = document.createElement("h4");
    summary_title.className = 'navbar-brand';
    summary_title.innerHTML = 'Sommaire';
    $(summary_title).prependTo('#es-side-summary-content');
    side_summary.appendTo('#es-side-summary-content');
    main_summary.addClass('es-subul-collapse');
}

function generate_spoilers() {
    all_secret = $('.custom-block-spoiler');
    all_secret.each(function( index ) {
        let content = $(this).html();
        $(this).html('');
        $(this).addClass('card');
        var headerText = document.createElement("button");
        var cardHeader = document.createElement("div");
        var cardBodyWrapper = document.createElement("div");
        var cardBody = document.createElement("div");
        $(headerText).text('Contenu masqué, cliquez pour afficher');
        $(headerText).addClass('btn btn-link btn-sm');
        $(headerText).attr('data-toggle', 'collapse');
        $(headerText).attr('data-target', '#collapse-' + index);
        $(headerText).attr('aria-controls', 'collapse-' + index);
        $(headerText).attr('aria-expanded', 'false');
        $(cardHeader).append(headerText);
        $(cardHeader).addClass('card-header');
        $(cardHeader).attr('id', 'spoiler-' + index);
        $(cardBody).html(content);
        $(cardBody).addClass('card-body');
        $(cardBodyWrapper).append(cardBody);
        $(cardBodyWrapper).addClass('collapse hide');
        $(cardBodyWrapper).attr('id', 'collapse-' + index)
        $(cardBodyWrapper).attr('aria-labelledby', 'spoiler-' + index)
        $(this).prepend(cardHeader);
        $(this).append(cardBodyWrapper);
    });

    $('.collapse').collapse({toggle: false});
}

function load_extra_ads() {
    return;
    // Load right side blocks
    var sidebar = $('#es-right-ad-block');
    var n_height = Math.floor(sidebar.height() / 2000);
    for (i = 0; i < n_height; i++) {
        var frag = document.createDocumentFragment();
        var newAdBlock = document.createElement("div");
        var block1 = document.createElement("ins");
        var block2 = document.createElement("script");

        block1.innerHTML = '<ins class="adsbygoogle" ' +
            'style="display:inline-block;width:120px;height:600px" ' +
            'data-ad-client="ca-pub-2080155902357792" ' +
            'data-ad-slot="4023722026"></ins>';
        block2.innerHTML = '(adsbygoogle = window.adsbygoogle || []).push({});';

        $(newAdBlock).append(block1);
        $(newAdBlock).append(block2);
        $(frag).append(newAdBlock);

        $(sidebar).append(frag);
    }

    // Load in feed blocks (above every h3)
    var frag = document.createDocumentFragment();
    var newAdBlock = document.createElement("div");
    var block1 = document.createElement("ins");
    var block2 = document.createElement("script");
    block1.innerHTML = '<ins class="adsbygoogle"' +
    'style = "display:inline-block;width:970px;height:90px"' +
    'data - ad - client="ca-pub-2080155902357792"' +
    'data - ad - slot="7100712740" ></ins >'
    block2.innerHTML = '(adsbygoogle = window.adsbygoogle || []).push({});';
    $(newAdBlock).append(block1);
    $(newAdBlock).append(block2);
    newAdBlock.className = 'my-3 text-center';
    $(frag).append(newAdBlock);
    var titles = $('.entry-content h3').slice(1);
    $(frag).insertBefore(titles);
}

$(document).ready(function () {

    create_side_summary();
    generate_spoilers();
    load_extra_ads();

    // when opening the sidebar
    $('#sidebarCollapse').on('click', function () {
        // open sidebar
        $('#es-side-summary').removeClass('d-none');
        $('#es-content').addClass('d-none');
        $('#sidebarCollapse').removeClass('sticky-top');
    });

    // if dismiss or overlay was clicked
    $('#es-side-summary').on('click', function () {
      // hide the sidebar
      $('#es-side-summary').addClass('d-none');
      $('#es-content').removeClass('d-none');
      $('#sidebarCollapse').addClass('sticky-top');
    });
});
</script>

<script id="dsq-count-scr" src="//eskimon-fr.disqus.com/count.js" async></script>
</body>

</html>
