<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Les entrées analogiques de l’Arduino &bull; Le blog d'Eskimon</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="/static/css/hljs-monokai.css" />
    <link rel="stylesheet" href="/static/css/style.css" />
    <!-- Google font -->
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/static/images/favicon/favicon.ico">
    <link rel="apple-touch-icon" sizes="57x57" href="/static/images/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/static/images/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/static/images/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/static/images/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/static/images/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/static/images/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/static/images/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/static/images/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/images/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/static/images/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/static/images/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/images/favicon/favicon-16x16.png">
    <link rel="manifest" href="/static/images/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/static/images/favicon/ms-icon-144x144.png">


    <meta name="description" content="Cette première partie se propose de vous faire découvrir les entrées analogiques des microcontrôleurs puis celle de l'Arduino en particulier." />

    <meta name="tags" content="arduino" />
    <meta name="tags" content="tuto" />

  <meta property="og:site_name" content="Le blog d'Eskimon">
  <meta property="og:title" content="Les entrées analogiques de l’Arduino">
  <meta property="og:url" content="https://eskimon.fr/tuto-arduino-401-les-entrées-analogiques-de-larduino">
  <meta property="og:language" content="fr_FR">
  <meta property="og:type" content="website">

  <meta property="twitter:domain" content="https://eskimon.fr/">
  <meta property="twitter:card" content="summary">
  <meta property="twitter:url" content="https://eskimon.fr/tuto-arduino-401-les-entrées-analogiques-de-larduino">
  <meta property="twitter:title" content="Les entrées analogiques de l’Arduino">
<meta property="twitter:description" content="Cette première partie se propose de vous faire découvrir les entrées analogiques des microcontrôleurs puis celle de l'Arduino en particulier.">  <meta property="twitter:site" content="SITENAME">
  <meta property="twitter:creator" content="@eskimon_fr">

  <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
  <meta name="DC.publisher" lang="fr" content="Le blog d'Eskimon" />
  <meta name="DC.creator" content="Eskimon" />
  <meta name="DC.type" content="text" />
  <meta name="DC.title" content="Les entrées analogiques de l’Arduino" />
  <meta name="DC.abstract" content="Les entrées analogiques de l’Arduino – Cette première partie se propose de vous faire découvrir les entrées analogiques des microcontrôleurs puis celle de l'Arduino en particulier." />
  <meta name="DC.subject" lang="fr" content="Arduino/Les grandeurs analogiques – arduino; tuto" />
<meta name="DC.description" lang="fr" content="Cette première partie se propose de vous faire découvrir les entrées analogiques des microcontrôleurs puis celle de l'Arduino en particulier." />  <meta name="DC.date" content="2013-12-11T18:14:00+01:00" />
  <meta name="DC.format" content="text/html" />
  <meta name="DC.language" content="fr" />
  <meta name="DC.rights" content="CC BY-NC-SA" />


  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "ca-pub-2080155902357792",
      enable_page_level_ads: true
    });
    </script>
</head>

<body>
<nav class="navbar navbar-expand-lg navbar-light bg-secondary-l40 py-0">
    <a class="navbar-brand" href="/">
        <img src="/static/images/logo.png" width="20" height="20" alt="">
        Le blog d'Eskimon
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
        <div class="navbar-nav ml-auto">
                <a class="nav-item nav-link active" href="/category/arduino">Arduino</a>
                <a class="nav-item nav-link " href="/category/articles">Articles</a>
                <a class="nav-item nav-link " href="/category/tuto">Tuto</a>
            <!--<a class="nav-item nav-link active" href="#">Home <span class="sr-only">(current)</span></a>-->
        </div>
    </div>
</nav>
<!--
    <div class="vh-100 m-0 p-0 ">
        <div class="wmax-1024 mx-auto my-0 py-0 text-justify">
            <div class="text-center">
                <a href="https://eskimon.fr" class="text-dark no-decoration" >
                    <h1 class="logo-font text-center my-5 display-2 d-md-block d-none">Le blog d'Eskimon</h1>
                    <h2 class="logo-font text-center d-md-none my-5">Le blog d'Eskimon</h2>
                </a>
            </div>
        </div>
    </div>
-->
    <div class="container-fluid es-verticalfill">
<div class="row">
    <!-- Sidebar -->
    <div class="col-md-2 col-lg-2 d-none d-md-block sticky-top es-scrollable pt-3 px-1 bg-light es-ul-bordered" id="es-side-summary">
        <nav class="px-2" id="es-side-summary-content">
            <!-- Summary will come here -->
        </nav>
        <!-- Add here self-promo for ebook -->
        <!-- Add here adsense block -->
        <hr>
        <div id="es-side-summary-bot-annonce">
            <!-- Responsive sidebar -->
            <ins class="adsbygoogle"
            style="display:block"
            data-ad-client="ca-pub-2080155902357792"
            data-ad-slot="3497585408"
            data-ad-format="auto"></ins>
            <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>
    </div>
    <!-- Main content -->
    <div class="col-md-9 col-lg-7 offset-lg-1 d-block pt-3">
        <article>
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb bg-white">
                    <li class="breadcrumb-item"><a href="/category/arduino">Arduino</a></li>
                        <li class="breadcrumb-item"><a href="/subcategory/arduino/les-grandeurs-analogiques.html">Les grandeurs analogiques</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Les entrées analogiques de l’Arduino</li>
                </ol>
            </nav>
            <header class="es-post-info">
                <h1 class="text-center my-4">Les entrées analogiques de l’Arduino</h1>
            </header>
            <footer class="es-post-info pb-2 mb-2">
                <div class="row align-items-center">
                    <div class="col-auto mr-auto">
                        <span class="vcard author">
                            <a class="" href="/author/eskimon" rel="author">Eskimon</a>
                        </span>
                        ,
                        <time class="" datetime="2013-12-11T18:14:00+01:00" pubdate>
                            le mer. 11 décembre 2013
                        </time>
                    </div>
                    <div class="col-auto">
                        <a class="btn btn-outline-primary btn-sm" href="/tag/arduino" rel="tag">arduino</a>
                        <a class="btn btn-outline-primary btn-sm" href="/tag/tuto" rel="tag">tuto</a>
                    </div>
                </div>
            </footer>

            <!-- /.post-info -->
            <div class="entry-content">
                <p>
 Ce premier chapitre va vous faire découvrir comment gérer des tensions analogiques avec votre carte Arduino. Vous allez d’abord prendre en main le fonctionnement d’un certain composant essentiel à la mise en forme d’un signal analogique, puis je vous expliquerai comment vous en servir avec votre Arduino. Rassurez-vous, il n’y a pas besoin de matériel supplémentaire pour ce chapitre !
 <img alt=";)" class="smiley" src="./static/smileys/clin.png"/>
</p>
<h3 id="sommaire">
 <a aria-hidden="true" href="#sommaire">
  <span class="es-autolink-heading">
  </span>
 </a>
 Sommaire
</h3>
<ul>
 <li>
  <p>
   <a href="#un-signal-analogique-petits-rappels">
    Un signal analogique : petits rappels
   </a>
  </p>
  <ul>
   <li>
    <p>
     <a href="#signal-périodique">
      Signal périodique
     </a>
    </p>
    <ul>
     <li>
      <a href="#notre-objectif">
       Notre objectif
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li>
  <p>
   <a href="#les-convertisseurs-analogiques--numérique-ou-can">
    Les convertisseurs analogiques –&gt; numérique ou CAN
   </a>
  </p>
  <ul>
   <li>
    <a href="#la-diversité">
     La diversité
    </a>
   </li>
  </ul>
 </li>
 <li>
  <p>
   <a href="#arduino-dispose-dun-can">
    Arduino dispose d’un CAN
   </a>
  </p>
  <ul>
   <li>
    <ul>
     <li>
      <a href="#principe-de-dichotomie">
       Principe de dichotomie
      </a>
     </li>
    </ul>
   </li>
   <li>
    <p>
     <a href="#le-can-à-approximations-successives">
      Le CAN à approximations successives
     </a>
    </p>
    <ul>
     <li>
      <a href="#le-comparateur">
       Le comparateur
      </a>
     </li>
    </ul>
   </li>
   <li>
    <a href="#le-démultiplexeur">
     Le démultiplexeur
    </a>
   </li>
   <li>
    <a href="#la-mémoire">
     La mémoire
    </a>
   </li>
   <li>
    <a href="#le-convertisseur-numérique-analogique">
     Le convertisseur numérique analogique
    </a>
   </li>
   <li>
    <p>
     <a href="#fonctionnement-global">
      Fonctionnement global
     </a>
    </p>
    <ul>
     <li>
      <a href="#pas-de-calcul-du-can">
       Pas de calcul du CAN
      </a>
     </li>
     <li>
      <a href="#les-inconvénients">
       Les inconvénients
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li>
  <p>
   <a href="#lecture-analogique-on-y-vient">
    Lecture analogique, on y vient…
   </a>
  </p>
  <ul>
   <li>
    <p>
     <a href="#lire-la-tension-sur-une-broche-analogique">
      Lire la tension sur une broche analogique
     </a>
    </p>
    <ul>
     <li>
      <a href="#analogreadpin">
       analogRead(pin)
      </a>
     </li>
    </ul>
   </li>
   <li>
    <p>
     <a href="#convertir-la-valeur-lue">
      Convertir la valeur lue
     </a>
    </p>
    <ul>
     <li>
      <a href="#conversion">
       Conversion
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li>
  <p>
   <a href="#exemple-dutilisation">
    Exemple d’utilisation
   </a>
  </p>
  <ul>
   <li>
    <p>
     <a href="#le-potentiomètre">
      Le potentiomètre
     </a>
    </p>
    <ul>
     <li>
      <a href="#cas-n°1-le-pont-diviseur-de-tension">
       Cas n°1 : le pont diviseur de tension
      </a>
     </li>
     <li>
      <a href="#cas-n°2-la-résistance-variable">
       Cas n°2 : la résistance variable
      </a>
     </li>
    </ul>
   </li>
   <li>
    <a href="#utilisation-avec-arduino">
     Utilisation avec Arduino
    </a>
   </li>
  </ul>
 </li>
 <li>
  <p>
   <a href="#une-meilleure-précision">
    Une meilleure précision ?
   </a>
  </p>
  <ul>
   <li>
    <p>
     <a href="#solution-1-modifier-la-plage-dentrée-du-convertisseur">
      Solution 1 : modifier la plage d’entrée du convertisseur
     </a>
    </p>
    <ul>
     <li>
      <a href="#tension-de-référence-interne">
       Tension de référence interne
      </a>
     </li>
     <li>
      <a href="#tension-de-référence-externe">
       Tension de référence externe
      </a>
     </li>
    </ul>
   </li>
   <li>
    <a href="#solution-2-utiliser-un-pont-diviseur-de-tension">
     Solution 2 : utiliser un pont diviseur de tension
    </a>
   </li>
   <li>
    <a href="#solution-3-utiliser-un-can-externe">
     Solution 3 : utiliser un CAN externe
    </a>
   </li>
   <li>
    <a href="#solution-4-modifier-la-fréquence-de-fonctionnement-de-ladc">
     Solution 4 : Modifier la fréquence de fonctionnement de l’ADC
    </a>
   </li>
  </ul>
 </li>
</ul>
<h3 id="un-signal-analogique-petits-rappels">
 <a aria-hidden="true" href="#un-signal-analogique-petits-rappels">
  <span class="es-autolink-heading">
  </span>
 </a>
 Un signal analogique : petits rappels
</h3>
<p>
 Faisons un petit rappel sur ce que sont les signaux analogiques. D’abord, jusqu’à présent nous n’avons fait qu’utiliser des grandeurs numériques binaires. Autrement dit, nous n’avons utilisé que des états logiques HAUT et BAS. Ces deux niveaux correspondent respectivement aux tensions de 5V et 0V. Cependant, une valeur analogique ne se contentera pas d’être exprimée par 0 ou 1. Elle peut prendre
 <em>
  une infinité de valeurs
 </em>
 dans un intervalle donné. Dans notre cas, par exemple, la grandeur analogique pourra varier aisément de 0 à 5V en passant par 1.45V, 2V, 4.99V, etc. Voici un exemple de signal analogique, le très connu signal sinusoïdal :
</p>
<p>
 <img alt="Un signal analogique périodique" src="./images/uploaded/tuto-arduino-401-les-entrées-analogiques-de-larduino/un-signal-analogique-periodique.jpg"/>
</p>
<div class="custom-block alert alert-primary">
 <div class="custom-block-body">
  <p>
   On retiendra que l’on ne s’occupe que de la tension et non du courant, en fonction du temps.
  </p>
 </div>
</div>
<p>
 Si on essaye de mettre ce signal (ce que je vous déconseille de faire) sur une entrée numérique de l’Arduino et qu’on lit les valeurs avec digitalRead(), on ne lira que 0 ou 1. Les broches numériques de l’Arduino étant incapable de lire les valeurs d’un signal analogique.
</p>
<h4 id="signal-périodique">
 <a aria-hidden="true" href="#signal-périodique">
  <span class="es-autolink-heading">
  </span>
 </a>
 Signal périodique
</h4>
<p>
 Dans la catégorie des signaux analogiques et même numériques (dans le cas d’horloge de signal pour le cadencement des micro-contrôleurs par exemple) on a les
 <strong>
  signaux dits périodiques
 </strong>
 . La période d’un signal est en fait un motif de ce signal qui se répète et qui donne ainsi la forme du signal. Prenons l’exemple d’un signal binaire qui prend un niveau logique 1 puis un 0, puis un 1, puis un 0, …
</p>
<p>
 <img alt="Représentation d'une période" src="./images/uploaded/tuto-arduino-401-les-entrées-analogiques-de-larduino/representation-dune-periode.png"/>
</p>
<p>
 La période de ce signal est le motif qui se répète tant que le signal existe. Ici, c’est le niveau logique 1 et 0 qui forme le motif. Mais cela aurait pu être 1 1 et 0, ou bien 0 1 1, voir 0 0 0 1 1 1, les possibilités sont infinies ! Pour un signal analogique, il en va de même. Reprenons le signal de tout à l’heure :
</p>
<p>
 <img alt="Période d'un signal analogique" src="./images/uploaded/tuto-arduino-401-les-entrées-analogiques-de-larduino/periode-dun-signal-analogique.jpg"/>
</p>
<p>
 Ici le motif qui se répète est "la bosse de chameau" ou plus scientifiquement parlant : une période d’un signal sinusoïdal.
 <img alt="^^" class="smiley" src="./static/smileys/hihi.png"/>
 Pour terminer, la période désigne aussi le temps que met un motif à se répéter. Si j’ai une période de 1ms, cela veut dire que le motif met 1ms pour se dessiner complètement avant de commencer le suivant. Et en sachant le nombre de fois que se répète le motif en 1 seconde, on peut calculer la fréquence du signal selon la formule suivante :
 <span class="inlineMath">
  <span class="katex">
   <span class="katex-mathml">
    <math>
     <semantics>
      <mrow>
       <mi>
        F
       </mi>
       <mo>
        =
       </mo>
       <mfrac>
        <mn>
         1
        </mn>
        <mi>
         T
        </mi>
       </mfrac>
      </mrow>
      <annotation encoding="application/x-tex">
       F = \frac 1 T
      </annotation>
     </semantics>
    </math>
   </span>
   <span aria-hidden="true" class="katex-html">
    <span class="strut" style="height:0.845108em;">
    </span>
    <span class="strut bottom" style="height:1.190108em;vertical-align:-0.345em;">
    </span>
    <span class="base textstyle uncramped">
     <span class="mord mathit" style="margin-right:0.13889em;">
      F
     </span>
     <span class="mrel">
      =
     </span>
     <span class="mord reset-textstyle textstyle uncramped">
      <span class="mopen sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter">
      </span>
      <span class="mfrac">
       <span class="vlist">
        <span style="top:0.345em;">
         <span class="fontsize-ensurer reset-size5 size5">
          <span style="font-size:0em;">
           ​
          </span>
         </span>
         <span class="reset-textstyle scriptstyle cramped mtight">
          <span class="mord mathit mtight" style="margin-right:0.13889em;">
           T
          </span>
         </span>
        </span>
        <span style="top:-0.22999999999999998em;">
         <span class="fontsize-ensurer reset-size5 size5">
          <span style="font-size:0em;">
           ​
          </span>
         </span>
         <span class="reset-textstyle textstyle uncramped frac-line">
         </span>
        </span>
        <span style="top:-0.394em;">
         <span class="fontsize-ensurer reset-size5 size5">
          <span style="font-size:0em;">
           ​
          </span>
         </span>
         <span class="reset-textstyle scriptstyle uncramped mtight">
          <span class="mord mathrm mtight">
           1
          </span>
         </span>
        </span>
        <span class="baseline-fix">
         <span class="fontsize-ensurer reset-size5 size5">
          <span style="font-size:0em;">
           ​
          </span>
         </span>
         ​
        </span>
       </span>
      </span>
      <span class="mclose sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter">
      </span>
     </span>
    </span>
   </span>
  </span>
 </span>
 ; avec F la fréquence, en hertz, du signal et T la période, en seconde, du signal.
</p>
<h5 id="notre-objectif">
 <a aria-hidden="true" href="#notre-objectif">
  <span class="es-autolink-heading">
  </span>
 </a>
 Notre objectif
</h5>
<p>
 L’objectif va donc être double. Tout d’abord, nous allons devoir être capables de convertir cette valeur analogique en une valeur numérique, que l’on pourra ensuite manipuler à l’intérieur de notre programme. Par exemple, lorsque l’on mesurera une tension de 2,5V nous aurons dans notre programme une variable nommée "tension" qui prendra la valeur 250 lorsque l’on fera la conversion (ce n’est qu’un exemple). Ensuite, nous verrons avec Arduino ce que l’on peut faire avec les signaux analogiques. Je ne vous en dis pas plus…
</p>
<h3 id="les-convertisseurs-analogiques--numérique-ou-can">
 <a aria-hidden="true" href="#les-convertisseurs-analogiques--numérique-ou-can">
  <span class="es-autolink-heading">
  </span>
 </a>
 Les convertisseurs analogiques –&gt; numérique ou
 <abbr title="Convertisseur Analogique Numérique">
  CAN
 </abbr>
</h3>
<div class="custom-block alert alert-info">
 <div class="custom-block-body">
  <p>
   Qu’est-ce que c’est ?
  </p>
 </div>
</div>
<p>
 C’est un dispositif qui va convertir des grandeurs analogiques en grandeurs numériques. La valeur numérique obtenue sera proportionnelle à la valeur analogique fournie en entrée, bien évidemment. Il existe différentes façons de convertir une grandeur analogique, plus ou moins faciles à mettre en œuvre, plus ou moins précises et plus ou moins onéreuses. Pour simplifier, je ne parlerai que des tensions analogiques dans ce chapitre.
</p>
<h4 id="la-diversité">
 <a aria-hidden="true" href="#la-diversité">
  <span class="es-autolink-heading">
  </span>
 </a>
 La diversité
</h4>
<p>
 Je vais vous citer quelques types de convertisseurs, sachez cependant que nous n’en étudierons qu’un seul type.
</p>
<ul>
 <li>
  <strong>
   Convertisseur à simple rampe
  </strong>
  : ce convertisseur "fabrique" une tension qui varie proportionnellement en un cours laps de temps entre deux valeurs extrêmes. En même temps qu’il produit cette tension, il compte. Lorsque la tension d’entrée du convertisseur devient égale à la tension générée par ce dernier, alors le convertisseur arrête de compter. Et pour terminer, avec la valeur du compteur, il détermine la valeur de la grandeur d’entrée. Malgré sa bonne précision, sa conversion reste assez lente et dépend de la grandeur à mesurer. Il est, de ce fait, peu utilisé.
 </li>
 <li>
  <strong>
   Convertisseur flash
  </strong>
  : ce type de convertisseur génère lui aussi des tensions analogiques. Pour être précis, il en génère plusieurs, chacune ayant une valeur plus grande que la précédente (par exemple 2V, 2.1V, 2.2V, 2.3V, etc.) et compare la grandeur d’entrée à chacun de ces paliers de tension. Ainsi, il sait entre quelle et quelle valeur se trouve la tension mesurée. Ce n’est pas très précis comme mesure, mais il a l’avantage d’être rapide et malheureusement cher.
 </li>
 <li>
  <strong>
   Convertisseur à approximations successives
  </strong>
  : Pour terminer, c’est ce convertisseur que nous allons étudier…
 </li>
</ul>
<h3 id="arduino-dispose-dun-can">
 <a aria-hidden="true" href="#arduino-dispose-dun-can">
  <span class="es-autolink-heading">
  </span>
 </a>
 Arduino dispose d’un
 <abbr title="Convertisseur Analogique Numérique">
  CAN
 </abbr>
</h3>
<p>
 Vous vous doutez bien que si je vous parle des
 <abbr title="Convertisseur Analogique Numérique">
  CAN
 </abbr>
 , c’est qu’il y a une raison. Votre carte Arduino dispose d’un tel dispositif intégré dans son cœur : le micro-contrôleur. Ce convertisseur est un convertisseur "à approximations successives". Je vais détailler un peu plus le fonctionnement de ce convertisseur par rapport aux autres dont je n’ai fait qu’un bref aperçu de leur fonctionnement (bien que suffisant).
</p>
<div class="custom-block alert alert-primary">
 <div class="custom-block-body">
  <p>
   Ceci rentre dans le cadre de votre culture générale électronique, ce n’est pas nécessaire de lire comment fonctionne ce type de convertisseur. Mais je vous recommande vivement de le faire, car il est toujours plus agréable de comprendre comment fonctionnent les outils qu’on utilise !
   <img alt=":)" class="smiley" src="./static/smileys/smile.png"/>
  </p>
 </div>
</div>
<h5 id="principe-de-dichotomie">
 <a aria-hidden="true" href="#principe-de-dichotomie">
  <span class="es-autolink-heading">
  </span>
 </a>
 Principe de dichotomie
</h5>
<p>
 La dichotomie, ça vous parle ? Peut-être que le nom ne vous dit rien, mais il est sûr que vous en connaissez le fonctionnement. Peut-être alors connaissez-vous
 <a href="http://fr.openclassrooms.com/informatique/cours/apprenez-a-programmer-en-c/tp-plus-ou-moins-votre-premier-jeu#ss_part_1">
  le jeu "plus ou moins
 </a>
 en programmation ? Si oui alors vous allez pouvoir comprendre ce que je vais expliquer, sinon lisez le principe sur le lien que je viens de vous donner, cela vous aidera un peu. La dichotomie est donc une méthode de recherche conditionnelle qui s’applique lorsque l’on recherche une valeur comprise entre un minimum et un maximum. L’exemple du jeu "plus ou moins" est parfait pour vous expliquer le fonctionnement. Prenons deux joueurs. Le joueur 1 choisit un nombre compris entre deux valeurs extrêmes, par exemple 0 et 100. Le joueur 2 ne connait pas ce nombre et doit le trouver. La méthode la plus rapide pour que le joueur 2 puisse trouver quel est le nombre choisi par le joueur 1 est :
</p>
<div class="hljs-code-div">
 <div class="hljs-line-numbers">
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
 </div>
 <pre><code class="hljs language-mipsasm"><span class="hljs-keyword">Joueur </span><span class="hljs-number">1</span> <span class="hljs-keyword">dit </span>: <span class="hljs-string">"quel est le nombre mystère ?"</span>
&gt; <span class="hljs-number">40</span>

<span class="hljs-keyword">Joueur </span><span class="hljs-number">1</span> <span class="hljs-keyword">dit </span>: <span class="hljs-string">"Ce nombre est plus grand"</span>
&gt; <span class="hljs-number">80</span>

<span class="hljs-keyword">Joueur </span><span class="hljs-number">1</span> <span class="hljs-keyword">dit </span>: <span class="hljs-string">"Ce nombre est plus petit"</span>
&gt; <span class="hljs-number">60</span>

<span class="hljs-keyword">Joueur </span><span class="hljs-number">1</span> <span class="hljs-keyword">dit </span>: <span class="hljs-string">"Ce nombre est plus grand"</span>
&gt; <span class="hljs-number">70</span>

<span class="hljs-keyword">Joueur </span><span class="hljs-number">1</span> <span class="hljs-keyword">dit </span>: <span class="hljs-string">"Ce nombre est plus grand"</span>
&gt; <span class="hljs-number">75</span>

<span class="hljs-keyword">Joueur </span><span class="hljs-number">1</span> <span class="hljs-keyword">dit </span>: <span class="hljs-string">"Ce nombre est plus petit"</span>
&gt; <span class="hljs-number">72</span>

<span class="hljs-keyword">Bravo, </span><span class="hljs-keyword">Joueur </span><span class="hljs-number">2</span> a trouvé le nombre mystère !
</code></pre>
</div>
<p>
 Je le disais, le joueur 2, pour arriver le plus rapidement au résultat, doit choisir une méthode rapide. Cette méthode, vous l’aurez deviné, consiste à couper en deux l’espace de recherche. Au début, cet espace allait de 0 à 100, puis au deuxième essai de 40 à 100, au troisième essai de 40 à 80, etc.
</p>
<div class="custom-block alert alert-warning">
 <div class="custom-block-body">
  <p>
   Cet exemple n’est qu’à titre indicatif pour bien comprendre le concept.
  </p>
 </div>
</div>
<p>
 En conclusion, cette méthode est vraiment simple, efficace et rapide ! Peut-être l’aurez-vous observé, on est pas obligé de couper l’espace de recherche en deux parties égales.
</p>
<h4 id="le-can-à-approximations-successives">
 <a aria-hidden="true" href="#le-can-à-approximations-successives">
  <span class="es-autolink-heading">
  </span>
 </a>
 Le
 <abbr title="Convertisseur Analogique Numérique">
  CAN
 </abbr>
 à approximations successives
</h4>
<p>
 On y vient, je vais pouvoir vous expliquer comment il fonctionne. Voyez-vous le rapport avec le jeu précédent ? Pas encore ? Alors je m’explique. Prenons du concret avec une valeur de tension de 3.36V que l’on met à l’entrée d’un
 <abbr title="Convertisseur Analogique Numérique">
  CAN
 </abbr>
 à approximations successives (j’abrégerai par
 <abbr title="Convertisseur Analogique Numérique">
  CAN
 </abbr>
 dorénavant).
</p>
<p>
 <img alt="Le CAN à approximations successives" src="./images/uploaded/tuto-arduino-401-les-entrées-analogiques-de-larduino/le-can-a-approximations-successives.jpg"/>
</p>
<div class="custom-block alert alert-primary">
 <div class="custom-block-body">
  <p>
   Notez le symbole du
   <abbr title="Convertisseur Analogique Numérique">
    CAN
   </abbr>
   qui se trouve juste au-dessus de l’image. Il s’agit d’un "U" renversé et du caractère #.
  </p>
 </div>
</div>
<p>
 Cette tension analogique de 3.36V va rentrer dans le
 <abbr title="Convertisseur Analogique Numérique">
  CAN
 </abbr>
 et va ressortir sous forme numérique (avec des 0 et 1). Mais que se passe-t-il à l’intérieur pour arriver à un tel résultat ? Pour que vous puissiez comprendre correctement comment fonctionne ce type de
 <abbr title="Convertisseur Analogique Numérique">
  CAN
 </abbr>
 , je vais être obligé de vous apprendre plusieurs choses avant.
</p>
<h5 id="le-comparateur">
 <a aria-hidden="true" href="#le-comparateur">
  <span class="es-autolink-heading">
  </span>
 </a>
 Le comparateur
</h5>
<p>
 Commençons par le
 <strong>
  comparateur
 </strong>
 . Comme son nom le laisse deviner, c’est quelque chose qui compare. Ce quelque chose est un composant électronique. Je ne rentrerai absolument pas dans le détail, je vais simplement vous montrer comment il fonctionne.
</p>
<div class="custom-block alert alert-info">
 <div class="custom-block-body">
  <p>
   Comparer, oui, mais quoi ?
  </p>
 </div>
</div>
<p>
 Des tensions !
 <img alt=":D" class="smiley" src="./static/smileys/heureux.png"/>
 Regardez son symbole, je vous explique ensuite…
</p>
<p>
 <img alt="Le comparateur" src="./images/uploaded/tuto-arduino-401-les-entrées-analogiques-de-larduino/le-comparateur.jpg"/>
</p>
<p>
 Vous observez qu’il dispose de deux entrées
 <span class="inlineMath">
  <span class="katex">
   <span class="katex-mathml">
    <math>
     <semantics>
      <mrow>
       <msub>
        <mi>
         E
        </mi>
        <mn>
         1
        </mn>
       </msub>
      </mrow>
      <annotation encoding="application/x-tex">
       E_1
      </annotation>
     </semantics>
    </math>
   </span>
   <span aria-hidden="true" class="katex-html">
    <span class="strut" style="height:0.68333em;">
    </span>
    <span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;">
    </span>
    <span class="base textstyle uncramped">
     <span class="mord">
      <span class="mord mathit" style="margin-right:0.05764em;">
       E
      </span>
      <span class="msupsub">
       <span class="vlist">
        <span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;">
         <span class="fontsize-ensurer reset-size5 size5">
          <span style="font-size:0em;">
           ​
          </span>
         </span>
         <span class="reset-textstyle scriptstyle cramped mtight">
          <span class="mord mathrm mtight">
           1
          </span>
         </span>
        </span>
        <span class="baseline-fix">
         <span class="fontsize-ensurer reset-size5 size5">
          <span style="font-size:0em;">
           ​
          </span>
         </span>
         ​
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
  </span>
 </span>
 et
 <span class="inlineMath">
  <span class="katex">
   <span class="katex-mathml">
    <math>
     <semantics>
      <mrow>
       <msub>
        <mi>
         E
        </mi>
        <mn>
         2
        </mn>
       </msub>
      </mrow>
      <annotation encoding="application/x-tex">
       E_2
      </annotation>
     </semantics>
    </math>
   </span>
   <span aria-hidden="true" class="katex-html">
    <span class="strut" style="height:0.68333em;">
    </span>
    <span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;">
    </span>
    <span class="base textstyle uncramped">
     <span class="mord">
      <span class="mord mathit" style="margin-right:0.05764em;">
       E
      </span>
      <span class="msupsub">
       <span class="vlist">
        <span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;">
         <span class="fontsize-ensurer reset-size5 size5">
          <span style="font-size:0em;">
           ​
          </span>
         </span>
         <span class="reset-textstyle scriptstyle cramped mtight">
          <span class="mord mathrm mtight">
           2
          </span>
         </span>
        </span>
        <span class="baseline-fix">
         <span class="fontsize-ensurer reset-size5 size5">
          <span style="font-size:0em;">
           ​
          </span>
         </span>
         ​
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
  </span>
 </span>
 et d’une sortie
 <span class="inlineMath">
  <span class="katex">
   <span class="katex-mathml">
    <math>
     <semantics>
      <mrow>
       <mi>
        S
       </mi>
      </mrow>
      <annotation encoding="application/x-tex">
       S
      </annotation>
     </semantics>
    </math>
   </span>
   <span aria-hidden="true" class="katex-html">
    <span class="strut" style="height:0.68333em;">
    </span>
    <span class="strut bottom" style="height:0.68333em;vertical-align:0em;">
    </span>
    <span class="base textstyle uncramped">
     <span class="mord mathit" style="margin-right:0.05764em;">
      S
     </span>
    </span>
   </span>
  </span>
 </span>
 . Le principe est simple :
</p>
<ul>
 <li>
  Lorsque la tension
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <msub>
         <mi>
          E
         </mi>
         <mn>
          1
         </mn>
        </msub>
        <mo>
         &gt;
        </mo>
        <msub>
         <mi>
          E
         </mi>
         <mn>
          2
         </mn>
        </msub>
       </mrow>
       <annotation encoding="application/x-tex">
        E_1  \gt E_2
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.05764em;">
        E
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord mathrm mtight">
            1
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
      <span class="mrel">
       &gt;
      </span>
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.05764em;">
        E
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord mathrm mtight">
            2
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
  </span>
  alors
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <mi>
         S
        </mi>
        <mo>
         =
        </mo>
        <mo>
         +
        </mo>
        <msub>
         <mi>
          V
         </mi>
         <mrow>
          <mi>
           c
          </mi>
          <mi>
           c
          </mi>
         </mrow>
        </msub>
       </mrow>
       <annotation encoding="application/x-tex">
        S = +V_{cc}
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord mathit" style="margin-right:0.05764em;">
       S
      </span>
      <span class="mrel">
       =
      </span>
      <span class="mord">
       +
      </span>
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.22222em;">
        V
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.22222em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord scriptstyle cramped mtight">
            <span class="mord mathit mtight">
             c
            </span>
            <span class="mord mathit mtight">
             c
            </span>
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
  </span>
  (
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <mo>
         +
        </mo>
        <msub>
         <mi>
          V
         </mi>
         <mrow>
          <mi>
           c
          </mi>
          <mi>
           c
          </mi>
         </mrow>
        </msub>
       </mrow>
       <annotation encoding="application/x-tex">
        +V_{cc}
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord">
       +
      </span>
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.22222em;">
        V
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.22222em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord scriptstyle cramped mtight">
            <span class="mord mathit mtight">
             c
            </span>
            <span class="mord mathit mtight">
             c
            </span>
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
  </span>
  étant la tension d’alimentation positive du comparateur)
 </li>
 <li>
  Lorsque la tension
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <msub>
         <mi>
          E
         </mi>
         <mn>
          1
         </mn>
        </msub>
        <mo>
         &lt;
        </mo>
        <msub>
         <mi>
          E
         </mi>
         <mn>
          2
         </mn>
        </msub>
       </mrow>
       <annotation encoding="application/x-tex">
        E_1  \lt E_2
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.05764em;">
        E
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord mathrm mtight">
            1
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
      <span class="mrel">
       &lt;
      </span>
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.05764em;">
        E
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord mathrm mtight">
            2
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
  </span>
  alors
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <mi>
         S
        </mi>
        <mo>
         =
        </mo>
        <mo>
         −
        </mo>
        <msub>
         <mi>
          V
         </mi>
         <mrow>
          <mi>
           c
          </mi>
          <mi>
           c
          </mi>
         </mrow>
        </msub>
       </mrow>
       <annotation encoding="application/x-tex">
        S = -V_{cc}
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord mathit" style="margin-right:0.05764em;">
       S
      </span>
      <span class="mrel">
       =
      </span>
      <span class="mord">
       −
      </span>
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.22222em;">
        V
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.22222em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord scriptstyle cramped mtight">
            <span class="mord mathit mtight">
             c
            </span>
            <span class="mord mathit mtight">
             c
            </span>
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
  </span>
  (
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <mo>
         −
        </mo>
        <msub>
         <mi>
          V
         </mi>
         <mrow>
          <mi>
           c
          </mi>
          <mi>
           c
          </mi>
         </mrow>
        </msub>
       </mrow>
       <annotation encoding="application/x-tex">
        -V_{cc}
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord">
       −
      </span>
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.22222em;">
        V
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.22222em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord scriptstyle cramped mtight">
            <span class="mord mathit mtight">
             c
            </span>
            <span class="mord mathit mtight">
             c
            </span>
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
  </span>
  étant la tension d’alimentation négative, ou la masse, du comparateur)
 </li>
 <li>
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <msub>
         <mi>
          E
         </mi>
         <mn>
          1
         </mn>
        </msub>
        <mo>
         =
        </mo>
        <msub>
         <mi>
          E
         </mi>
         <mn>
          2
         </mn>
        </msub>
       </mrow>
       <annotation encoding="application/x-tex">
        E_1 = E_2
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.05764em;">
        E
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord mathrm mtight">
            1
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
      <span class="mrel">
       =
      </span>
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.05764em;">
        E
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord mathrm mtight">
            2
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
  </span>
  est une condition quasiment impossible, si tel est le cas (si on relie
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <msub>
         <mi>
          E
         </mi>
         <mn>
          1
         </mn>
        </msub>
       </mrow>
       <annotation encoding="application/x-tex">
        E_1
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.05764em;">
        E
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord mathrm mtight">
            1
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
  </span>
  et
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <msub>
         <mi>
          E
         </mi>
         <mn>
          2
         </mn>
        </msub>
       </mrow>
       <annotation encoding="application/x-tex">
        E_2
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.05764em;">
        E
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord mathrm mtight">
            2
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
  </span>
  ) le comparateur donnera un résultat faux
 </li>
</ul>
<p>
 Parlons un peu de la tension d’alimentation du comparateur. Le meilleur des cas est de l’alimenter entre 0V et +5V. Comme cela, sa sortie sera soit égale à 0V, soit égale à +5V. Ainsi, on rentre dans le domaine des tensions acceptées par les micro-contrôleurs et de plus il verra soit un état logique BAS, soit un état logique HAUT. On peut réécrire les conditions précédemment énoncées comme ceci :
</p>
<ul>
 <li>
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <msub>
         <mi>
          E
         </mi>
         <mn>
          1
         </mn>
        </msub>
        <mo>
         &gt;
        </mo>
        <msub>
         <mi>
          E
         </mi>
         <mn>
          2
         </mn>
        </msub>
       </mrow>
       <annotation encoding="application/x-tex">
        E_1  \gt E_2
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.05764em;">
        E
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord mathrm mtight">
            1
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
      <span class="mrel">
       &gt;
      </span>
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.05764em;">
        E
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord mathrm mtight">
            2
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
  </span>
  alors
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <mi>
         S
        </mi>
        <mo>
         =
        </mo>
        <mn>
         1
        </mn>
       </mrow>
       <annotation encoding="application/x-tex">
        S = 1
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.68333em;vertical-align:0em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord mathit" style="margin-right:0.05764em;">
       S
      </span>
      <span class="mrel">
       =
      </span>
      <span class="mord mathrm">
       1
      </span>
     </span>
    </span>
   </span>
  </span>
 </li>
 <li>
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <msub>
         <mi>
          E
         </mi>
         <mn>
          1
         </mn>
        </msub>
        <mo>
         &lt;
        </mo>
        <msub>
         <mi>
          E
         </mi>
         <mn>
          2
         </mn>
        </msub>
       </mrow>
       <annotation encoding="application/x-tex">
        E_1  \lt E_2
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.05764em;">
        E
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord mathrm mtight">
            1
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
      <span class="mrel">
       &lt;
      </span>
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.05764em;">
        E
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord mathrm mtight">
            2
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
  </span>
  alors
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <mi>
         S
        </mi>
        <mo>
         =
        </mo>
        <mn>
         0
        </mn>
       </mrow>
       <annotation encoding="application/x-tex">
        S = 0
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.68333em;vertical-align:0em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord mathit" style="margin-right:0.05764em;">
       S
      </span>
      <span class="mrel">
       =
      </span>
      <span class="mord mathrm">
       0
      </span>
     </span>
    </span>
   </span>
  </span>
 </li>
 <li>
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <msub>
         <mi>
          E
         </mi>
         <mn>
          1
         </mn>
        </msub>
        <mo>
         =
        </mo>
        <msub>
         <mi>
          E
         </mi>
         <mn>
          2
         </mn>
        </msub>
       </mrow>
       <annotation encoding="application/x-tex">
        E_1 = E_2
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.05764em;">
        E
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord mathrm mtight">
            1
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
      <span class="mrel">
       =
      </span>
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.05764em;">
        E
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord mathrm mtight">
            2
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
  </span>
  , alors
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <mi>
         S
        </mi>
        <mo>
         =
        </mo>
        <mi>
         i
        </mi>
        <mi>
         n
        </mi>
        <mi>
         d
        </mi>
        <mi>
         e
        </mi>
        <mi>
         f
        </mi>
        <mi>
         i
        </mi>
        <mi>
         n
        </mi>
        <mi>
         i
        </mi>
       </mrow>
       <annotation encoding="application/x-tex">
        S = indefini
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.69444em;">
     </span>
     <span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord mathit" style="margin-right:0.05764em;">
       S
      </span>
      <span class="mrel">
       =
      </span>
      <span class="mord mathit">
       i
      </span>
      <span class="mord mathit">
       n
      </span>
      <span class="mord mathit">
       d
      </span>
      <span class="mord mathit">
       e
      </span>
      <span class="mord mathit" style="margin-right:0.10764em;">
       f
      </span>
      <span class="mord mathit">
       i
      </span>
      <span class="mord mathit">
       n
      </span>
      <span class="mord mathit">
       i
      </span>
     </span>
    </span>
   </span>
  </span>
 </li>
</ul>
<p>
 Simple n’est-ce pas ?
</p>
<h4 id="le-démultiplexeur">
 <a aria-hidden="true" href="#le-démultiplexeur">
  <span class="es-autolink-heading">
  </span>
 </a>
 Le démultiplexeur
</h4>
<p>
 Maintenant, je vais vous parler du
 <strong>
  démultiplexeur
 </strong>
 . C’est en fait un nom un peu barbare pour désigner un composant électronique qui fait de
 <em>
  l’aiguillage de niveaux logiques
 </em>
 (il en existe aussi qui font de l’aiguillage de tensions analogiques). Le principe est là encore très simple. Le démultiplexeur à plusieurs sorties, une entrée et des entrées de sélection :
</p>
<p>
 <img alt="Le démultiplexeur" src="./images/uploaded/tuto-arduino-401-les-entrées-analogiques-de-larduino/le-demultiplexeur.jpg"/>
</p>
<ul>
 <li>
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <mi>
         E
        </mi>
       </mrow>
       <annotation encoding="application/x-tex">
        E
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.68333em;vertical-align:0em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord mathit" style="margin-right:0.05764em;">
       E
      </span>
     </span>
    </span>
   </span>
  </span>
  est l’entrée où l’on impose un niveau logique 0 ou 1.
 </li>
 <li>
  Les sorties
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <mi>
         S
        </mi>
       </mrow>
       <annotation encoding="application/x-tex">
        S
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.68333em;vertical-align:0em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord mathit" style="margin-right:0.05764em;">
       S
      </span>
     </span>
    </span>
   </span>
  </span>
  sont là où se retrouve le niveau logique d’entrée. UNE seule sortie peut être active à la fois et recopier le niveau logique d’entrée.
 </li>
 <li>
  Les entrées
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <mi>
         A
        </mi>
       </mrow>
       <annotation encoding="application/x-tex">
        A
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.68333em;vertical-align:0em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord mathit">
       A
      </span>
     </span>
    </span>
   </span>
  </span>
  permettent de sélectionner quelle sera la sortie qui est active. La sélection se fait grâce aux combinaisons binaires. Par exemple, si je veux sélectionner la sortie 4, je vais écrire le code 0100 (qui correspond au chiffre décimal 4) sur les entrées
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <msub>
         <mi>
          A
         </mi>
         <mn>
          1
         </mn>
        </msub>
       </mrow>
       <annotation encoding="application/x-tex">
        A_1
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord">
       <span class="mord mathit">
        A
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:0em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord mathrm mtight">
            1
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
  </span>
  à
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <msub>
         <mi>
          A
         </mi>
         <mn>
          4
         </mn>
        </msub>
       </mrow>
       <annotation encoding="application/x-tex">
        A_4
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord">
       <span class="mord mathit">
        A
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:0em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord mathrm mtight">
            4
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
  </span>
 </li>
</ul>
<p>
 <img alt="Le démultiplexeur en action" src="./images/uploaded/tuto-arduino-401-les-entrées-analogiques-de-larduino/le-demultiplexeur-en-action.jpg"/>
</p>
<div class="custom-block alert alert-warning">
 <div class="custom-block-body">
  <p>
   Je rappelle que, pour les entrées de sélection, le bit de poids fort est
   <span class="inlineMath">
    <span class="katex">
     <span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msub>
          <mi>
           A
          </mi>
          <mn>
           4
          </mn>
         </msub>
        </mrow>
        <annotation encoding="application/x-tex">
         A_4
        </annotation>
       </semantics>
      </math>
     </span>
     <span aria-hidden="true" class="katex-html">
      <span class="strut" style="height:0.68333em;">
      </span>
      <span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;">
      </span>
      <span class="base textstyle uncramped">
       <span class="mord">
        <span class="mord mathit">
         A
        </span>
        <span class="msupsub">
         <span class="vlist">
          <span style="top:0.15em;margin-right:0.05em;margin-left:0em;">
           <span class="fontsize-ensurer reset-size5 size5">
            <span style="font-size:0em;">
             ​
            </span>
           </span>
           <span class="reset-textstyle scriptstyle cramped mtight">
            <span class="mord mathrm mtight">
             4
            </span>
           </span>
          </span>
          <span class="baseline-fix">
           <span class="fontsize-ensurer reset-size5 size5">
            <span style="font-size:0em;">
             ​
            </span>
           </span>
           ​
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
   et le bit de poids faible
   <span class="inlineMath">
    <span class="katex">
     <span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msub>
          <mi>
           A
          </mi>
          <mn>
           1
          </mn>
         </msub>
        </mrow>
        <annotation encoding="application/x-tex">
         A_1
        </annotation>
       </semantics>
      </math>
     </span>
     <span aria-hidden="true" class="katex-html">
      <span class="strut" style="height:0.68333em;">
      </span>
      <span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;">
      </span>
      <span class="base textstyle uncramped">
       <span class="mord">
        <span class="mord mathit">
         A
        </span>
        <span class="msupsub">
         <span class="vlist">
          <span style="top:0.15em;margin-right:0.05em;margin-left:0em;">
           <span class="fontsize-ensurer reset-size5 size5">
            <span style="font-size:0em;">
             ​
            </span>
           </span>
           <span class="reset-textstyle scriptstyle cramped mtight">
            <span class="mord mathrm mtight">
             1
            </span>
           </span>
          </span>
          <span class="baseline-fix">
           <span class="fontsize-ensurer reset-size5 size5">
            <span style="font-size:0em;">
             ​
            </span>
           </span>
           ​
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
   . Idem pour les sorties,
   <span class="inlineMath">
    <span class="katex">
     <span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msub>
          <mi>
           S
          </mi>
          <mn>
           1
          </mn>
         </msub>
        </mrow>
        <annotation encoding="application/x-tex">
         S_1
        </annotation>
       </semantics>
      </math>
     </span>
     <span aria-hidden="true" class="katex-html">
      <span class="strut" style="height:0.68333em;">
      </span>
      <span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;">
      </span>
      <span class="base textstyle uncramped">
       <span class="mord">
        <span class="mord mathit" style="margin-right:0.05764em;">
         S
        </span>
        <span class="msupsub">
         <span class="vlist">
          <span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;">
           <span class="fontsize-ensurer reset-size5 size5">
            <span style="font-size:0em;">
             ​
            </span>
           </span>
           <span class="reset-textstyle scriptstyle cramped mtight">
            <span class="mord mathrm mtight">
             1
            </span>
           </span>
          </span>
          <span class="baseline-fix">
           <span class="fontsize-ensurer reset-size5 size5">
            <span style="font-size:0em;">
             ​
            </span>
           </span>
           ​
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
   est le bit de poids faible et
   <span class="inlineMath">
    <span class="katex">
     <span class="katex-mathml">
      <math>
       <semantics>
        <mrow>
         <msub>
          <mi>
           S
          </mi>
          <mrow>
           <mn>
            1
           </mn>
           <mn>
            0
           </mn>
          </mrow>
         </msub>
        </mrow>
        <annotation encoding="application/x-tex">
         S_{10}
        </annotation>
       </semantics>
      </math>
     </span>
     <span aria-hidden="true" class="katex-html">
      <span class="strut" style="height:0.68333em;">
      </span>
      <span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;">
      </span>
      <span class="base textstyle uncramped">
       <span class="mord">
        <span class="mord mathit" style="margin-right:0.05764em;">
         S
        </span>
        <span class="msupsub">
         <span class="vlist">
          <span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;">
           <span class="fontsize-ensurer reset-size5 size5">
            <span style="font-size:0em;">
             ​
            </span>
           </span>
           <span class="reset-textstyle scriptstyle cramped mtight">
            <span class="mord scriptstyle cramped mtight">
             <span class="mord mathrm mtight">
              1
             </span>
             <span class="mord mathrm mtight">
              0
             </span>
            </span>
           </span>
          </span>
          <span class="baseline-fix">
           <span class="fontsize-ensurer reset-size5 size5">
            <span style="font-size:0em;">
             ​
            </span>
           </span>
           ​
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
   , le bit de poids fort.
  </p>
 </div>
</div>
<h4 id="la-mémoire">
 <a aria-hidden="true" href="#la-mémoire">
  <span class="es-autolink-heading">
  </span>
 </a>
 La mémoire
</h4>
<p>
 Ce composant électronique sert simplement à stocker des données sous forme binaire.
</p>
<h4 id="le-convertisseur-numérique-analogique">
 <a aria-hidden="true" href="#le-convertisseur-numérique-analogique">
  <span class="es-autolink-heading">
  </span>
 </a>
 Le convertisseur numérique analogique
</h4>
<p>
 Pour ce dernier composant avant l’acte final, il n’y a rien à savoir si ce n’est que c’est l’opposé du
 <abbr title="Convertisseur Analogique Numérique">
  CAN
 </abbr>
 . Il a donc plusieurs entrées et une seule sortie. Les entrées reçoivent des valeurs binaires et la sortie donne le résultat sous forme de tension.
</p>
<h4 id="fonctionnement-global">
 <a aria-hidden="true" href="#fonctionnement-global">
  <span class="es-autolink-heading">
  </span>
 </a>
 Fonctionnement global
</h4>
<p>
 Rentrons dans les explications du fonctionnement d’un
 <abbr title="Convertisseur Analogique Numérique">
  CAN
 </abbr>
 à approximations successives. Je vous ai fait un petit schéma rassemblant les éléments précédemment présentés :
</p>
<p>
 <img alt="Chaîne de fonctionnement du CAN" src="./images/uploaded/tuto-arduino-401-les-entrées-analogiques-de-larduino/chaine-de-fonctionnement-du-can.jpg"/>
</p>
<p>
 Voilà donc comment se compose le
 <abbr title="Convertisseur Analogique Numérique">
  CAN
 </abbr>
 . Si vous avez compris le fonctionnement de chacun des composants qui le constituent, alors vous n’aurez pas trop de mal à suivre mes explications. Dans le cas contraire, je vous recommande de relire ce qui précède et de bien comprendre et rechercher sur internet de plus amples informations si cela vous est nécessaire.
</p>
<p>
 <img alt="Chaîne de fonctionnement du CAN en action" src="./images/uploaded/tuto-arduino-401-les-entrées-analogiques-de-larduino/chaine-de-fonctionnement-du-can-en-action.jpg"/>
</p>
<p>
 En premier lieu, commençons par les conditions initiales :
</p>
<ul>
 <li>
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <msub>
         <mi>
          V
         </mi>
         <mi>
          e
         </mi>
        </msub>
       </mrow>
       <annotation encoding="application/x-tex">
        V_e
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.22222em;">
        V
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.22222em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord mathit mtight">
            e
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
  </span>
  est la tension analogique d’entrée, celle que l’on veut mesurer en la convertissant en signal numérique.
 </li>
 <li>
  <strong>
   La mémoire
  </strong>
  contient pour l’instant que des
  <strong>
   0
  </strong>
  sauf pour le bit de poids fort (
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <msub>
         <mi>
          S
         </mi>
         <mrow>
          <mn>
           1
          </mn>
          <mn>
           0
          </mn>
         </mrow>
        </msub>
       </mrow>
       <annotation encoding="application/x-tex">
        S_{10}
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.05764em;">
        S
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord scriptstyle cramped mtight">
            <span class="mord mathrm mtight">
             1
            </span>
            <span class="mord mathrm mtight">
             0
            </span>
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
  </span>
  ) qui est à
  <strong>
   1
  </strong>
  . Ainsi, le convertisseur numérique
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <mo>
         →
        </mo>
       </mrow>
       <annotation encoding="application/x-tex">
        \to
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.36687em;">
     </span>
     <span class="strut bottom" style="height:0.36687em;vertical-align:0em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mrel">
       →
      </span>
     </span>
    </span>
   </span>
  </span>
  analogique va convertir ce nombre binaire en une tension analogique qui aura pour valeur 2.5V.
 </li>
 <li>
  Pour l’instant, le démultiplexeur n’entre pas en jeu.
 </li>
</ul>
<p>
 Suivons le fonctionnement étape par étape :
</p>
<p>
 <strong>
  Étape 1 :
 </strong>
</p>
<p>
 <img alt="Chaîne de fonctionnement du CAN - Exemple - Etape 1" src="./images/uploaded/tuto-arduino-401-les-entrées-analogiques-de-larduino/chaine-de-fonctionnement-du-can-exemple-etape-1.jpg"/>
</p>
<ul>
 <li>
  J’applique une tension
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <msub>
         <mi>
          V
         </mi>
         <mi>
          e
         </mi>
        </msub>
        <mo>
         =
        </mo>
        <mn>
         3
        </mn>
        <mi mathvariant="normal">
         .
        </mi>
        <mn>
         5
        </mn>
        <mn>
         1
        </mn>
        <mn>
         0
        </mn>
        <mn>
         0
        </mn>
        <mi>
         V
        </mi>
       </mrow>
       <annotation encoding="application/x-tex">
        V_e = 3.5100V
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.22222em;">
        V
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.22222em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord mathit mtight">
            e
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
      <span class="mrel">
       =
      </span>
      <span class="mord mathrm">
       3
      </span>
      <span class="mord mathrm">
       .
      </span>
      <span class="mord mathrm">
       5
      </span>
      <span class="mord mathrm">
       1
      </span>
      <span class="mord mathrm">
       0
      </span>
      <span class="mord mathrm">
       0
      </span>
      <span class="mord mathit" style="margin-right:0.22222em;">
       V
      </span>
     </span>
    </span>
   </span>
  </span>
  précisément.
 </li>
 <li>
  Le comparateur compare la tension
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <msub>
         <mi>
          V
         </mi>
         <mrow>
          <mi>
           c
          </mi>
          <mi>
           o
          </mi>
          <mi>
           m
          </mi>
          <mi>
           p
          </mi>
         </mrow>
        </msub>
        <mo>
         =
        </mo>
        <mn>
         2
        </mn>
        <mi mathvariant="normal">
         .
        </mi>
        <mn>
         5
        </mn>
        <mi>
         V
        </mi>
       </mrow>
       <annotation encoding="application/x-tex">
        V_{comp} = 2.5V
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.969438em;vertical-align:-0.286108em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.22222em;">
        V
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.22222em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord scriptstyle cramped mtight">
            <span class="mord mathit mtight">
             c
            </span>
            <span class="mord mathit mtight">
             o
            </span>
            <span class="mord mathit mtight">
             m
            </span>
            <span class="mord mathit mtight">
             p
            </span>
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
      <span class="mrel">
       =
      </span>
      <span class="mord mathrm">
       2
      </span>
      <span class="mord mathrm">
       .
      </span>
      <span class="mord mathrm">
       5
      </span>
      <span class="mord mathit" style="margin-right:0.22222em;">
       V
      </span>
     </span>
    </span>
   </span>
  </span>
  à la tension
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <msub>
         <mi>
          V
         </mi>
         <mi>
          e
         </mi>
        </msub>
        <mo>
         =
        </mo>
        <mn>
         3
        </mn>
        <mi mathvariant="normal">
         .
        </mi>
        <mn>
         5
        </mn>
        <mn>
         1
        </mn>
        <mn>
         0
        </mn>
        <mn>
         0
        </mn>
        <mi>
         V
        </mi>
       </mrow>
       <annotation encoding="application/x-tex">
        V_e = 3.5100V
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.22222em;">
        V
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.22222em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord mathit mtight">
            e
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
      <span class="mrel">
       =
      </span>
      <span class="mord mathrm">
       3
      </span>
      <span class="mord mathrm">
       .
      </span>
      <span class="mord mathrm">
       5
      </span>
      <span class="mord mathrm">
       1
      </span>
      <span class="mord mathrm">
       0
      </span>
      <span class="mord mathrm">
       0
      </span>
      <span class="mord mathit" style="margin-right:0.22222em;">
       V
      </span>
     </span>
    </span>
   </span>
  </span>
  . Étant donné que
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <msub>
         <mi>
          V
         </mi>
         <mi>
          e
         </mi>
        </msub>
        <mo>
         &gt;
        </mo>
        <msub>
         <mi>
          V
         </mi>
         <mrow>
          <mi>
           c
          </mi>
          <mi>
           o
          </mi>
          <mi>
           m
          </mi>
          <mi>
           p
          </mi>
         </mrow>
        </msub>
       </mrow>
       <annotation encoding="application/x-tex">
        V_e  \gt V_{comp}
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.969438em;vertical-align:-0.286108em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.22222em;">
        V
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.22222em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord mathit mtight">
            e
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
      <span class="mrel">
       &gt;
      </span>
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.22222em;">
        V
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.22222em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord scriptstyle cramped mtight">
            <span class="mord mathit mtight">
             c
            </span>
            <span class="mord mathit mtight">
             o
            </span>
            <span class="mord mathit mtight">
             m
            </span>
            <span class="mord mathit mtight">
             p
            </span>
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
  </span>
  , on a un Niveau Logique
  <strong>
   1
  </strong>
  en sortie du comparateur.
 </li>
 <li>
  Le multiplexeur entre alors en jeux. Avec ses signaux de sélections, il va sélectionner la sortie ayant le poids le plus élevé, soit
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <msub>
         <mi>
          S
         </mi>
         <mrow>
          <mn>
           1
          </mn>
          <mn>
           0
          </mn>
         </mrow>
        </msub>
       </mrow>
       <annotation encoding="application/x-tex">
        S_{10}
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.05764em;">
        S
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord scriptstyle cramped mtight">
            <span class="mord mathrm mtight">
             1
            </span>
            <span class="mord mathrm mtight">
             0
            </span>
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
  </span>
  .
 </li>
 <li>
  La mémoire va alors enregistrer le niveau logique présent sur la broche
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <msub>
         <mi>
          S
         </mi>
         <mrow>
          <mn>
           1
          </mn>
          <mn>
           0
          </mn>
         </mrow>
        </msub>
       </mrow>
       <annotation encoding="application/x-tex">
        S_{10}
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.05764em;">
        S
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord scriptstyle cramped mtight">
            <span class="mord mathrm mtight">
             1
            </span>
            <span class="mord mathrm mtight">
             0
            </span>
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
  </span>
  , dans notre cas c’est
  <strong>
   1
  </strong>
  .
 </li>
</ul>
<p>
 <strong>
  Étape 2 :
 </strong>
</p>
<p>
 <img alt="Chaîne de fonctionnement du CAN - Exemple - Etape 2" src="./images/uploaded/tuto-arduino-401-les-entrées-analogiques-de-larduino/chaine-de-fonctionnement-du-can-exemple-etape-2.jpg"/>
</p>
<ul>
 <li>
  Au niveau de la mémoire, on change le deuxième bit de poids fort (mais moins fort que le premier) correspondant à la broche
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <msub>
         <mi>
          S
         </mi>
         <mn>
          9
         </mn>
        </msub>
       </mrow>
       <annotation encoding="application/x-tex">
        S_9
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.05764em;">
        S
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord mathrm mtight">
            9
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
  </span>
  en le passant à
  <strong>
   1
  </strong>
  .
 </li>
 <li>
  En sortie du CNA, on aura alors une tension de
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <mn>
         3
        </mn>
        <mi mathvariant="normal">
         .
        </mi>
        <mn>
         7
        </mn>
        <mn>
         5
        </mn>
        <mi>
         V
        </mi>
       </mrow>
       <annotation encoding="application/x-tex">
        3.75V
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.68333em;vertical-align:0em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord mathrm">
       3
      </span>
      <span class="mord mathrm">
       .
      </span>
      <span class="mord mathrm">
       7
      </span>
      <span class="mord mathrm">
       5
      </span>
      <span class="mord mathit" style="margin-right:0.22222em;">
       V
      </span>
     </span>
    </span>
   </span>
  </span>
 </li>
 <li>
  Le comparateur compare, il voit
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <msub>
         <mi>
          V
         </mi>
         <mrow>
          <mi>
           c
          </mi>
          <mi>
           o
          </mi>
          <mi>
           m
          </mi>
          <mi>
           p
          </mi>
         </mrow>
        </msub>
        <mo>
         &gt;
        </mo>
        <msub>
         <mi>
          V
         </mi>
         <mi>
          e
         </mi>
        </msub>
       </mrow>
       <annotation encoding="application/x-tex">
        V_{comp} \gt V_e
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.969438em;vertical-align:-0.286108em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.22222em;">
        V
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.22222em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord scriptstyle cramped mtight">
            <span class="mord mathit mtight">
             c
            </span>
            <span class="mord mathit mtight">
             o
            </span>
            <span class="mord mathit mtight">
             m
            </span>
            <span class="mord mathit mtight">
             p
            </span>
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
      <span class="mrel">
       &gt;
      </span>
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.22222em;">
        V
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.22222em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord mathit mtight">
            e
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
  </span>
  donc il donne un état logique
  <strong>
   0
  </strong>
  .
 </li>
 <li>
  La mémoire enregistre alors le niveau sur la broche
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <msub>
         <mi>
          S
         </mi>
         <mn>
          9
         </mn>
        </msub>
       </mrow>
       <annotation encoding="application/x-tex">
        S_9
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.05764em;">
        S
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord mathrm mtight">
            9
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
  </span>
  qui est à
  <strong>
   0
  </strong>
  .
 </li>
</ul>
<p>
 <strong>
  Étape 3 :
 </strong>
</p>
<p>
 Redondante aux précédentes
</p>
<p>
 <img alt="Chaîne de fonctionnement du CAN - Exemple - Etape 3" src="./images/uploaded/tuto-arduino-401-les-entrées-analogiques-de-larduino/chaine-de-fonctionnement-du-can-exemple-etape-3.jpg"/>
</p>
<ul>
 <li>
  On passe le troisième bit le plus fort (broche
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <msub>
         <mi>
          S
         </mi>
         <mn>
          8
         </mn>
        </msub>
       </mrow>
       <annotation encoding="application/x-tex">
        S_8
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.05764em;">
        S
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord mathrm mtight">
            8
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
  </span>
  ) à
  <strong>
   1
  </strong>
  .
 </li>
 <li>
  Le CNA converti le nombre binaire résultant en une tension de
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <mn>
         3
        </mn>
        <mi mathvariant="normal">
         .
        </mi>
        <mn>
         1
        </mn>
        <mn>
         2
        </mn>
        <mn>
         5
        </mn>
        <mi>
         V
        </mi>
       </mrow>
       <annotation encoding="application/x-tex">
        3.125V
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.68333em;vertical-align:0em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord mathrm">
       3
      </span>
      <span class="mord mathrm">
       .
      </span>
      <span class="mord mathrm">
       1
      </span>
      <span class="mord mathrm">
       2
      </span>
      <span class="mord mathrm">
       5
      </span>
      <span class="mord mathit" style="margin-right:0.22222em;">
       V
      </span>
     </span>
    </span>
   </span>
  </span>
  .
 </li>
 <li>
  Le comparateur voit
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <msub>
         <mi>
          V
         </mi>
         <mi>
          e
         </mi>
        </msub>
        <mo>
         &gt;
        </mo>
        <msub>
         <mi>
          V
         </mi>
         <mrow>
          <mi>
           c
          </mi>
          <mi>
           o
          </mi>
          <mi>
           m
          </mi>
          <mi>
           p
          </mi>
         </mrow>
        </msub>
       </mrow>
       <annotation encoding="application/x-tex">
        V_e  \gt V_{comp}
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.969438em;vertical-align:-0.286108em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.22222em;">
        V
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.22222em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord mathit mtight">
            e
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
      <span class="mrel">
       &gt;
      </span>
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.22222em;">
        V
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.22222em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord scriptstyle cramped mtight">
            <span class="mord mathit mtight">
             c
            </span>
            <span class="mord mathit mtight">
             o
            </span>
            <span class="mord mathit mtight">
             m
            </span>
            <span class="mord mathit mtight">
             p
            </span>
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
  </span>
  , sa sortie passe à
  <strong>
   1
  </strong>
  .
 </li>
 <li>
  La mémoire enregistre l’état logique de la broche
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <msub>
         <mi>
          S
         </mi>
         <mn>
          8
         </mn>
        </msub>
       </mrow>
       <annotation encoding="application/x-tex">
        S_8
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.05764em;">
        S
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord mathrm mtight">
            8
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
  </span>
  qui est à
  <strong>
   1
  </strong>
  .
 </li>
</ul>
<p>
 Le
 <abbr title="Convertisseur Analogique Numérique">
  CAN
 </abbr>
 continue de cette manière pour arriver au dernier bit (celui de poids faible). En mémoire, à la fin de la conversion, se trouve le résultat. On va alors lire cette valeur binaire que l’on convertira ensuite pour l’exploiter. Bon, j’ai continué les calculs à la main (n’ayant pas de simulateur pour le faire à ma place), voici le tableau des valeurs :
</p>
<div class="text-center">
 <figure>
  <div class="table-wrapper">
   <table class=" table table-bordered table-striped">
    <thead>
     <tr>
      <th>
       Poids du bit
      </th>
      <th>
       NL en sortie du comparateur
      </th>
      <th>
       Bits stockés en mémoire
      </th>
      <th>
       Tension en sortie du convertisseur CNA (en V)
      </th>
     </tr>
    </thead>
    <tbody>
     <tr>
      <td>
       10
      </td>
      <td>
       1
      </td>
      <td>
       1
      </td>
      <td>
       2.5
      </td>
     </tr>
     <tr>
      <td>
       9
      </td>
      <td>
       0
      </td>
      <td>
       0
      </td>
      <td>
       3.75
      </td>
     </tr>
     <tr>
      <td>
       8
      </td>
      <td>
       1
      </td>
      <td>
       1
      </td>
      <td>
       3.125
      </td>
     </tr>
     <tr>
      <td>
       7
      </td>
      <td>
       1
      </td>
      <td>
       1
      </td>
      <td>
       3.4375
      </td>
     </tr>
     <tr>
      <td>
       6
      </td>
      <td>
       0
      </td>
      <td>
       0
      </td>
      <td>
       3.59375
      </td>
     </tr>
     <tr>
      <td>
       5
      </td>
      <td>
       0
      </td>
      <td>
       0
      </td>
      <td>
       3.515625
      </td>
     </tr>
     <tr>
      <td>
       4
      </td>
      <td>
       1
      </td>
      <td>
       1
      </td>
      <td>
       3.4765625
      </td>
     </tr>
     <tr>
      <td>
       3
      </td>
      <td>
       1
      </td>
      <td>
       1
      </td>
      <td>
       3.49609375
      </td>
     </tr>
     <tr>
      <td>
       2
      </td>
      <td>
       1
      </td>
      <td>
       1
      </td>
      <td>
       3.505859375
      </td>
     </tr>
     <tr>
      <td>
       1
      </td>
      <td>
       0
      </td>
      <td>
       0
      </td>
      <td>
       3.5107421875
      </td>
     </tr>
    </tbody>
   </table>
  </div>
  <figcaption>
   Lien entre tension et bits
  </figcaption>
 </figure>
</div>
<p>
 <strong>
  Résultat :
 </strong>
 Le résultat de la conversion donne :
</p>
<div class="text-center">
 <figure>
  <div class="table-wrapper">
   <table class=" table table-bordered table-striped">
    <thead>
     <tr>
      <th>
       Résultat de conversion (binaire)
      </th>
      <th>
       Résultat de conversion (décimale)
      </th>
      <th>
       Résultat de conversion (Volts)
      </th>
     </tr>
    </thead>
    <tbody>
     <tr>
      <td>
       1011001110
      </td>
      <td>
       718
      </td>
      <td>
       3,505859375
      </td>
     </tr>
    </tbody>
   </table>
  </div>
  <figcaption>
   Exemple de résultat d’une conversion
  </figcaption>
 </figure>
</div>
<p>
 Observez la précision du convertisseur. Vous voyez que la conversion donne un résultat (très) proche de la tension réelle, mais elle n’est pas exactement égale. Ceci est dû au pas du convertisseur.
</p>
<h5 id="pas-de-calcul-du-can">
 <a aria-hidden="true" href="#pas-de-calcul-du-can">
  <span class="es-autolink-heading">
  </span>
 </a>
 Pas de calcul du
 <abbr title="Convertisseur Analogique Numérique">
  CAN
 </abbr>
</h5>
<p>
 Qu’est-ce que
 <strong>
  le pas de calcul
 </strong>
 ? Eh bien il s’agit de la tension minimale que le convertisseur puisse "voir". Si je mets le bit de poids le plus faible à 1, quelle sera la valeur de la tension
 <span class="inlineMath">
  <span class="katex">
   <span class="katex-mathml">
    <math>
     <semantics>
      <mrow>
       <msub>
        <mi>
         V
        </mi>
        <mrow>
         <mi>
          c
         </mi>
         <mi>
          o
         </mi>
         <mi>
          m
         </mi>
         <mi>
          p
         </mi>
        </mrow>
       </msub>
      </mrow>
      <annotation encoding="application/x-tex">
       V_{comp}
      </annotation>
     </semantics>
    </math>
   </span>
   <span aria-hidden="true" class="katex-html">
    <span class="strut" style="height:0.68333em;">
    </span>
    <span class="strut bottom" style="height:0.969438em;vertical-align:-0.286108em;">
    </span>
    <span class="base textstyle uncramped">
     <span class="mord">
      <span class="mord mathit" style="margin-right:0.22222em;">
       V
      </span>
      <span class="msupsub">
       <span class="vlist">
        <span style="top:0.15em;margin-right:0.05em;margin-left:-0.22222em;">
         <span class="fontsize-ensurer reset-size5 size5">
          <span style="font-size:0em;">
           ​
          </span>
         </span>
         <span class="reset-textstyle scriptstyle cramped mtight">
          <span class="mord scriptstyle cramped mtight">
           <span class="mord mathit mtight">
            c
           </span>
           <span class="mord mathit mtight">
            o
           </span>
           <span class="mord mathit mtight">
            m
           </span>
           <span class="mord mathit mtight">
            p
           </span>
          </span>
         </span>
        </span>
        <span class="baseline-fix">
         <span class="fontsize-ensurer reset-size5 size5">
          <span style="font-size:0em;">
           ​
          </span>
         </span>
         ​
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
  </span>
 </span>
 ? Le convertisseur a une tension de référence de 5V. Son nombre de bit est de 10. Donc il peut "lire" :
 <span class="inlineMath">
  <span class="katex">
   <span class="katex-mathml">
    <math>
     <semantics>
      <mrow>
       <msup>
        <mn>
         2
        </mn>
        <mrow>
         <mn>
          1
         </mn>
         <mn>
          0
         </mn>
        </mrow>
       </msup>
      </mrow>
      <annotation encoding="application/x-tex">
       2^{10}
      </annotation>
     </semantics>
    </math>
   </span>
   <span aria-hidden="true" class="katex-html">
    <span class="strut" style="height:0.8141079999999999em;">
    </span>
    <span class="strut bottom" style="height:0.8141079999999999em;vertical-align:0em;">
    </span>
    <span class="base textstyle uncramped">
     <span class="mord">
      <span class="mord mathrm">
       2
      </span>
      <span class="msupsub">
       <span class="vlist">
        <span style="top:-0.363em;margin-right:0.05em;">
         <span class="fontsize-ensurer reset-size5 size5">
          <span style="font-size:0em;">
           ​
          </span>
         </span>
         <span class="reset-textstyle scriptstyle uncramped mtight">
          <span class="mord scriptstyle uncramped mtight">
           <span class="mord mathrm mtight">
            1
           </span>
           <span class="mord mathrm mtight">
            0
           </span>
          </span>
         </span>
        </span>
        <span class="baseline-fix">
         <span class="fontsize-ensurer reset-size5 size5">
          <span style="font-size:0em;">
           ​
          </span>
         </span>
         ​
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
  </span>
 </span>
 valeurs pour une seule tension. Ainsi, sa précision sera de :
 <span class="inlineMath">
  <span class="katex">
   <span class="katex-mathml">
    <math>
     <semantics>
      <mrow>
       <mfrac>
        <mrow>
         <mn>
          5
         </mn>
        </mrow>
        <mrow>
         <msup>
          <mn>
           2
          </mn>
          <mrow>
           <mn>
            1
           </mn>
           <mn>
            0
           </mn>
          </mrow>
         </msup>
        </mrow>
       </mfrac>
       <mo>
        =
       </mo>
       <mn>
        0
       </mn>
       <mo separator="true">
        ,
       </mo>
       <mn>
        0
       </mn>
       <mn>
        0
       </mn>
       <mn>
        4
       </mn>
       <mn>
        8
       </mn>
       <mn>
        8
       </mn>
       <mn>
        2
       </mn>
       <mn>
        8
       </mn>
       <mn>
        1
       </mn>
       <mn>
        2
       </mn>
       <mn>
        5
       </mn>
       <mi>
        V
       </mi>
      </mrow>
      <annotation encoding="application/x-tex">
       \frac{5}{2^{10}} = 0,0048828125 V
      </annotation>
     </semantics>
    </math>
   </span>
   <span aria-hidden="true" class="katex-html">
    <span class="strut" style="height:0.845108em;">
    </span>
    <span class="strut bottom" style="height:1.190108em;vertical-align:-0.345em;">
    </span>
    <span class="base textstyle uncramped">
     <span class="mord reset-textstyle textstyle uncramped">
      <span class="mopen sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter">
      </span>
      <span class="mfrac">
       <span class="vlist">
        <span style="top:0.345em;">
         <span class="fontsize-ensurer reset-size5 size5">
          <span style="font-size:0em;">
           ​
          </span>
         </span>
         <span class="reset-textstyle scriptstyle cramped mtight">
          <span class="mord scriptstyle cramped mtight">
           <span class="mord mtight">
            <span class="mord mathrm mtight">
             2
            </span>
            <span class="msupsub">
             <span class="vlist">
              <span style="top:-0.286em;margin-right:0.07142857142857144em;">
               <span class="fontsize-ensurer reset-size5 size5">
                <span style="font-size:0em;">
                 ​
                </span>
               </span>
               <span class="reset-scriptstyle scriptscriptstyle cramped mtight">
                <span class="mord scriptscriptstyle cramped mtight">
                 <span class="mord mathrm mtight">
                  1
                 </span>
                 <span class="mord mathrm mtight">
                  0
                 </span>
                </span>
               </span>
              </span>
              <span class="baseline-fix">
               <span class="fontsize-ensurer reset-size5 size5">
                <span style="font-size:0em;">
                 ​
                </span>
               </span>
               ​
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
        </span>
        <span style="top:-0.22999999999999998em;">
         <span class="fontsize-ensurer reset-size5 size5">
          <span style="font-size:0em;">
           ​
          </span>
         </span>
         <span class="reset-textstyle textstyle uncramped frac-line">
         </span>
        </span>
        <span style="top:-0.394em;">
         <span class="fontsize-ensurer reset-size5 size5">
          <span style="font-size:0em;">
           ​
          </span>
         </span>
         <span class="reset-textstyle scriptstyle uncramped mtight">
          <span class="mord scriptstyle uncramped mtight">
           <span class="mord mathrm mtight">
            5
           </span>
          </span>
         </span>
        </span>
        <span class="baseline-fix">
         <span class="fontsize-ensurer reset-size5 size5">
          <span style="font-size:0em;">
           ​
          </span>
         </span>
         ​
        </span>
       </span>
      </span>
      <span class="mclose sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter">
      </span>
     </span>
     <span class="mrel">
      =
     </span>
     <span class="mord mathrm">
      0
     </span>
     <span class="mpunct">
      ,
     </span>
     <span class="mord mathrm">
      0
     </span>
     <span class="mord mathrm">
      0
     </span>
     <span class="mord mathrm">
      4
     </span>
     <span class="mord mathrm">
      8
     </span>
     <span class="mord mathrm">
      8
     </span>
     <span class="mord mathrm">
      2
     </span>
     <span class="mord mathrm">
      8
     </span>
     <span class="mord mathrm">
      1
     </span>
     <span class="mord mathrm">
      2
     </span>
     <span class="mord mathrm">
      5
     </span>
     <span class="mord mathit" style="margin-right:0.22222em;">
      V
     </span>
    </span>
   </span>
  </span>
 </span>
 La formule à retenir sera donc :
</p>
<p>
 <span class="inlineMath inlineMathDouble">
  <span class="katex-display">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <mfrac>
         <mrow>
          <msub>
           <mi>
            V
           </mi>
           <mrow>
            <mi>
             r
            </mi>
            <mi>
             e
            </mi>
            <mi>
             f
            </mi>
           </mrow>
          </msub>
         </mrow>
         <mrow>
          <msup>
           <mn>
            2
           </mn>
           <mi>
            N
           </mi>
          </msup>
         </mrow>
        </mfrac>
       </mrow>
       <annotation encoding="application/x-tex">
        \frac{V_{ref}}{2^N}
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:1.36033em;">
     </span>
     <span class="strut bottom" style="height:2.04633em;vertical-align:-0.686em;">
     </span>
     <span class="base displaystyle textstyle uncramped">
      <span class="mord reset-textstyle displaystyle textstyle uncramped">
       <span class="mopen sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter">
       </span>
       <span class="mfrac">
        <span class="vlist">
         <span style="top:0.686em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle textstyle cramped">
           <span class="mord textstyle cramped">
            <span class="mord">
             <span class="mord mathrm">
              2
             </span>
             <span class="msupsub">
              <span class="vlist">
               <span style="top:-0.289em;margin-right:0.05em;">
                <span class="fontsize-ensurer reset-size5 size5">
                 <span style="font-size:0em;">
                  ​
                 </span>
                </span>
                <span class="reset-textstyle scriptstyle cramped mtight">
                 <span class="mord mathit mtight" style="margin-right:0.10903em;">
                  N
                 </span>
                </span>
               </span>
               <span class="baseline-fix">
                <span class="fontsize-ensurer reset-size5 size5">
                 <span style="font-size:0em;">
                  ​
                 </span>
                </span>
                ​
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
         <span style="top:-0.22999999999999998em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle textstyle uncramped frac-line">
          </span>
         </span>
         <span style="top:-0.677em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle textstyle uncramped">
           <span class="mord textstyle uncramped">
            <span class="mord">
             <span class="mord mathit" style="margin-right:0.22222em;">
              V
             </span>
             <span class="msupsub">
              <span class="vlist">
               <span style="top:0.15em;margin-right:0.05em;margin-left:-0.22222em;">
                <span class="fontsize-ensurer reset-size5 size5">
                 <span style="font-size:0em;">
                  ​
                 </span>
                </span>
                <span class="reset-textstyle scriptstyle cramped mtight">
                 <span class="mord scriptstyle cramped mtight">
                  <span class="mord mathit mtight" style="margin-right:0.02778em;">
                   r
                  </span>
                  <span class="mord mathit mtight">
                   e
                  </span>
                  <span class="mord mathit mtight" style="margin-right:0.10764em;">
                   f
                  </span>
                 </span>
                </span>
               </span>
               <span class="baseline-fix">
                <span class="fontsize-ensurer reset-size5 size5">
                 <span style="font-size:0em;">
                  ​
                 </span>
                </span>
                ​
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
       <span class="mclose sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter">
       </span>
      </span>
     </span>
    </span>
   </span>
  </span>
 </span>
</p>
<p>
 Avec :
</p>
<ul>
 <li>
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <msub>
         <mi>
          V
         </mi>
         <mrow>
          <mi>
           r
          </mi>
          <mi>
           e
          </mi>
          <mi>
           f
          </mi>
         </mrow>
        </msub>
       </mrow>
       <annotation encoding="application/x-tex">
        V_{ref}
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.969438em;vertical-align:-0.286108em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord">
       <span class="mord mathit" style="margin-right:0.22222em;">
        V
       </span>
       <span class="msupsub">
        <span class="vlist">
         <span style="top:0.15em;margin-right:0.05em;margin-left:-0.22222em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord scriptstyle cramped mtight">
            <span class="mord mathit mtight" style="margin-right:0.02778em;">
             r
            </span>
            <span class="mord mathit mtight">
             e
            </span>
            <span class="mord mathit mtight" style="margin-right:0.10764em;">
             f
            </span>
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
  </span>
  : tension de référence du convertisseur
 </li>
 <li>
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <mi>
         N
        </mi>
       </mrow>
       <annotation encoding="application/x-tex">
        N
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.68333em;vertical-align:0em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord mathit" style="margin-right:0.10903em;">
       N
      </span>
     </span>
    </span>
   </span>
  </span>
  : nombre de bit du convertisseur
 </li>
</ul>
<p>
 Il faut donc retenir que, pour ce convertisseur, sa précision est de
 <span class="inlineMath">
  <span class="katex">
   <span class="katex-mathml">
    <math>
     <semantics>
      <mrow>
       <mn>
        4
       </mn>
       <mi mathvariant="normal">
        .
       </mi>
       <mn>
        8
       </mn>
       <mn>
        8
       </mn>
       <mn>
        3
       </mn>
       <mi>
        m
       </mi>
       <mi>
        V
       </mi>
      </mrow>
      <annotation encoding="application/x-tex">
       4.883mV
      </annotation>
     </semantics>
    </math>
   </span>
   <span aria-hidden="true" class="katex-html">
    <span class="strut" style="height:0.68333em;">
    </span>
    <span class="strut bottom" style="height:0.68333em;vertical-align:0em;">
    </span>
    <span class="base textstyle uncramped">
     <span class="mord mathrm">
      4
     </span>
     <span class="mord mathrm">
      .
     </span>
     <span class="mord mathrm">
      8
     </span>
     <span class="mord mathrm">
      8
     </span>
     <span class="mord mathrm">
      3
     </span>
     <span class="mord mathit">
      m
     </span>
     <span class="mord mathit" style="margin-right:0.22222em;">
      V
     </span>
    </span>
   </span>
  </span>
 </span>
 . Donc, si on lui met une tension de
 <span class="inlineMath">
  <span class="katex">
   <span class="katex-mathml">
    <math>
     <semantics>
      <mrow>
       <mn>
        2
       </mn>
       <mi>
        m
       </mi>
       <mi>
        V
       </mi>
      </mrow>
      <annotation encoding="application/x-tex">
       2mV
      </annotation>
     </semantics>
    </math>
   </span>
   <span aria-hidden="true" class="katex-html">
    <span class="strut" style="height:0.68333em;">
    </span>
    <span class="strut bottom" style="height:0.68333em;vertical-align:0em;">
    </span>
    <span class="base textstyle uncramped">
     <span class="mord mathrm">
      2
     </span>
     <span class="mord mathit">
      m
     </span>
     <span class="mord mathit" style="margin-right:0.22222em;">
      V
     </span>
    </span>
   </span>
  </span>
 </span>
 par exemple sur son entrée, le convertisseur sera incapable de la voir et donnera un résultat égal à 0V.
</p>
<h5 id="les-inconvénients">
 <a aria-hidden="true" href="#les-inconvénients">
  <span class="es-autolink-heading">
  </span>
 </a>
 Les inconvénients
</h5>
<p>
 Pour terminer avant de passer à l’utilisation du CNA avec Arduino, je vais vous parler de ses inconvénients. Il en existe trois principaux :
</p>
<ul>
 <li>
  <strong>
   la plage de tension d’entrée
  </strong>
  : le convertisseur analogique de l’Arduino ne peut recevoir à son entrée que des tensions comprises entre 0V et +5V. On verra plus loin comment améliorer la précision du
  <abbr title="Convertisseur Analogique Numérique">
   CAN
  </abbr>
  .
 </li>
 <li>
  <strong>
   la précision
  </strong>
  : la précision du convertisseur est très bonne sauf pour les deux derniers bits de poids faible. On dit alors que la précision est de
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <mo>
         ±
        </mo>
        <mn>
         2
        </mn>
        <mi>
         L
        </mi>
        <mi>
         S
        </mi>
        <mi>
         B
        </mi>
       </mrow>
       <annotation encoding="application/x-tex">
        \pm 2 LSB
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.76666em;vertical-align:-0.08333em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord">
       ±
      </span>
      <span class="mord mathrm">
       2
      </span>
      <span class="mord mathit">
       L
      </span>
      <span class="mord mathit" style="margin-right:0.05764em;">
       S
      </span>
      <span class="mord mathit" style="margin-right:0.05017em;">
       B
      </span>
     </span>
    </span>
   </span>
  </span>
  (à cause du pas de calcul que je viens de vous expliquer).
 </li>
 <li>
  <strong>
   la vitesse de conversion
  </strong>
  : le convertisseur N/A de la carte Arduino n’a pas une très grande vitesse de conversion par rapport à un signal audio par exemple. Ainsi , si l’on convertit un signal audio analogique en numérique grâce à la carte Arduino, on ne pourra entendre que les fréquences en dessous de 10kHz. Dans bien des cas cela peut être suffisant, mais d’en d’autre il faudra utiliser un convertisseur A/N externe (un composant en plus) qui sera plus rapide afin d’obtenir le spectre audio complet d’un signal sonore.
 </li>
</ul>
<h3 id="lecture-analogique-on-y-vient">
 <a aria-hidden="true" href="#lecture-analogique-on-y-vient">
  <span class="es-autolink-heading">
  </span>
 </a>
 Lecture analogique, on y vient…
</h3>
<h4 id="lire-la-tension-sur-une-broche-analogique">
 <a aria-hidden="true" href="#lire-la-tension-sur-une-broche-analogique">
  <span class="es-autolink-heading">
  </span>
 </a>
 Lire la tension sur une broche analogique
</h4>
<p>
 Un truc très sympa avec Arduino, c’est que c’est facile à prendre en main. Et ça se voit une fois de plus avec l’utilisation des convertisseurs numérique -&gt; analogique ! En effet, vous n’avez qu’une seule nouvelle fonction à retenir :
 <code>
  analogRead()
 </code>
 !
</p>
<h5 id="analogreadpin">
 <a aria-hidden="true" href="#analogreadpin">
  <span class="es-autolink-heading">
  </span>
 </a>
 <code>
  analogRead(pin)
 </code>
</h5>
<p>
 Cette fonction va nous permettre de lire la valeur lue sur une entrée analogique de l’Arduino. Elle prend un argument et retourne la valeur lue :
</p>
<ul>
 <li>
  L’argument est le numéro de l’entrée analogique à lire (explication ci-dessous)
 </li>
 <li>
  La valeur retournée (un
  <code>
   int
  </code>
  ) sera le résultat de la conversion analogique- &gt;numérique
 </li>
</ul>
<p>
 Sur une carte Arduino Uno, on retrouve 6
 <abbr title="Convertisseur Analogique Numérique">
  CAN
 </abbr>
 . Ils se trouvent tous du même côté de la carte, là où est écrit "Analog IN" :
</p>
<p>
 <img alt="Positions des entrées analogiques" src="./images/uploaded/tuto-arduino-401-les-entrées-analogiques-de-larduino/positions-des-entrees-analogiques.jpg"/>
</p>
<p>
 Ces 6 entrées analogiques sont numérotées, tout comme les entrées/sorties logiques. Par exemple, pour aller lire la valeur en sortie d’un capteur branché sur le convertisseur de la broche analogique numéro 3, on fera :
 <code>
  valeur = analogRead(3);
 </code>
 .
</p>
<div class="custom-block alert alert-danger">
 <div class="custom-block-body">
  <p>
   Ne confondez pas les entrées analogiques et les entrées numériques ! Elles ont en effet le même numéro pour certaines, mais selon comment on les utilise, la carte Arduino saura si la broche est analogique ou non.
  </p>
 </div>
</div>
<p>
 Mais comme nous sommes des programmeurs intelligents et organisés, on nommera les variables proprement pour bien travailler de la manière suivante :
</p>
<figure>
 <div class="hljs-code-div">
  <div class="hljs-line-numbers">
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
  </div>
  <pre><code class="hljs language-cpp"><span class="hljs-comment">// broche analogique 3 OU broche numérique 3</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> monCapteur = <span class="hljs-number">3</span>;

<span class="hljs-comment">// la valeur lue sera comprise entre 0 et 1023</span>
<span class="hljs-keyword">int</span> valeurLue = <span class="hljs-number">0</span>;

<span class="hljs-comment">// fonction setup()</span>
{

}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-comment">// on mesure la tension du capteur sur la broche analogique 3</span>
    valeurLue = analogRead(monCapteur);

    <span class="hljs-comment">// du code et encore du code ...</span>
}
</code></pre>
 </div>
 <figcaption>
  Mesure simple d’une entrée analogique
 </figcaption>
</figure>
<h4 id="convertir-la-valeur-lue">
 <a aria-hidden="true" href="#convertir-la-valeur-lue">
  <span class="es-autolink-heading">
  </span>
 </a>
 Convertir la valeur lue
</h4>
<p>
 Bon c’est bien, on a une valeur retournée par la fonction comprise entre 0 et 1023, mais ça ne nous donne pas vraiment une tension ça ! Il va être temps de faire un peu de code (et de math) pour
 <strong>
  convertir
 </strong>
 cette valeur… Et si vous réfléchissiez un tout petit peu pour trouver la solution sans moi ?
 <img alt="^^" class="smiley" src="./static/smileys/hihi.png"/>
 … Trouvée ?
</p>
<h5 id="conversion">
 <a aria-hidden="true" href="#conversion">
  <span class="es-autolink-heading">
  </span>
 </a>
 Conversion
</h5>
<p>
 Comme je suis super sympa je vais vous donner la réponse, avec en prime : une explication ! Récapitulons. Nous avons une valeur entre 0 et 1023. Cette valeur est l’image de la tension mesurée, elle-même comprise entre 0V et +5V. Nous avons ensuite déterminé que le pas du convertisseur était de 4.88mV par unité. Donc, deux méthodes sont disponibles :
</p>
<ul>
 <li>
  avec un simple produit en croix
 </li>
 <li>
  en utilisant le pas calculé plus tôt
 </li>
</ul>
<p>
 <strong>
  Exemple :
 </strong>
 La mesure nous retourne une valeur de 458.
</p>
<ul>
 <li>
  Avec un produit en croix on obtient :
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <mfrac>
         <mrow>
          <mn>
           4
          </mn>
          <mn>
           5
          </mn>
          <mn>
           8
          </mn>
          <mo>
           ×
          </mo>
          <mn>
           5
          </mn>
         </mrow>
         <mrow>
          <mn>
           1
          </mn>
          <mn>
           0
          </mn>
          <mn>
           2
          </mn>
          <mn>
           3
          </mn>
         </mrow>
        </mfrac>
        <mo>
         =
        </mo>
        <mn>
         2
        </mn>
        <mi mathvariant="normal">
         .
        </mi>
        <mn>
         2
        </mn>
        <mn>
         3
        </mn>
        <mn>
         5
        </mn>
        <mi>
         V
        </mi>
       </mrow>
       <annotation encoding="application/x-tex">
        \frac{458 \times 5}{1023} = 2.235V
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.845108em;">
     </span>
     <span class="strut bottom" style="height:1.190108em;vertical-align:-0.345em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord reset-textstyle textstyle uncramped">
       <span class="mopen sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter">
       </span>
       <span class="mfrac">
        <span class="vlist">
         <span style="top:0.345em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle cramped mtight">
           <span class="mord scriptstyle cramped mtight">
            <span class="mord mathrm mtight">
             1
            </span>
            <span class="mord mathrm mtight">
             0
            </span>
            <span class="mord mathrm mtight">
             2
            </span>
            <span class="mord mathrm mtight">
             3
            </span>
           </span>
          </span>
         </span>
         <span style="top:-0.22999999999999998em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle textstyle uncramped frac-line">
          </span>
         </span>
         <span style="top:-0.394em;">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          <span class="reset-textstyle scriptstyle uncramped mtight">
           <span class="mord scriptstyle uncramped mtight">
            <span class="mord mathrm mtight">
             4
            </span>
            <span class="mord mathrm mtight">
             5
            </span>
            <span class="mord mathrm mtight">
             8
            </span>
            <span class="mbin mtight">
             ×
            </span>
            <span class="mord mathrm mtight">
             5
            </span>
           </span>
          </span>
         </span>
         <span class="baseline-fix">
          <span class="fontsize-ensurer reset-size5 size5">
           <span style="font-size:0em;">
            ​
           </span>
          </span>
          ​
         </span>
        </span>
       </span>
       <span class="mclose sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter">
       </span>
      </span>
      <span class="mrel">
       =
      </span>
      <span class="mord mathrm">
       2
      </span>
      <span class="mord mathrm">
       .
      </span>
      <span class="mord mathrm">
       2
      </span>
      <span class="mord mathrm">
       3
      </span>
      <span class="mord mathrm">
       5
      </span>
      <span class="mord mathit" style="margin-right:0.22222em;">
       V
      </span>
     </span>
    </span>
   </span>
  </span>
  ;
 </li>
 <li>
  En utilisant le pas calculé plus haut on obtient :
  <span class="inlineMath">
   <span class="katex">
    <span class="katex-mathml">
     <math>
      <semantics>
       <mrow>
        <mn>
         4
        </mn>
        <mn>
         5
        </mn>
        <mn>
         8
        </mn>
        <mo>
         ×
        </mo>
        <mn>
         4
        </mn>
        <mi mathvariant="normal">
         .
        </mi>
        <mn>
         8
        </mn>
        <mn>
         8
        </mn>
        <mo>
         =
        </mo>
        <mn>
         2
        </mn>
        <mi mathvariant="normal">
         .
        </mi>
        <mn>
         2
        </mn>
        <mn>
         3
        </mn>
        <mn>
         5
        </mn>
        <mi>
         V
        </mi>
       </mrow>
       <annotation encoding="application/x-tex">
        458 \times 4.88 = 2.235V
       </annotation>
      </semantics>
     </math>
    </span>
    <span aria-hidden="true" class="katex-html">
     <span class="strut" style="height:0.68333em;">
     </span>
     <span class="strut bottom" style="height:0.76666em;vertical-align:-0.08333em;">
     </span>
     <span class="base textstyle uncramped">
      <span class="mord mathrm">
       4
      </span>
      <span class="mord mathrm">
       5
      </span>
      <span class="mord mathrm">
       8
      </span>
      <span class="mbin">
       ×
      </span>
      <span class="mord mathrm">
       4
      </span>
      <span class="mord mathrm">
       .
      </span>
      <span class="mord mathrm">
       8
      </span>
      <span class="mord mathrm">
       8
      </span>
      <span class="mrel">
       =
      </span>
      <span class="mord mathrm">
       2
      </span>
      <span class="mord mathrm">
       .
      </span>
      <span class="mord mathrm">
       2
      </span>
      <span class="mord mathrm">
       3
      </span>
      <span class="mord mathrm">
       5
      </span>
      <span class="mord mathit" style="margin-right:0.22222em;">
       V
      </span>
     </span>
    </span>
   </span>
  </span>
  .
 </li>
</ul>
<div class="custom-block alert alert-warning">
 <div class="custom-block-body">
  <p>
   Les deux méthodes sont valides, et donnent les mêmes résultats. La première à l’avantage de faire ressortir l’aspect "physique" des choses en utilisant les tensions et la résolution du convertisseur.
  </p>
 </div>
</div>
<p>
 Voici une façon de le traduire en code :
</p>
<figure>
 <div class="hljs-code-div">
  <div class="hljs-line-numbers">
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
  </div>
  <pre><code class="hljs language-cpp"><span class="hljs-comment">// variable stockant la valeur lue sur le CAN</span>
<span class="hljs-keyword">int</span> valeurLue;
<span class="hljs-comment">// résultat stockant la conversion de valeurLue en Volts</span>
<span class="hljs-keyword">float</span> tension;

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span>
</span>{
    valeurLue = analogRead(uneBrocheAvecUnCapteur);
    <span class="hljs-comment">// produit en croix, ATTENTION, donne un résultat en mV !</span>
    tension = valeurLue * <span class="hljs-number">4.88</span>;
    <span class="hljs-comment">// formule à aspect "physique", donne un résultat en V !</span>
    tension = valeurLue * (<span class="hljs-number">5</span> / <span class="hljs-number">1023</span>);
}
</code></pre>
 </div>
 <figcaption>
  Conversion d’une mesure en tension
 </figcaption>
</figure>
<div class="custom-block alert alert-info">
 <div class="custom-block-body">
  <p>
   Mais il n’existe pas une méthode plus "automatique" que faire ce produit en croix ?
  </p>
 </div>
</div>
<p>
 Eh bien SI ! En effet, l’équipe Arduino a prévu que vous aimeriez faire des conversions facilement et donc une fonction est présente dans l’environnement Arduino afin de vous faciliter la tâche ! Cette fonction se nomme
 <code>
  map()
 </code>
 . À partir d’une valeur d’entrée, d’un intervalle d’entrée et d’un intervalle de sortie, la fonction vous retourne la valeur équivalente comprise entre le deuxième intervalle. Voici son prototype de manière plus explicite :
</p>
<figure>
 <div class="hljs-code-div">
  <div class="hljs-line-numbers">
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
  </div>
  <pre><code class="hljs language-cpp">sortie = <span class="hljs-built_in">map</span>(valeur_d_entree,
    valeur_extreme_basse_d_entree,
    valeur_extreme_haute_d_entree,
    valeur_extreme_basse_de_sortie,
    valeur_extreme_haute_de_sortie
);
<span class="hljs-comment">// cette fonction retourne la valeur calculée équivalente</span>
<span class="hljs-comment">// entre les deux intervalles de sortie</span>
</code></pre>
 </div>
 <figcaption>
  La fonction
  <code>
   map
  </code>
 </figcaption>
</figure>
<p>
 Prenons notre exemple précédent. La valeur lue se nomme "valeurLue". L’intervalle d’entrée est la gamme de la conversion allant de 0 à 1023. La gamme (ou intervalle) de "sortie" sera la tension réelle à l’entrée du micro-contrôleur, donc entre 0 et 5V. En utilisant cette fonction nous écrirons donc :
</p>
<figure>
 <div class="hljs-code-div">
  <div class="hljs-line-numbers">
   <span>
   </span>
   <span>
   </span>
  </div>
  <pre><code class="hljs language-cpp"><span class="hljs-comment">// conversion de la valeur lue en tension en mV</span>
tension = <span class="hljs-built_in">map</span>(valeurLue, <span class="hljs-number">0</span>, <span class="hljs-number">1023</span>, <span class="hljs-number">0</span>, <span class="hljs-number">5000</span>);
</code></pre>
 </div>
 <figcaption>
  Utilisation de la fonction
  <code>
   map
  </code>
 </figcaption>
</figure>
<div class="custom-block alert alert-info">
 <div class="custom-block-body">
  <p>
   Pourquoi tu utilises 5000mV au lieu de mettre simplement 5V ?
  </p>
 </div>
</div>
<p>
 Pour la simple et bonne raison que la fonction
 <code>
  map
 </code>
 utilise des entiers. Si j’utilisais 5V au lieu de 5000mV j’aurais donc seulement 6 valeurs possibles pour ma tension (0, 1, 2, 3, 4 et 5V). Pour terminer le calcul, il sera donc judicieux de rajouter une dernière ligne :
</p>
<div class="hljs-code-div">
 <div class="hljs-line-numbers">
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
  <span>
  </span>
 </div>
 <pre><code class="hljs language-cpp"><span class="hljs-comment">// conversion de la valeur lue en tension en mV</span>
tension = <span class="hljs-built_in">map</span>(valeurLue, <span class="hljs-number">0</span>, <span class="hljs-number">1023</span>, <span class="hljs-number">0</span>, <span class="hljs-number">5000</span>);
<span class="hljs-comment">// conversion des mV en V</span>
tension = tension / <span class="hljs-number">1000</span>;
</code></pre>
</div>
<p>
 Au retour de la liaison série (seulement si on envoie les valeurs par la liaison série) on aurait donc (valeurs à titre d’exemple) :
</p>
<div class="hljs-code-div">
 <div class="hljs-line-numbers">
  <span>
  </span>
  <span>
  </span>
 </div>
 <pre><code class="hljs language-ini"><span class="hljs-attr">valeurLue</span> = <span class="hljs-number">458</span>
<span class="hljs-attr">tension</span> = <span class="hljs-number">2.290</span>V
</code></pre>
</div>
<div class="custom-block alert alert-warning">
 <div class="custom-block-body">
  <p>
   On est moins précis que la tension calculée plus haut, mais on peut jouer en précision en modifiant les valeurs de sortie de la fonction map(). Ou bien garder le calcul théorique et le placer dans une "fonction maison".
  </p>
 </div>
</div>
<h3 id="exemple-dutilisation">
 <a aria-hidden="true" href="#exemple-dutilisation">
  <span class="es-autolink-heading">
  </span>
 </a>
 Exemple d’utilisation
</h3>
<h4 id="le-potentiomètre">
 <a aria-hidden="true" href="#le-potentiomètre">
  <span class="es-autolink-heading">
  </span>
 </a>
 Le potentiomètre
</h4>
<div class="custom-block alert alert-info">
 <div class="custom-block-body">
  <p>
   Qu’est-ce que c’est que cette bête-là encore ?
  </p>
 </div>
</div>
<p>
 Le
 <strong>
  potentiomètre
 </strong>
 (ou "potar" pour les (très) intimes) est un composant très fréquemment employé en électronique. On le retrouve aussi sous le nom de résistance variable. Comme ce dernier nom l’indique si bien, un potentiomètre nous permet
 <em>
  entre autres
 </em>
 de réaliser une résistance variable. En effet, on retrouve deux applications principales que je vais vous présenter juste après. Avant toute chose, voici le symbole du potentiomètre :
</p>
<p>
 <img alt="Symbole du potentiomètre" src="./images/uploaded/tuto-arduino-401-les-entrées-analogiques-de-larduino/symbole-du-potentiometre.jpg"/>
</p>
<h5 id="cas-n°1-le-pont-diviseur-de-tension">
 <a aria-hidden="true" href="#cas-n°1-le-pont-diviseur-de-tension">
  <span class="es-autolink-heading">
  </span>
 </a>
 Cas n°1 : le pont diviseur de tension
</h5>
<p>
 On y remarque une première chose importante, le potentiomètre a trois broches. Deux servent à borner les tensions maximum (A) et minimum (B) que l’on peut obtenir à ses bornes, et la troisième © est reliée à un curseur mobile qui donne la tension variable obtenue entre les bornes précédemment fixées. Ainsi, on peut représenter notre premier cas d’utilisation comme un "diviseur de tension réglable". En effet, lorsque vous déplacez le curseur, en interne cela équivaut à modifier le point milieu. En termes électroniques, vous pouvez imaginer avoir deux résistances en série (R1 et R2 pour être original). Lorsque vous déplacez votre curseur vers la borne basse, R1 augmente alors que R2 diminue et lorsque vous déplacez votre curseur vers la borne haute, R2 augmente alors que R1 diminue. Voici un tableau montrant quelques cas de figure de manière schématique :
</p>
<div class="text-center">
 <figure>
  <div class="table-wrapper">
   <table class=" table table-bordered table-striped">
    <thead>
     <tr>
      <th>
       Schéma équivalent
      </th>
      <th>
       Position du curseur
      </th>
      <th>
       Tension sur la broche C
      </th>
     </tr>
    </thead>
    <tbody>
     <tr>
      <td>
       <img alt="Curseur 50/50" src="./images/uploaded/tuto-arduino-401-les-entrées-analogiques-de-larduino/curseur-5050.jpg"/>
      </td>
      <td>
       Curseur à
       <strong>
        la moitié
       </strong>
      </td>
      <td>
       <span class="inlineMath">
        <span class="katex">
         <span class="katex-mathml">
          <math>
           <semantics>
            <mrow>
             <msub>
              <mi>
               V
              </mi>
              <mrow>
               <mi>
                s
               </mi>
               <mi>
                i
               </mi>
               <mi>
                g
               </mi>
               <mi>
                n
               </mi>
               <mi>
                a
               </mi>
               <mi>
                l
               </mi>
              </mrow>
             </msub>
             <mo>
              =
             </mo>
             <mo>
              (
             </mo>
             <mn>
              1
             </mn>
             <mo>
              −
             </mo>
             <mfrac>
              <mrow>
               <mn>
                5
               </mn>
               <mn>
                0
               </mn>
              </mrow>
              <mrow>
               <mn>
                1
               </mn>
               <mn>
                0
               </mn>
               <mn>
                0
               </mn>
              </mrow>
             </mfrac>
             <mo>
              )
             </mo>
             <mo>
              ×
             </mo>
             <mn>
              5
             </mn>
             <mo>
              =
             </mo>
             <mn>
              2
             </mn>
             <mi mathvariant="normal">
              .
             </mi>
             <mn>
              5
             </mn>
             <mi>
              V
             </mi>
            </mrow>
            <annotation encoding="application/x-tex">
             V_{signal} = (1-\frac{50}{100})\times 5 = 2.5 V
            </annotation>
           </semantics>
          </math>
         </span>
         <span aria-hidden="true" class="katex-html">
          <span class="strut" style="height:0.845108em;">
          </span>
          <span class="strut bottom" style="height:1.190108em;vertical-align:-0.345em;">
          </span>
          <span class="base textstyle uncramped">
           <span class="mord">
            <span class="mord mathit" style="margin-right:0.22222em;">
             V
            </span>
            <span class="msupsub">
             <span class="vlist">
              <span style="top:0.15em;margin-right:0.05em;margin-left:-0.22222em;">
               <span class="fontsize-ensurer reset-size5 size5">
                <span style="font-size:0em;">
                 ​
                </span>
               </span>
               <span class="reset-textstyle scriptstyle cramped mtight">
                <span class="mord scriptstyle cramped mtight">
                 <span class="mord mathit mtight">
                  s
                 </span>
                 <span class="mord mathit mtight">
                  i
                 </span>
                 <span class="mord mathit mtight" style="margin-right:0.03588em;">
                  g
                 </span>
                 <span class="mord mathit mtight">
                  n
                 </span>
                 <span class="mord mathit mtight">
                  a
                 </span>
                 <span class="mord mathit mtight" style="margin-right:0.01968em;">
                  l
                 </span>
                </span>
               </span>
              </span>
              <span class="baseline-fix">
               <span class="fontsize-ensurer reset-size5 size5">
                <span style="font-size:0em;">
                 ​
                </span>
               </span>
               ​
              </span>
             </span>
            </span>
           </span>
           <span class="mrel">
            =
           </span>
           <span class="mopen">
            (
           </span>
           <span class="mord mathrm">
            1
           </span>
           <span class="mbin">
            −
           </span>
           <span class="mord reset-textstyle textstyle uncramped">
            <span class="mopen sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter">
            </span>
            <span class="mfrac">
             <span class="vlist">
              <span style="top:0.345em;">
               <span class="fontsize-ensurer reset-size5 size5">
                <span style="font-size:0em;">
                 ​
                </span>
               </span>
               <span class="reset-textstyle scriptstyle cramped mtight">
                <span class="mord scriptstyle cramped mtight">
                 <span class="mord mathrm mtight">
                  1
                 </span>
                 <span class="mord mathrm mtight">
                  0
                 </span>
                 <span class="mord mathrm mtight">
                  0
                 </span>
                </span>
               </span>
              </span>
              <span style="top:-0.22999999999999998em;">
               <span class="fontsize-ensurer reset-size5 size5">
                <span style="font-size:0em;">
                 ​
                </span>
               </span>
               <span class="reset-textstyle textstyle uncramped frac-line">
               </span>
              </span>
              <span style="top:-0.394em;">
               <span class="fontsize-ensurer reset-size5 size5">
                <span style="font-size:0em;">
                 ​
                </span>
               </span>
               <span class="reset-textstyle scriptstyle uncramped mtight">
                <span class="mord scriptstyle uncramped mtight">
                 <span class="mord mathrm mtight">
                  5
                 </span>
                 <span class="mord mathrm mtight">
                  0
                 </span>
                </span>
               </span>
              </span>
              <span class="baseline-fix">
               <span class="fontsize-ensurer reset-size5 size5">
                <span style="font-size:0em;">
                 ​
                </span>
               </span>
               ​
              </span>
             </span>
            </span>
            <span class="mclose sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter">
            </span>
           </span>
           <span class="mclose">
            )
           </span>
           <span class="mbin">
            ×
           </span>
           <span class="mord mathrm">
            5
           </span>
           <span class="mrel">
            =
           </span>
           <span class="mord mathrm">
            2
           </span>
           <span class="mord mathrm">
            .
           </span>
           <span class="mord mathrm">
            5
           </span>
           <span class="mord mathit" style="margin-right:0.22222em;">
            V
           </span>
          </span>
         </span>
        </span>
       </span>
      </td>
     </tr>
     <tr>
      <td>
       <img alt="Curseur 25/75" src="./images/uploaded/tuto-arduino-401-les-entrées-analogiques-de-larduino/curseur-2575.jpg"/>
      </td>
      <td>
       Curseur à
       <strong>
        25% du départ
       </strong>
      </td>
      <td>
       <span class="inlineMath">
        <span class="katex">
         <span class="katex-mathml">
          <math>
           <semantics>
            <mrow>
             <msub>
              <mi>
               V
              </mi>
              <mrow>
               <mi>
                s
               </mi>
               <mi>
                i
               </mi>
               <mi>
                g
               </mi>
               <mi>
                n
               </mi>
               <mi>
                a
               </mi>
               <mi>
                l
               </mi>
              </mrow>
             </msub>
             <mo>
              =
             </mo>
             <mo>
              (
             </mo>
             <mn>
              1
             </mn>
             <mo>
              −
             </mo>
             <mfrac>
              <mrow>
               <mn>
                2
               </mn>
               <mn>
                5
               </mn>
              </mrow>
              <mrow>
               <mn>
                1
               </mn>
               <mn>
                0
               </mn>
               <mn>
                0
               </mn>
              </mrow>
             </mfrac>
             <mo>
              )
             </mo>
             <mo>
              ×
             </mo>
             <mn>
              5
             </mn>
             <mo>
              =
             </mo>
             <mn>
              3
             </mn>
             <mi mathvariant="normal">
              .
             </mi>
             <mn>
              7
             </mn>
             <mn>
              5
             </mn>
             <mi>
              V
             </mi>
            </mrow>
            <annotation encoding="application/x-tex">
             V_{signal} = (1-\frac{25}{100})\times 5 = 3.75 V
            </annotation>
           </semantics>
          </math>
         </span>
         <span aria-hidden="true" class="katex-html">
          <span class="strut" style="height:0.845108em;">
          </span>
          <span class="strut bottom" style="height:1.190108em;vertical-align:-0.345em;">
          </span>
          <span class="base textstyle uncramped">
           <span class="mord">
            <span class="mord mathit" style="margin-right:0.22222em;">
             V
            </span>
            <span class="msupsub">
             <span class="vlist">
              <span style="top:0.15em;margin-right:0.05em;margin-left:-0.22222em;">
               <span class="fontsize-ensurer reset-size5 size5">
                <span style="font-size:0em;">
                 ​
                </span>
               </span>
               <span class="reset-textstyle scriptstyle cramped mtight">
                <span class="mord scriptstyle cramped mtight">
                 <span class="mord mathit mtight">
                  s
                 </span>
                 <span class="mord mathit mtight">
                  i
                 </span>
                 <span class="mord mathit mtight" style="margin-right:0.03588em;">
                  g
                 </span>
                 <span class="mord mathit mtight">
                  n
                 </span>
                 <span class="mord mathit mtight">
                  a
                 </span>
                 <span class="mord mathit mtight" style="margin-right:0.01968em;">
                  l
                 </span>
                </span>
               </span>
              </span>
              <span class="baseline-fix">
               <span class="fontsize-ensurer reset-size5 size5">
                <span style="font-size:0em;">
                 ​
                </span>
               </span>
               ​
              </span>
             </span>
            </span>
           </span>
           <span class="mrel">
            =
           </span>
           <span class="mopen">
            (
           </span>
           <span class="mord mathrm">
            1
           </span>
           <span class="mbin">
            −
           </span>
           <span class="mord reset-textstyle textstyle uncramped">
            <span class="mopen sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter">
            </span>
            <span class="mfrac">
             <span class="vlist">
              <span style="top:0.345em;">
               <span class="fontsize-ensurer reset-size5 size5">
                <span style="font-size:0em;">
                 ​
                </span>
               </span>
               <span class="reset-textstyle scriptstyle cramped mtight">
                <span class="mord scriptstyle cramped mtight">
                 <span class="mord mathrm mtight">
                  1
                 </span>
                 <span class="mord mathrm mtight">
                  0
                 </span>
                 <span class="mord mathrm mtight">
                  0
                 </span>
                </span>
               </span>
              </span>
              <span style="top:-0.22999999999999998em;">
               <span class="fontsize-ensurer reset-size5 size5">
                <span style="font-size:0em;">
                 ​
                </span>
               </span>
               <span class="reset-textstyle textstyle uncramped frac-line">
               </span>
              </span>
              <span style="top:-0.394em;">
               <span class="fontsize-ensurer reset-size5 size5">
                <span style="font-size:0em;">
                 ​
                </span>
               </span>
               <span class="reset-textstyle scriptstyle uncramped mtight">
                <span class="mord scriptstyle uncramped mtight">
                 <span class="mord mathrm mtight">
                  2
                 </span>
                 <span class="mord mathrm mtight">
                  5
                 </span>
                </span>
               </span>
              </span>
              <span class="baseline-fix">
               <span class="fontsize-ensurer reset-size5 size5">
                <span style="font-size:0em;">
                 ​
                </span>
               </span>
               ​
              </span>
             </span>
            </span>
            <span class="mclose sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter">
            </span>
           </span>
           <span class="mclose">
            )
           </span>
           <span class="mbin">
            ×
           </span>
           <span class="mord mathrm">
            5
           </span>
           <span class="mrel">
            =
           </span>
           <span class="mord mathrm">
            3
           </span>
           <span class="mord mathrm">
            .
           </span>
           <span class="mord mathrm">
            7
           </span>
           <span class="mord mathrm">
            5
           </span>
           <span class="mord mathit" style="margin-right:0.22222em;">
            V
           </span>
          </span>
         </span>
        </span>
       </span>
      </td>
     </tr>
     <tr>
      <td>
       <img alt="Curseur 75/25" src="./images/uploaded/tuto-arduino-401-les-entrées-analogiques-de-larduino/curseur-7525.jpg"/>
      </td>
      <td>
       Curseur à
       <strong>
        75% du départ
       </strong>
      </td>
      <td>
       <span class="inlineMath">
        <span class="katex">
         <span class="katex-mathml">
          <math>
           <semantics>
            <mrow>
             <msub>
              <mi>
               V
              </mi>
              <mrow>
               <mi>
                s
               </mi>
               <mi>
                i
               </mi>
               <mi>
                g
               </mi>
               <mi>
                n
               </mi>
               <mi>
                a
               </mi>
               <mi>
                l
               </mi>
              </mrow>
             </msub>
             <mo>
              =
             </mo>
             <mo>
              (
             </mo>
             <mn>
              1
             </mn>
             <mo>
              −
             </mo>
             <mfrac>
              <mrow>
               <mn>
                7
               </mn>
               <mn>
                5
               </mn>
              </mrow>
              <mrow>
               <mn>
                1
               </mn>
               <mn>
                0
               </mn>
               <mn>
                0
               </mn>
              </mrow>
             </mfrac>
             <mo>
              )
             </mo>
             <mo>
              ×
             </mo>
             <mn>
              5
             </mn>
             <mo>
              =
             </mo>
             <mn>
              1
             </mn>
             <mi mathvariant="normal">
              .
             </mi>
             <mn>
              2
             </mn>
             <mn>
              5
             </mn>
             <mi>
              V
             </mi>
            </mrow>
            <annotation encoding="application/x-tex">
             V_{signal} = (1-\frac{75}{100})\times 5 = 1.25 V
            </annotation>
           </semantics>
          </math>
         </span>
         <span aria-hidden="true" class="katex-html">
          <span class="strut" style="height:0.845108em;">
          </span>
          <span class="strut bottom" style="height:1.190108em;vertical-align:-0.345em;">
          </span>
          <span class="base textstyle uncramped">
           <span class="mord">
            <span class="mord mathit" style="margin-right:0.22222em;">
             V
            </span>
            <span class="msupsub">
             <span class="vlist">
              <span style="top:0.15em;margin-right:0.05em;margin-left:-0.22222em;">
               <span class="fontsize-ensurer reset-size5 size5">
                <span style="font-size:0em;">
                 ​
                </span>
               </span>
               <span class="reset-textstyle scriptstyle cramped mtight">
                <span class="mord scriptstyle cramped mtight">
                 <span class="mord mathit mtight">
                  s
                 </span>
                 <span class="mord mathit mtight">
                  i
                 </span>
                 <span class="mord mathit mtight" style="margin-right:0.03588em;">
                  g
                 </span>
                 <span class="mord mathit mtight">
                  n
                 </span>
                 <span class="mord mathit mtight">
                  a
                 </span>
                 <span class="mord mathit mtight" style="margin-right:0.01968em;">
                  l
                 </span>
                </span>
               </span>
              </span>
              <span class="baseline-fix">
               <span class="fontsize-ensurer reset-size5 size5">
                <span style="font-size:0em;">
                 ​
                </span>
               </span>
               ​
              </span>
             </span>
            </span>
           </span>
           <span class="mrel">
            =
           </span>
           <span class="mopen">
            (
           </span>
           <span class="mord mathrm">
            1
           </span>
           <span class="mbin">
            −
           </span>
           <span class="mord reset-textstyle textstyle uncramped">
            <span class="mopen sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter">
            </span>
            <span class="mfrac">
             <span class="vlist">
              <span style="top:0.345em;">
               <span class="fontsize-ensurer reset-size5 size5">
                <span style="font-size:0em;">
                 ​
                </span>
               </span>
               <span class="reset-textstyle scriptstyle cramped mtight">
                <span class="mord scriptstyle cramped mtight">
                 <span class="mord mathrm mtight">
                  1
                 </span>
                 <span class="mord mathrm mtight">
                  0
                 </span>
                 <span class="mord mathrm mtight">
                  0
                 </span>
                </span>
               </span>
              </span>
              <span style="top:-0.22999999999999998em;">
               <span class="fontsize-ensurer reset-size5 size5">
                <span style="font-size:0em;">
                 ​
                </span>
               </span>
               <span class="reset-textstyle textstyle uncramped frac-line">
               </span>
              </span>
              <span style="top:-0.394em;">
               <span class="fontsize-ensurer reset-size5 size5">
                <span style="font-size:0em;">
                 ​
                </span>
               </span>
               <span class="reset-textstyle scriptstyle uncramped mtight">
                <span class="mord scriptstyle uncramped mtight">
                 <span class="mord mathrm mtight">
                  7
                 </span>
                 <span class="mord mathrm mtight">
                  5
                 </span>
                </span>
               </span>
              </span>
              <span class="baseline-fix">
               <span class="fontsize-ensurer reset-size5 size5">
                <span style="font-size:0em;">
                 ​
                </span>
               </span>
               ​
              </span>
             </span>
            </span>
            <span class="mclose sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter">
            </span>
           </span>
           <span class="mclose">
            )
           </span>
           <span class="mbin">
            ×
           </span>
           <span class="mord mathrm">
            5
           </span>
           <span class="mrel">
            =
           </span>
           <span class="mord mathrm">
            1
           </span>
           <span class="mord mathrm">
            .
           </span>
           <span class="mord mathrm">
            2
           </span>
           <span class="mord mathrm">
            5
           </span>
           <span class="mord mathit" style="margin-right:0.22222em;">
            V
           </span>
          </span>
         </span>
        </span>
       </span>
      </td>
     </tr>
    </tbody>
   </table>
  </div>
  <figcaption>
   Illustrations de la position du curseur et sa tension résultante
  </figcaption>
 </figure>
</div>
<div class="custom-block alert alert-primary">
 <div class="custom-block-body">
  <p>
   Si vous souhaitez avoir plus d’informations sur les résistances et leurs associations ainsi que sur les potentiomètres, je vous conseille d’aller jeter un œil sur
   <a href="http://fr.openclassrooms.com/sciences/cours/l-electronique-de-zero/resistance-et-resistor">
    ce chapitre
   </a>
   .
   <img alt=";)" class="smiley" src="./static/smileys/clin.png"/>
  </p>
 </div>
</div>
<h5 id="cas-n°2-la-résistance-variable">
 <a aria-hidden="true" href="#cas-n°2-la-résistance-variable">
  <span class="es-autolink-heading">
  </span>
 </a>
 Cas n°2 : la résistance variable
</h5>
<p>
 Le deuxième cas d’utilisation du potentiomètre est la
 <strong>
  résistance variable
 </strong>
 . Cette configuration est très simple, il suffit d’utiliser le potentiomètre comme une simple résistance dont les bornes sont A et C ou B et C. On pourra alors faire varier la valeur ohmique de la résistance grâce à l’axe du potentiomètre.
</p>
<div class="custom-block alert alert-warning">
 <div class="custom-block-body">
  <p>
   Attention, il existe des potentiomètres
   <strong>
    linéaires
   </strong>
   (la valeur de la tension évolue de manière proportionnelle au déplacement du curseur), mais aussi des potentiomètres
   <strong>
    logarithmique/anti-logarithmique
   </strong>
   (la valeur de la tension évolue de manière logarithmique ou anti-logarithmique par rapport à la position du curseur). Choisissez-en dont un qui est linéaire si vous souhaitez avoir une proportionnalité.
  </p>
 </div>
</div>
<h4 id="utilisation-avec-arduino">
 <a aria-hidden="true" href="#utilisation-avec-arduino">
  <span class="es-autolink-heading">
  </span>
 </a>
 Utilisation avec Arduino
</h4>
<p>
 Vous allez voir que l’utilisation avec Arduino n’est pas vraiment compliquée. Il va nous suffire de raccorder les alimentations sur les bornes extrêmes du potentiomètre, puis de relier la broche du milieu sur une entrée analogique de la carte Arduino :
</p>
<p>
 <img alt="Potentiomètre - Schéma" src="./images/uploaded/tuto-arduino-401-les-entrées-analogiques-de-larduino/potentiometre-schema.png"/>
</p>
<p>
 <img alt="Potentiomètre - Montage" src="./images/uploaded/tuto-arduino-401-les-entrées-analogiques-de-larduino/potentiometre-montage.png"/>
</p>
<p>
 Une fois le raccordement fait, nous allons faire un petit programme pour tester cela. Ce programme va simplement effectuer une mesure de la tension obtenue sur le potentiomètre, puis envoyer la valeur lue sur la liaison série (ça nous fera réviser
 <img alt="^^" class="smiley" src="./static/smileys/hihi.png"/>
 ). Dans l’ordre, voici les choses à faire :
</p>
<ul>
 <li>
  Déclarer la broche analogique utilisée (pour faire du code propre
 </li>
 <li>
  Mesurer la valeur
 </li>
 <li>
  L’afficher !
 </li>
</ul>
<p>
 Je vous laisse chercher ? Aller, au boulot !
 <img alt=":diable:" class="smiley" src="./static/smileys/diable.png"/>
 … Voici la correction, c’est le programme que j’ai fait, peut-être que le vôtre sera mieux :
</p>
<figure>
 <div class="hljs-code-div">
  <div class="hljs-line-numbers">
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
  </div>
  <pre><code class="hljs language-cpp"><span class="hljs-comment">// le potentiomètre, branché sur la broche analogique 0</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> potar = <span class="hljs-number">0</span>;
<span class="hljs-comment">// variable pour stocker la valeur lue après conversion</span>
<span class="hljs-keyword">int</span> valeurLue;
<span class="hljs-comment">// on convertit cette valeur en une tension</span>
<span class="hljs-keyword">float</span> tension;

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-comment">// on se contente de démarrer la liaison série</span>
    Serial.begin(<span class="hljs-number">9600</span>);
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-comment">// on convertit en nombre binaire la tension lue en sortie du potentiomètre</span>
    valeurLue = analogRead(potar);

    <span class="hljs-comment">// on traduit la valeur brute en tension (produit en croix)</span>
    tension = valeurLue * <span class="hljs-number">5.0</span> / <span class="hljs-number">1023</span>;

    <span class="hljs-comment">// on affiche la valeur lue sur la liaison série</span>
    Serial.print(<span class="hljs-string">"valeurLue = "</span>);
    Serial.println(valeurLue);

    <span class="hljs-comment">// on affiche la tension calculée</span>
    Serial.print(<span class="hljs-string">"Tension = "</span>);
    Serial.print(tension,<span class="hljs-number">2</span>);
    Serial.println(<span class="hljs-string">" V"</span>);

    <span class="hljs-comment">// on saute une ligne entre deux affichages</span>
    Serial.println();
    <span class="hljs-comment">// on attend une demi-seconde pour que l'affichage ne soit pas trop rapide</span>
    delay(<span class="hljs-number">500</span>);
}
</code></pre>
 </div>
 <figcaption>
  Voltmètre simple
 </figcaption>
</figure>
<p>
 Vous venez de créer votre premier voltmètre !
 <img alt=":D" class="smiley" src="./static/smileys/heureux.png"/>
</p>
<h3 id="une-meilleure-précision">
 <a aria-hidden="true" href="#une-meilleure-précision">
  <span class="es-autolink-heading">
  </span>
 </a>
 Une meilleure précision ?
</h3>
<div class="custom-block alert alert-info">
 <div class="custom-block-body">
  <p>
   Est-il possible d’améliorer la précision du convertisseur ?
  </p>
 </div>
</div>
<p>
 Voilà une question intéressante à laquelle je répondrai qu’il existe deux solutions plus ou moins faciles à mettre en œuvre.
</p>
<h4 id="solution-1-modifier-la-plage-dentrée-du-convertisseur">
 <a aria-hidden="true" href="#solution-1-modifier-la-plage-dentrée-du-convertisseur">
  <span class="es-autolink-heading">
  </span>
 </a>
 Solution 1 : modifier la plage d’entrée du convertisseur
</h4>
<p>
 C’est la solution la plus simple ! Voyons deux choses…
</p>
<h5 id="tension-de-référence-interne">
 <a aria-hidden="true" href="#tension-de-référence-interne">
  <span class="es-autolink-heading">
  </span>
 </a>
 Tension de référence interne
</h5>
<p>
 Le micro-contrôleur de l’Arduino possède plusieurs tensions de référence utilisables selon la plage de variation de la tension que l’on veut mesurer. Prenons une tension, en sortie d’un capteur, qui variera entre 0V et 1V et jamais au delà. Par défaut, la mesure se fera entre 0 et 5V sur 1024 niveaux (soit une précision de 4.88 mV). Ce qui veut dire qu’on aura seulement les 204 premiers niveaux d’utiles puisque tout le reste correspondra à plus d’un volt. Pour améliorer la précision de lecture, on va réduire la plage de mesure d’entrée du convertisseur analogique - &gt; numérique en réduisant la tension de référence utilisée (initialement 5V). Pour cela, rien de matériel, tout se passe au niveau du programme puisqu’il y a une fonction qui existe :
 <a href="http://arduino.cc/en/Reference/AnalogReference">
  <code>
   analogReference()
  </code>
 </a>
 . Cette fonction prend en paramètre le nom de la référence à utiliser :
</p>
<ul>
 <li>
  DEFAULT : La référence de 5V par défaut (ou 3,3V pour les cartes Arduino fonctionnant sous cette tension, telle la Due)
 </li>
 <li>
  INTERNAL : Une référence interne de 1.1V (pour la Arduino Uno)
 </li>
 <li>
  INTERNAL1V1 : Comme ci-dessus mais pour la Arduino Mega
 </li>
 <li>
  INTERNAL2V56 : Une référence de 2.56V (uniquement pour la Mega)
 </li>
 <li>
  EXTERNAL : La référence sera celle appliquée sur la broche ARef
 </li>
</ul>
<p>
 Dans notre cas, le plus intéressant sera de prendre la valeur INTERNAL pour pouvoir faire des mesures entre 0 et 1.1V. Ainsi, on aura 1024 niveaux ce qui nous fera une précision de 1.07mV. C’est bien meilleur ! Le code est à placer dans la fonction setup() de votre programme :
</p>
<figure>
 <div class="hljs-code-div">
  <div class="hljs-line-numbers">
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
  </div>
  <pre><code class="hljs language-cpp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-comment">// permet de choisir une tension de référence de 1.1V</span>
    analogReference(INTERNAL);
}
</code></pre>
 </div>
 <figcaption>
  Changement de la référence : INTERNAL
 </figcaption>
</figure>
<h5 id="tension-de-référence-externe">
 <a aria-hidden="true" href="#tension-de-référence-externe">
  <span class="es-autolink-heading">
  </span>
 </a>
 Tension de référence externe
</h5>
<p>
 Maintenant que se passe t’il si notre mesure devait être faite entre 0 et 3V ? On ne pourrait plus utiliser INTERNA1V1 puisqu’on dépasse les 1.1V. On risquerais alors de griller le comparateur. Dans le cas d’une Arduino Mega, on ne peut pas non plus utiliser INTERNAL2V56 puisqu’on dépasse les 2.56V. Nous allons donc ruser en prenant une référence externe à l’aide de la valeur EXTERNAL comme ceci :
</p>
<figure>
 <div class="hljs-code-div">
  <div class="hljs-line-numbers">
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
  </div>
  <pre><code class="hljs language-cpp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-comment">// permet de choisir une tension de référence externe à la carte</span>
    analogReference(EXTERNAL);
}
</code></pre>
 </div>
 <figcaption>
  Changement de la référence : EXTERNAL
 </figcaption>
</figure>
<p>
 Ensuite, il ne restera plus qu’à apporter une tension de référence supérieur à 3V sur la broche ARef de la carte pour obtenir notre nouvelle référence.
</p>
<div class="custom-block alert alert-primary">
 <div class="custom-block-body">
  <p>
   Astuce : la carte Arduino produit une tension de 3.3V (à côté de la tension 5V). Vous pouvez donc utiliser cette tension directement pour la tension de référence du convertisseur.
   <img alt=";)" class="smiley" src="./static/smileys/clin.png"/>
   Il suffit pour cela de relier avec un fil la sortie indiquée 3.3V à l’entrée AREF.
  </p>
 </div>
</div>
<div class="custom-block alert alert-danger">
 <div class="custom-block-body">
  <p>
   Attention cependant, la tension maximale de référence
   <strong>
    ne peut être supérieure à +5V
   </strong>
   et
   <strong>
    la minimale inférieure à 0V
   </strong>
   . En revanche, toutes les tensions comprises entre ces deux valeurs sont acceptables.
  </p>
 </div>
</div>
<div class="custom-block alert alert-info">
 <div class="custom-block-body">
  <p>
   Mais, si je veux que ma tension d’entrée puisse varier au-delà de +5V, comment je fais ? Y a-t-il un moyen d’y parvenir ?
   <img alt="o_O" class="smiley" src="./static/smileys/blink.gif"/>
  </p>
 </div>
</div>
<p>
 Oui, voyez ce qui suit…
</p>
<p>
 <img alt="Schéma du pont diviseur de tension" src="./images/uploaded/tuto-arduino-401-les-entrées-analogiques-de-larduino/schema-du-pont-diviseur-de-tension.png"/>
</p>
<h4 id="solution-2-utiliser-un-pont-diviseur-de-tension">
 <a aria-hidden="true" href="#solution-2-utiliser-un-pont-diviseur-de-tension">
  <span class="es-autolink-heading">
  </span>
 </a>
 Solution 2 : utiliser un pont diviseur de tension
</h4>
<p>
 Nous avons vu cela à la partie précédente avec le potentiomètre. Il s’agit en fait de diviser votre signal par un certain ratio afin de l’adapter aux contraintes d’entrées du convertisseur. Par exemple, imaginons que nous ayons une mesure à faire sur un appareil qui délivre une tension comprise entre 0 et 10V. Cela ne nous arrange pas puisque nous ne sommes capable de lire des valeurs qu’entre 0 et 5V. Nous allons donc diviser cette mesure par deux afin de pouvoir la lire sans risque. Pour cela, on utilisera deux résistances de valeur identique (2 fois
 <span class="inlineMath">
  <span class="katex">
   <span class="katex-mathml">
    <math>
     <semantics>
      <mrow>
       <mn>
        1
       </mn>
       <mn>
        0
       </mn>
       <mi>
        k
       </mi>
       <mi mathvariant="normal">
        Ω
       </mi>
      </mrow>
      <annotation encoding="application/x-tex">
       10 k\Omega
      </annotation>
     </semantics>
    </math>
   </span>
   <span aria-hidden="true" class="katex-html">
    <span class="strut" style="height:0.69444em;">
    </span>
    <span class="strut bottom" style="height:0.69444em;vertical-align:0em;">
    </span>
    <span class="base textstyle uncramped">
     <span class="mord mathrm">
      1
     </span>
     <span class="mord mathrm">
      0
     </span>
     <span class="mord mathit" style="margin-right:0.03148em;">
      k
     </span>
     <span class="mord mathrm">
      Ω
     </span>
    </span>
   </span>
  </span>
 </span>
 par exemple) pour faire un pont diviseur de tension. La tension à mesurer rentre dans le pont (
 <span class="inlineMath">
  <span class="katex">
   <span class="katex-mathml">
    <math>
     <semantics>
      <mrow>
       <mi>
        U
       </mi>
      </mrow>
      <annotation encoding="application/x-tex">
       U
      </annotation>
     </semantics>
    </math>
   </span>
   <span aria-hidden="true" class="katex-html">
    <span class="strut" style="height:0.68333em;">
    </span>
    <span class="strut bottom" style="height:0.68333em;vertical-align:0em;">
    </span>
    <span class="base textstyle uncramped">
     <span class="mord mathit" style="margin-right:0.10903em;">
      U
     </span>
    </span>
   </span>
  </span>
 </span>
 sur le schéma ci-contre) et la tension mesurable sort au milieu du pont (tension
 <span class="inlineMath">
  <span class="katex">
   <span class="katex-mathml">
    <math>
     <semantics>
      <mrow>
       <msub>
        <mi>
         U
        </mi>
        <mi>
         s
        </mi>
       </msub>
      </mrow>
      <annotation encoding="application/x-tex">
       U_s
      </annotation>
     </semantics>
    </math>
   </span>
   <span aria-hidden="true" class="katex-html">
    <span class="strut" style="height:0.68333em;">
    </span>
    <span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;">
    </span>
    <span class="base textstyle uncramped">
     <span class="mord">
      <span class="mord mathit" style="margin-right:0.10903em;">
       U
      </span>
      <span class="msupsub">
       <span class="vlist">
        <span style="top:0.15em;margin-right:0.05em;margin-left:-0.10903em;">
         <span class="fontsize-ensurer reset-size5 size5">
          <span style="font-size:0em;">
           ​
          </span>
         </span>
         <span class="reset-textstyle scriptstyle cramped mtight">
          <span class="mord mathit mtight">
           s
          </span>
         </span>
        </span>
        <span class="baseline-fix">
         <span class="fontsize-ensurer reset-size5 size5">
          <span style="font-size:0em;">
           ​
          </span>
         </span>
         ​
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
  </span>
 </span>
 ). Il ne reste plus qu’à connecter la sortie du pont à une entrée analogique de la carte Arduino et lire la valeur de la tension de sortie.
</p>
<div class="custom-block alert alert-primary">
 <div class="custom-block-body">
  <p>
   Libre à vous de modifier les valeurs des résistances du pont diviseur de tension pour faire rentrer des tensions différentes (même au delà de 10V !). Attention cependant à ne pas dépasser les +5V en sortie du pont !
  </p>
 </div>
</div>
<h4 id="solution-3-utiliser-un-can-externe">
 <a aria-hidden="true" href="#solution-3-utiliser-un-can-externe">
  <span class="es-autolink-heading">
  </span>
 </a>
 Solution 3 : utiliser un
 <abbr title="Convertisseur Analogique Numérique">
  CAN
 </abbr>
 externe
</h4>
<p>
 La deuxième solution consisterait simplement en l’utilisation d’un convertisseur analogique -&gt; numérique externe. A vous de choisir le bon. Il en existe beaucoup, ce qu’il faut principalement regarder c’est :
</p>
<ul>
 <li>
  la
  <strong>
   précision
  </strong>
  (10 bits pour Arduino, existe d’autre en 12bits, 16bits, …)
 </li>
 <li>
  la
  <strong>
   vitesse d’acquisition
  </strong>
  (celui d’Arduino est à une vitesse de 100µs)
 </li>
 <li>
  le
  <strong>
   mode de transfert
  </strong>
  de la lecture (liaison série, I²C, …)
 </li>
 <li>
  le
  <strong>
   nombre d’entrées
  </strong>
  (6 sur Arduino Uno)
 </li>
 <li>
  la
  <strong>
   tension d’entrée
  </strong>
  maximale et minimale (max +5V et min 0V)
 </li>
</ul>
<h4 id="solution-4-modifier-la-fréquence-de-fonctionnement-de-ladc">
 <a aria-hidden="true" href="#solution-4-modifier-la-fréquence-de-fonctionnement-de-ladc">
  <span class="es-autolink-heading">
  </span>
 </a>
 Solution 4 : Modifier la fréquence de fonctionnement de l’ADC
</h4>
<p>
 Cette solution et ses limites sont illustrées dans
 <a href="https://zestedesavoir.com/billets/2068/arduino-accelerer-analogread/">
  ce billet de Titi_Alone
 </a>
 . C’est une manipulation un peu plus avancée qui fera appel à la manipulation de registres internes au microcontrôleur de l’Arduino. Les paramètres de base devraient cependant convenir à la majorité de vos applications.
</p>
<p>
 Au programme :
</p>
<ul>
 <li>
  Le prochain chapitre est un TP faisant usage de ces voies analogiques
 </li>
 <li>
  Le chapitre qui le suit est un chapitre qui vous permettra de créer des tensions analogiques avec votre carte Arduino, idéal pour mettre en œuvre la deuxième solution d’amélioration de la précision de lecteur du convertisseur !
 </li>
</ul>
<p>
 En somme, ce chapitre vous a permis de vous familiariser un peu avec les tensions analogiques, ce qui vous permettra par la suite de gérer plus facilement les grandeurs renvoyées par des capteurs quelconques.
</p>
            </div>
            <!-- /.entry-content -->
            <hr>
            <div class="row bg-light my-2 py-2 rounded">
                <div class="col mr-auto">
                    <a class="" href="/tuto-arduino-304-annexe-ordinateur-et-voie-série-dans-un-autre-langage-de-programmation" rel="prev">
                        <i class="fas fa-chevron-left fa-lg"></i>
                        tuto-arduino-304-annexe-ordinateur-et-voie-série-dans-un-autre-langage-de-programmation
                    </a>
                </div>
                <div class="col-auto">
                    <a class="" href="/tuto-arduino-402-tp-vu-mètre-à-led" rel="next">
                        tuto-arduino-402-tp-vu-mètre-à-led
                        <i class="fas fa-chevron-right fa-lg"></i>
                    </a>
                </div>
            </div>
            <div class="mb-3 text-center">
                <a class="btn btn-outline-dark mx-1" href="https://twitter.com/share?url=https://eskimon.fr/tuto-arduino-401-les-entrées-analogiques-de-larduino&amp;text=Les entrées analogiques de l’Arduino - https://eskimon.fr/tuto-arduino-401-les-entrées-analogiques-de-larduino" rel="nofollow" title="Partager cet article sur Twitter" role="button" data-toggle="tooltip" data-placement="top">
                    <i class="fab fa-twitter fa-lg"></i>
                </a>
                <a class="btn btn-outline-dark mx-1" href="https://www.facebook.com/sharer.php?u=https://eskimon.fr/tuto-arduino-401-les-entrées-analogiques-de-larduino&amp;t=Les entrées analogiques de l’Arduino - https://eskimon.fr/tuto-arduino-401-les-entrées-analogiques-de-larduino" rel="nofollow" title="Partager cet article sur Facebook" role="button" data-toggle="tooltip" data-placement="top">
                    <i class="fab fa-facebook-f fa-lg"></i>
                </a>
                <a class="btn btn-outline-dark mx-1" href="https://plus.google.com/share?url=https://eskimon.fr/tuto-arduino-401-les-entrées-analogiques-de-larduino&amp;hl=fr" rel="nofollow" title="Partager cet article sur Google +" role="button" data-toggle="tooltip" data-placement="top">
                    <i class="fab fa-google-plus fa-lg"></i>
                </a>
                <!--<a class="btn btn-outline-dark mx-1" href="http://sharetodiaspora.github.io/?url=https://eskimon.fr/tuto-arduino-401-les-entrées-analogiques-de-larduino&amp;title=Les entrées analogiques de l’Arduino - https://eskimon.fr/tuto-arduino-401-les-entrées-analogiques-de-larduino" rel="nofollow"  title="Partager cet article sur Diaspora" role="button" data-toggle="tooltip" data-placement="top">
                    <i class="fab fa-google-plus fa-lg"></i>
                </a>-->
                <a class="btn btn-outline-dark mx-1" href="mailto:?subject=Les entrées analogiques de l’Arduino&amp;body=https://eskimon.fr/tuto-arduino-401-les-entrées-analogiques-de-larduino"rel="nofollow" title="Partager cet article par email" role="button" data-toggle="tooltip" data-placement="top">
                    <i class="far fa-envelope fa-lg"></i>
                </a>
            </div>
        </article>
    </div>
</div>
    </div>
<footer class="container-fluid bg-dark small text-white px-3">
<div class="row">
    <div class="col align-self-start">

    </div>
    <div class="col align-self-center text-center">
        © Eskimon -
        Blog propulsé par <a class="bold text-white" href="https://blog.getpelican.com/" rel="nofollow">Pelican</a> -
        Thème fait maison
    </div>
    <div class="col align-self-end text-right">
        <a class="btn btn-lg text-light" href="https://github.com/Eskimon" rel="nofollow" title="Mon profil Github">
            <i class="fab fa-github fa-lg"></i>
        </a>
        <a class="btn btn-lg text-light" href="https://twitter.com/Eskimon_fr" rel="nofollow" title="Me suivre sur Linkedin">
            <i class="fab fa-twitter fa-lg"></i>
        </a>
    </div>
  </div>
</footer>

    <!-- For formula -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!-- Font awesome -->
    <script src="https://use.fontawesome.com/releases/v5.0.0/js/all.js"></script>
    <!-- JQuery first -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <!-- Popper.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <!-- Bootstrap -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <!-- For tooltips -->
    <script>$(function () {  $('[data-toggle="tooltip"]').tooltip()})</script>
    <script src="/static/js/my-scripts.js"></script>
<script>
function create_side_summary() {
    // Duplicate summary
    var main_summary = $('#sommaire').next();
    if(main_summary.length === 0)
        return
    var side_summary = main_summary.clone();
    side_summary.addClass('pl-0');
    var all_p = side_summary.find('p');
    all_p.contents().unwrap();
    var all_li = side_summary.find('li');
    all_li.addClass('pl-1');

    // scrollspy - in
    side_summary.attr('id', 'es-side-summary-mainlist');
    //side_summary.addClass('nav');
    //all_li.addClass('nav-item');
    var all_a = side_summary.find('a');
    all_a.addClass('nav-link');
    var all_ul = side_summary.find('ul');
    all_ul.addClass('pl-1');
    $('body').scrollspy({ target: '#es-side-summary-mainlist' });
    // scrollspy - out

    var summary_title = document.createElement("h4");
    summary_title.className = 'navbar-brand';
    summary_title.innerHTML = 'Sommaire';
    $(summary_title).prependTo('#es-side-summary-content');
    side_summary.appendTo('#es-side-summary-content');
    main_summary.addClass('es-subul-collapse');
}

function generate_spoilers() {
    all_secret = $('.custom-block-spoiler');
    all_secret.each(function( index ) {
    let content = $(this).html();
    $(this).html('');
    $(this).addClass('card');
    var headerText = document.createElement("button");
    var cardHeader = document.createElement("div");
    var cardBodyWrapper = document.createElement("div");
    var cardBody = document.createElement("div");
    $(headerText).text('Contenu masqué, cliquez pour afficher');
    $(headerText).addClass('btn btn-link btn-sm');
    $(headerText).attr('data-toggle', 'collapse');
    $(headerText).attr('data-target', '#collapse-' + index);
    $(headerText).attr('aria-controls', 'collapse-' + index);
    $(headerText).attr('aria-expanded', 'false');
    $(cardHeader).append(headerText);
    $(cardHeader).addClass('card-header');
    $(cardHeader).attr('id', 'spoiler-' + index);
    $(cardBody).html(content);
    $(cardBody).addClass('card-body');
    $(cardBodyWrapper).append(cardBody);
    $(cardBodyWrapper).addClass('collapse hide');
    $(cardBodyWrapper).attr('id', 'collapse-' + index)
    $(cardBodyWrapper).attr('aria-labelledby', 'spoiler-' + index)
    $(this).prepend(cardHeader);
    $(this).append(cardBodyWrapper);
    });

    $('.collapse').collapse({toggle: false});
}

create_side_summary();
generate_spoilers();
</script>
</body>

</html>
