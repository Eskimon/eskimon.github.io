<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>A petits pas, le moteur pas-à-pas &bull; Le blog d'Eskimon</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="/static/css/hljs-monokai.css" />
    <link rel="stylesheet" href="/static/css/style.css" />
    <!-- Google font -->
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/static/images/favicon/favicon.ico">
    <link rel="apple-touch-icon" sizes="57x57" href="/static/images/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/static/images/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/static/images/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/static/images/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/static/images/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/static/images/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/static/images/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/static/images/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/images/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/static/images/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/static/images/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/images/favicon/favicon-16x16.png">
    <link rel="manifest" href="/static/images/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/static/images/favicon/ms-icon-144x144.png">



    <meta name="description" content="Cette partie traite du fonctionnement des différents moteurs pas-à-pas et comment les interfacer avec une carte Arduino." />

  <meta name="tags" content="arduino" />
  <meta name="tags" content="tuto" />


  <meta property="og:site_name" content="Le blog d'Eskimon">
  <meta property="og:title" content="A petits pas, le moteur pas-à-pas">
  <meta property="og:url" content="https://eskimon.fr/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas">
  <meta property="og:language" content="fr_FR">
  <meta property="og:type" content="website">

  <meta property="twitter:domain" content="https://eskimon.fr/">
  <meta property="twitter:card" content="summary">
  <meta property="twitter:url" content="https://eskimon.fr/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas">
  <meta property="twitter:title" content="A petits pas, le moteur pas-à-pas">
<meta property="twitter:description" content="Cette partie traite du fonctionnement des différents moteurs pas-à-pas et comment les interfacer avec une carte Arduino.">  <meta property="twitter:site" content="SITENAME">
  <meta property="twitter:creator" content="@eskimon_fr">

  <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
  <meta name="DC.publisher" lang="fr" content="Le blog d'Eskimon" />
  <meta name="DC.creator" content="Eskimon" />
  <meta name="DC.type" content="text" />
  <meta name="DC.title" content="A petits pas, le moteur pas-à-pas" />
  <meta name="DC.abstract" content="A petits pas, le moteur pas-à-pas – Cette partie traite du fonctionnement des différents moteurs pas-à-pas et comment les interfacer avec une carte Arduino." />
  <meta name="DC.subject" lang="fr" content="Arduino/F - Le mouvement grâce aux moteurs – arduino; tuto" />
<meta name="DC.description" lang="fr" content="Cette partie traite du fonctionnement des différents moteurs pas-à-pas et comment les interfacer avec une carte Arduino." />  <meta name="DC.date" content="2013-12-12T12:22:00+01:00" />
  <meta name="DC.format" content="text/html" />
  <meta name="DC.language" content="fr" />
  <meta name="DC.rights" content="CC BY-NC-SA" />

  <script type="application/ld+json">
    [{
        "@context": "http://schema.org",
        "@type": "Article",
        "mainEntityOfPage": {
          "@type": "WebPage",
          "@id": "https://eskimon.fr/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas"
        },
        "headline": ""A petits pas, le moteur pas-\u00e0-pas"",
        "datePublished": "2013-12-12T12:22:00+01:00",
        "image": [
            "https://eskimon.fr/static/images/logo.png"
        ],
        "author": {
            "@type": "Person",
            "name": "Eskimon",
            "image": "https://eskimon.fr/static/images/logo.png"
        },
        "publisher": {
            "@type": "Organization",
            "name": "Eskimon",
            "logo": {
                "@type": "ImageObject",
                "url": "https://eskimon.fr/static/images/logo.png"
            }
        },
        "description": ""Cette partie traite du fonctionnement des diff\u00e9rents moteurs pas-\u00e0-pas et comment les interfacer avec une carte Arduino.""
    },
    {
        "@context": "http://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [{
            "@type": "ListItem",
            "position": 1,
            "item": {
                "@id": "https://eskimon.fr/category/arduino",
                "name": ""Arduino""
            }
        }
        , {
            "@type": "ListItem",
            "position": 2,
            "item": {
                "@id": "https://eskimon.fr/subcategory/arduino/f-le-mouvement-grace-aux-moteurs",
                "name": ""F - Le mouvement gr\u00e2ce aux moteurs""
            }
        }
        , {
            "@type": "ListItem",
            "position": 3,
            "item": {
                "@id": "https://eskimon.fr/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas",
                "name": ""A petits pas, le moteur pas-\u00e0-pas""
            }
        }]
    }]
    </script>

</head>

<body>
<nav class="navbar navbar-expand-lg navbar-light bg-secondary-l40 py-0">
    <a class="navbar-brand" href="/">
        <img src="/static/images/logo.png" width="20" height="20" alt="">
        Le blog d'Eskimon
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
        <div class="navbar-nav ml-auto">
                <a class="nav-item nav-link active" href="/category/arduino">Arduino</a>
                <a class="nav-item nav-link " href="/category/articles">Articles</a>
                <a class="nav-item nav-link " href="/category/tuto">Tuto</a>
        </div>
    </div>
</nav>
    <div class="container-fluid es-verticalfill">
<div class="row">
    <!-- Sidebar -->
    <div class="col-lg-2 d-none d-lg-block sticky-top es-scrollable pt-3 px-1 bg-light es-ul-bordered" id="es-side-summary">
        <nav class="px-2" id="es-side-summary-content">
            <!-- Summary will come here -->
        </nav>
        <hr>
        <!-- Add here self-promo for ebook -->
    </div>
    <!-- Main content -->
    <div class="col-md-10 col-lg-8 col-xl-7 offset-md-1 offset-lg-1 offset-xl-1 d-block pt-3" id="es-content">
        <article>
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb bg-white">
                    <li class="breadcrumb-item"><a href="/category/arduino">Arduino</a></li>
                        <li class="breadcrumb-item"><a href="/subcategory/arduino/f-le-mouvement-grace-aux-moteurs">F - Le mouvement grâce aux moteurs</a></li>
                    <li class="breadcrumb-item active" aria-current="page">A petits pas, le moteur pas-à-pas</li>
                </ol>
            </nav>
            <header class="es-post-info">
                <h1 class="text-center my-4">A petits pas, le moteur pas-à-pas</h1>
            </header>
            <footer class="es-post-info pb-2 mb-2">
                <div class="row align-items-center">
                    <div class="col-auto mr-auto">
                        <span class="vcard author">
                            <a class="" href="/author/eskimon" rel="author">Eskimon</a>
                        </span>
                        ,
                        <time class="" datetime="2013-12-12T12:22:00+01:00" pubdate>
                            le jeu. 12 décembre 2013
                        </time>
                    </div>
                    <div class="col-auto">
                        <a class="btn btn-outline-primary btn-sm" href="/tag/arduino" rel="tag">arduino</a>
                        <a class="btn btn-outline-primary btn-sm" href="/tag/tuto" rel="tag">tuto</a>
                    </div>
                </div>
            </footer>
            <button type="button" id="sidebarCollapse" class="float-right btn btn-secondary sticky-top d-block d-lg-none">
                Sommaire
            </button>
            <!-- /.post-info -->
            <div class="entry-content">
                <p>
 Pour en terminer avec les différents types de moteurs qui existent, nous allons parler d’un moteur un peu particulier (encore plus que le servomoteur !) et qui est cependant très utilisé dans le domaine de la robotique et tout ce qui touche à la précision d’un mouvement. Comme à l’habitude, nous allons d’abord voir le fonctionnement de ces moteurs, pour ensuite apprendre à les utiliser.
</p>
<div class="custom-block alert alert-primary">
 <div class="custom-block-body">
  <p>
   Ce moteur utilise des éléments que nous avons vus dans des chapitres précédents (sur les moteurs à courant continu). Si vous ne vous rappelez pas du L298 je vous conseille de retourner prendre quelques informations à ce sujet.
   <img alt=";)" class="smiley" src="./static/smileys/clin.png"/>
  </p>
 </div>
</div>
<h3 id="sommaire">
 <a aria-hidden="true" href="#sommaire">
  <span class="es-autolink-heading">
  </span>
 </a>
 Sommaire
</h3>
<ul>
 <li>
  <p>
   <a href="#les-différents-moteurs-pas-à-pas-et-leur-fonctionnement">
    Les différents moteurs pas-à-pas et leur fonctionnement
   </a>
  </p>
  <ul>
   <li>
    <p>
     <a href="#fonctionnement-des-moteurs">
      Fonctionnement des moteurs
     </a>
    </p>
    <ul>
     <li>
      <a href="#moteur-pàp-bipolaire-à-aimants-permanents">
       Moteur pàp bipolaire à aimants permanents
      </a>
     </li>
     <li>
      <a href="#le-moteur-unipolaire">
       Le moteur unipolaire
      </a>
     </li>
     <li>
      <a href="#le-moteur-à-réluctance-variable">
       Le moteur à réluctance variable
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li>
  <p>
   <a href="#se-servir-du-moteur">
    Se servir du moteur
   </a>
  </p>
  <ul>
   <li>
    <p>
     <a href="#le-moteur-unipolaire-1">
      Le moteur unipolaire
     </a>
    </p>
    <ul>
     <li>
      <a href="#connecter-un-moteur-unipolaire">
       Connecter un moteur unipolaire
      </a>
     </li>
     <li>
      <a href="#utiliser-un-moteur-unipolaire">
       Utiliser un moteur unipolaire
      </a>
     </li>
    </ul>
   </li>
   <li>
    <p>
     <a href="#le-moteur-bipolaire">
      Le moteur bipolaire
     </a>
    </p>
    <ul>
     <li>
      <a href="#le-câbler-la-théorie">
       Le câbler, la théorie
      </a>
     </li>
     <li>
      <a href="#la-pratique-avec-le-l298">
       La pratique avec le L298
      </a>
     </li>
    </ul>
   </li>
   <li>
    <p>
     <a href="#piloter-le-moteur-bipolaire">
      Piloter le moteur bipolaire
     </a>
    </p>
    <ul>
     <li>
      <a href="#rotation-par-pas-complet">
       Rotation par pas complet
      </a>
     </li>
     <li>
      <a href="#rotation-à-couple-maximal">
       Rotation à couple maximal
      </a>
     </li>
     <li>
      <a href="#rotation-par-demi-pas">
       Rotation par demi-pas
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li>
  <p>
   <a href="#utilisation-avec-arduino">
    Utilisation avec Arduino
   </a>
  </p>
  <ul>
   <li>
    <p>
     <a href="#câbler-les-moteurs">
      Câbler les moteurs
     </a>
    </p>
    <ul>
     <li>
      <a href="#le-moteur-unipolaire-2">
       Le moteur unipolaire
      </a>
     </li>
     <li>
      <a href="#le-moteur-bipolaire-1">
       Le moteur bipolaire
      </a>
     </li>
    </ul>
   </li>
   <li>
    <p>
     <a href="#piloter-les-moteurs-avec-arduino">
      Piloter les moteurs avec Arduino
     </a>
    </p>
    <ul>
     <li>
      <a href="#le-principe">
       Le principe
      </a>
     </li>
     <li>
      <a href="#lobjet-stepper">
       L’objet Stepper
      </a>
     </li>
    </ul>
   </li>
   <li>
    <p>
     <a href="#aller-plus-loin">
      Aller plus loin
     </a>
    </p>
    <ul>
     <li>
      <a href="#2-fils-au-lieu-de-4">
       2 fils au lieu de 4 !
      </a>
     </li>
     <li>
      <a href="#le-l297">
       Le L297
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>
<h3 id="les-différents-moteurs-pas-à-pas-et-leur-fonctionnement">
 <a aria-hidden="true" href="#les-différents-moteurs-pas-à-pas-et-leur-fonctionnement">
  <span class="es-autolink-heading">
  </span>
 </a>
 Les différents moteurs pas-à-pas et leur fonctionnement
</h3>
<p>
 Les moteurs pas-à-pas… encore un nouveau type de moteur. Une question vous taraude sûrement l’esprit :
</p>
<div class="custom-block alert alert-info">
 <div class="custom-block-body">
  <p>
   Pourquoi il existe tant de moteurs différents !?
  </p>
 </div>
</div>
<p>
 Et bien je vous répondrais par une autre question : pourquoi existe-t’il autant de langages de programmation différents !? La réponse est pourtant simple : car ils ont tous leurs avantages et leurs inconvénients. Par exemple, un servomoteur pourra facilement maintenir la position de son axe, tandis que le moteur à courant continu sera plus facile à faire tourner à différentes vitesses. Eh bien, le but du moteur pas-à-pas (que j’abrégerais moteur pàp) est un peu une réunion de ces deux avantages. Vous pourrez le faire tourner à des vitesses variables et la position parcourue sera aussi facile à déterminer. En contrepartie, ces moteurs ne peuvent pas tourner à des vitesses hallucinantes et sont plus délicats à mettre en œuvre que les moteurs CC par exemple (mais rien d’insurmontable je vous rassure).
</p>
<p>
 En parlant de précision, savez-vous dans quel objet du quotidien on retrouve beaucoup de moteurs pàp ? Dans l’imprimante (éventuellement scanner aussi) qui traîne sur votre bureau ! En effet, l’aspect "précision" du moteur est utilisé dans cette situation sans avoir besoin d’aller vraiment vite. Vous pourrez donc en trouver un pour faire avancer les feuilles et un autre pour déplacer le chariot avec les cartouches d’encre (et encore un autre pour déplacer le capteur du scanner). Donc si vous avez une vieille imprimante destinée à la poubelle, vous savez ce qu’il vous reste à faire
 <img alt=";)" class="smiley" src="./static/smileys/clin.png"/>
 ! Les moteurs que vous pourrez trouver posséderont 4, 5 voire 6 fils. Le premier (4 fils) est appelé
 <strong>
  moteur bipolaire
 </strong>
 , les deux autres sont des moteurs
 <strong>
  unipolaires
 </strong>
 ou à
 <strong>
  réluctance variable
 </strong>
 . Tout cela doit-être encore un peu confus. Voyons donc plus clairement comment cela marche !
</p>
<h4 id="fonctionnement-des-moteurs">
 <a aria-hidden="true" href="#fonctionnement-des-moteurs">
  <span class="es-autolink-heading">
  </span>
 </a>
 Fonctionnement des moteurs
</h4>
<p>
 Comme précédemment avancé, ce moteur possède une certaine complexité pour être mis en œuvre. Et ce, plus que les précédents. Vous souvenez-vous du moteur CC (j’espère bien ! :P ). Il était composé d’un ensemble d’aimants sur l’extérieur (le stator) et d’une partie bobinée où le champ magnétique était créée dynamiquement avec un ensemble collecteur/balais qui transmettait l’électricité aux bobines au centre (rotor).
</p>
<p>
 Dans le cas du moteur pàp, c’est sur le rotor (au centre) que l’on retrouve l’aimant permanent, et les bobines sont sur le stator (autour du rotor). Comme pour les moteurs à courant continu, le but du jeu, en quelque sorte, est de "faire tourner un champ magnétique" (à prendre avec des pincettes) pour faire tourner l’aimant fixé au rotor. Il existe cependant différents types de moteurs pàp dont le placement des bobinages diffère les uns des autres et la façon de les alimenter n’est pas non plus identique (d’où une complexité supplémentaire lorsque l’on veut changer le type de moteur pàp à utiliser…). Nous allons maintenant les étudier l’un après l’autre en commençant par celui qui semble avoir le fonctionnement le plus simple à assimiler.
</p>
<h5 id="moteur-pàp-bipolaire-à-aimants-permanents">
 <a aria-hidden="true" href="#moteur-pàp-bipolaire-à-aimants-permanents">
  <span class="es-autolink-heading">
  </span>
 </a>
 Moteur pàp bipolaire à aimants permanents
</h5>
<p>
 Ce moteur possède quatre fils d’alimentation pour piloter des bobines par paire. Comme un schéma vaut mieux qu’un long discours, voici comment il est constitué :
</p>
<p>
 <img alt="Vue schématisée et simplifiée d'un moteur pas-à-pas bipolaire" src="./images/uploaded/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas/vue-schematisee-et-simplifiee-dun-moteur-pas-a-pas-bipolaire.png"/>
</p>
<p>
 Vous l’aurez compris, les bobines sont reliées deux à deux en série et sont donc pilotées ensemble. Il n’y a donc finalement que deux enroulements à commander puisque deux bobines montées en série n’en font plus qu’une. Leur placement de part et d’autre de l’aimant permanent du rotor permet de piloter ce dernier. Voyons comment.
</p>
<ul>
 <li>
  Lorsqu’il n’y a aucun courant traversant les bobines, le rotor (où l’axe de sortie est lié) est libre de tourner, rien ne cherche à le retenir dans sa course.
 </li>
 <li>
  Maintenant, si nous décidons de faire passer du courant entre les points C et D pour alimenter la bobine de gauche et celle de droite. Un courant va s’établir et deux champs électromagnétiques vont apparaître de part et d’autre du rotor. Que va-t-il alors se passer ? L’aimant du rotor va tourner sur lui-même pour se placer de façon à ce que son pôle Nord soit en face du pôle Sud du champ magnétique créé dans la première bobine et que son pôle Sud soit en face du pôle Nord créé dans la deuxième bobine.
 </li>
 <li>
  Si ensuite on alimente non plus les bobines entre C et D mais plutôt celles entre A et B, le rotor va alors tourner pour s’aligner à nouveau vers les pôles qui l’intéressent (Nord/Sud, Sud/Nord).
 </li>
 <li>
  Et c’est reparti, on va alors alimenter de nouveau les bobines entre D et C, donc avec un courant de signe opposé à la fois où l’on les a alimenter entre C et D (par exemple C était relié au "+" de l’alimentation tout à l’heure et là on le fait passer au "-", idem pour D que l’on fait passer du "-" au "+") et le moteur va encore faire un quart de tour.
 </li>
 <li>
  On peut continuer ainsi de suite pour faire tourner le moteur en faisant attention de ne pas se tromper dans les phases d’alimentation.
 </li>
</ul>
<p>
 À chaque phase on va donc faire tourner le moteur d’un quart de tour :
</p>
<p>
 <img alt="Rotation pas-à-pas du moteur" src="./images/uploaded/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas/rotation-pas-a-pas-du-moteur.png"/>
</p>
<div class="custom-block alert alert-primary">
 <div class="custom-block-body">
  <p>
   Ce quart de rotation s’appelle un
   <strong>
    pas
   </strong>
   . Et comme il faut plusieurs pas pour faire tourner le moteur sur 360°, on l’a donc appelé ainsi, le moteur
   <em>
    pas-à-pas
   </em>
   .
  </p>
 </div>
</div>
<p>
 Dans le cas illustré ci-dessus, on dit que le moteur fait 4 pas par tour. Il existe bien des moteurs qui font ce nombre de pas, mais il en existe qui ont un nombre de pas plus conséquent (24, 48, etc.). Leur constitution mécanique est différente, ce qui leur confère ce pouvoir, bien que le fonctionnement reste identique, puisque l’on cherche toujours à attirer un aimant grâce à des champs magnétiques crées par des bobines parcourues par un courant. Pour avoir plus de pas, on multiplie les aimants au centre. Sur l’image ci-dessous, on peut bien voir les bobines (en cuivre à l’extérieur) et tous les aimants au centre (les petites dents). Il existe aussi deux autres modes de fonctionnement que nous verrons dans la partie suivante :
 <strong>
  le pilotage avec couple maximal
 </strong>
 et
 <strong>
  le pilotage par demi-pas
 </strong>
 .
</p>
<p>
 <figure>
  <img alt="Vue en coupe d'un moteur pas-à-pas bipolaire" src="./images/uploaded/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas/vue-en-coupe-dun-moteur-pas-a-pas-bipolaire.jpg"/>
  <figcaption>
   Vue en coupe d’un moteur pas-à-pas bipolaire - (CC-BY-SA,
   <a href="http://commons.wikimedia.org/wiki/File:Struttura_motore_passo-passo.jpg">
    vincenzov.net
   </a>
   )
  </figcaption>
 </figure>
</p>
<p>
 <figure>
  <img alt="Animation de la rotation d'un moteur pas à pas" src="./images/uploaded/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas/animation-de-la-rotation-dun-moteur-pas-a-pas.gif"/>
  <figcaption>
   Animation de la rotation d’un moteur pas à pas - (CC-BY-SA,
   <a href="http://commons.wikimedia.org/wiki/File:StepperMotor.gif">
    Teravolt
   </a>
   )
  </figcaption>
 </figure>
</p>
<p>
 Pour rappel, voici la vue d’un moteur à courant continu :
</p>
<div class="custom-block custom-block-spoiler">
 <div class="custom-block-body">
  <p>
   <img alt="Vue interne d'un moteur CC" src="./images/uploaded/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas/vue-interne-dun-moteur-cc.jpg"/>
  </p>
 </div>
</div>
<h5 id="le-moteur-unipolaire">
 <a aria-hidden="true" href="#le-moteur-unipolaire">
  <span class="es-autolink-heading">
  </span>
 </a>
 Le moteur unipolaire
</h5>
<p>
 Le moment est enfin venu de vous révéler la véritable signification des noms du moteur vu précédemment et de celui-ci même… non il ne faut pas lire ça sur un ton tragique.
 <img alt="^^" class="smiley" src="./static/smileys/hihi.png"/>
 Le moteur bipolaire est nommé ainsi car il présente la faculté d’être commandé en inversant simplement la polarité de ces bobinages. Quant au moteur unipolaire, pas besoin de faire cette inversion, chaque bobinage est commandé séparément et ne requiert qu’une alimentation présente ou absente selon que l’on veuille ou non créer un champ magnétique en son sein. La commande sera donc plus simple à mettre en place qu’avec le moteur bipolaire. Cependant, le nombre de bobines étant plus important, la quantité de cuivre également et le prix s’en ressent ! En effet, il s’agit bien de 4 bobines bien distinctes, alors que le moteur bipolaire à aimant permanent en possède finalement quatre moitiés de bobines, donc deux bobines complètes.
</p>
<p>
 <img alt="Vue en coupe d'un moteur pas-à-pas unipolaire" src="./images/uploaded/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas/vue-en-coupe-dun-moteur-pas-a-pas-unipolaire.png"/>
</p>
<p>
 On retrouve nos quatre fils A, B, C et D ainsi qu’un fil de masse commun (bon ben imaginez-le puisqu’il n’est pas dessiné comme tel sur le schéma). Soit 5 fils (v’là pas qu’on sait compter maintenant !
 <img alt="^^" class="smiley" src="./static/smileys/hihi.png"/>
 ). Le fonctionnement est rigoureusement identique que le précédent moteur. On cherche à créer un champ magnétique "rotatif" pour faire passer l’aimant alternativement devant chacune des bobines. On va donc alimenter la bobine A, puis la C, puis la B, puis la D selon le schéma ci-dessus. Et voilà, le moteur aura fait tout un tour assez simplement. Il suffit d’avoir quatre transistors (un par enroulement) sans avoir besoin de les disposer en H et de les piloter deux à deux. Ici il suffit de les alimenter un par un, chacun leur tour. Facile, non ?
 <img alt=";)" class="smiley" src="./static/smileys/clin.png"/>
</p>
<h5 id="le-moteur-à-réluctance-variable">
 <a aria-hidden="true" href="#le-moteur-à-réluctance-variable">
  <span class="es-autolink-heading">
  </span>
 </a>
 Le moteur à réluctance variable
</h5>
<div class="custom-block alert alert-info">
 <div class="custom-block-body">
  <p>
   Gné
   <img alt=":o" class="smiley" src="./static/smileys/huh.png"/>
   ? c’est quoi ce nom barbare ?
  </p>
 </div>
</div>
<p>
 Ce moteur est un peu plus compliqué, mais c’est aussi le dernier que nous verrons et le plus fascinant ! Contrairement aux deux précédents, ce moteur ne possède pas d’aimants permanents, ni même d’aimant tout court ! Non, en son centre on trouve un simple morceau de
 <strong>
  fer doux
 </strong>
 . Ce dernier à la particularité de très bien conduire les champs magnétiques. Du coup, si un champ magnétique le traverse, il voudra absolument s’aligner dans son sens. C’est cette propriété qui est exploitée. Commençons par voir tout de suite le schéma de ce moteur :
</p>
<p>
 <img alt="Vue en coupe d'un moteur pas-à-pas à réluctance variable" src="./images/uploaded/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas/vue-en-coupe-dun-moteur-pas-a-pas-a-reluctance-variable.png"/>
</p>
<p>
 Comme vous pouvez le voir, il possède 4 enroulements (formant 4 paires) et le morceau de fer doux au milieu à une forme d’étoile à 6 branches. Et ce n’est pas un hasard ! Le ratio de 6 pour 8 a une raison très précise car cela introduit un léger décalage (15°) entre une branche et une bobine. En effet, si l’on a 8 bobines (4 paires) on a un décalage entre chaque bobine de :
 <span class="inlineMath">
  <span class="katex">
   <span class="katex-mathml">
    <math>
     <semantics>
      <mrow>
       <mfrac>
        <mrow>
         <mn>
          3
         </mn>
         <mn>
          6
         </mn>
         <msup>
          <mn>
           0
          </mn>
          <mo>
           ∘
          </mo>
         </msup>
        </mrow>
        <mrow>
         <mn>
          8
         </mn>
        </mrow>
       </mfrac>
       <mo>
        =
       </mo>
       <mn>
        4
       </mn>
       <msup>
        <mn>
         5
        </mn>
        <mo>
         ∘
        </mo>
       </msup>
      </mrow>
      <annotation encoding="application/x-tex">
       \frac{360^\circ}{8}=45^\circ
      </annotation>
     </semantics>
    </math>
   </span>
   <span aria-hidden="true" class="katex-html">
    <span class="strut" style="height:0.9179250000000001em;">
    </span>
    <span class="strut bottom" style="height:1.262925em;vertical-align:-0.345em;">
    </span>
    <span class="base">
     <span class="mord">
      <span class="mopen nulldelimiter">
      </span>
      <span class="mfrac">
       <span class="vlist-t vlist-t2">
        <span class="vlist-r">
         <span class="vlist" style="height:0.9179250000000001em;">
          <span style="top:-2.6550000000000002em;">
           <span class="pstrut" style="height:3em;">
           </span>
           <span class="sizing reset-size6 size3 mtight">
            <span class="mord mtight">
             <span class="mord mtight">
              8
             </span>
            </span>
           </span>
          </span>
          <span style="top:-3.15em;">
           <span class="pstrut" style="height:3em;">
           </span>
           <span class="stretchy" style="height:0.2em;">
            <svg height="0.2em" preserveaspectratio="xMinYMin slice" viewbox="0 0 400000 200" width="400em">
             <path d="M0 80H400000 v40H0z M0 80H400000 v40H0z">
             </path>
            </svg>
           </span>
          </span>
          <span style="top:-3.394em;">
           <span class="pstrut" style="height:3em;">
           </span>
           <span class="sizing reset-size6 size3 mtight">
            <span class="mord mtight">
             <span class="mord mtight">
              3
             </span>
             <span class="mord mtight">
              6
             </span>
             <span class="mord mtight">
              <span class="mord mtight">
               0
              </span>
              <span class="msupsub">
               <span class="vlist-t">
                <span class="vlist-r">
                 <span class="vlist" style="height:0.7484642857142858em;">
                  <span style="top:-2.931em;margin-right:0.07142857142857144em;">
                   <span class="pstrut" style="height:2.5em;">
                   </span>
                   <span class="sizing reset-size3 size1 mtight">
                    <span class="mbin mtight">
                     ∘
                    </span>
                   </span>
                  </span>
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
         <span class="vlist-s">
          ​
         </span>
        </span>
        <span class="vlist-r">
         <span class="vlist" style="height:0.345em;">
         </span>
        </span>
       </span>
      </span>
      <span class="mclose nulldelimiter">
      </span>
     </span>
     <span class="mord rule" style="margin-right:0.2777777777777778em;">
     </span>
     <span class="mrel">
      =
     </span>
     <span class="mord rule" style="margin-right:0.2777777777777778em;">
     </span>
     <span class="mord">
      4
     </span>
     <span class="mord">
      <span class="mord">
       5
      </span>
      <span class="msupsub">
       <span class="vlist-t">
        <span class="vlist-r">
         <span class="vlist" style="height:0.674115em;">
          <span style="top:-3.063em;margin-right:0.05em;">
           <span class="pstrut" style="height:2.7em;">
           </span>
           <span class="sizing reset-size6 size3 mtight">
            <span class="mbin mtight">
             ∘
            </span>
           </span>
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
  </span>
 </span>
 Donc tous les 45° le long du cylindre qu’est le moteur, on trouve un bobinage. En revanche il n’y a que 60° entre chaque extrémité de l’étoile du rotor :
 <span class="inlineMath">
  <span class="katex">
   <span class="katex-mathml">
    <math>
     <semantics>
      <mrow>
       <mfrac>
        <mrow>
         <mn>
          3
         </mn>
         <mn>
          6
         </mn>
         <msup>
          <mn>
           0
          </mn>
          <mo>
           ∘
          </mo>
         </msup>
        </mrow>
        <mrow>
         <mn>
          6
         </mn>
        </mrow>
       </mfrac>
       <mo>
        =
       </mo>
       <mn>
        6
       </mn>
       <msup>
        <mn>
         0
        </mn>
        <mo>
         ∘
        </mo>
       </msup>
      </mrow>
      <annotation encoding="application/x-tex">
       \frac{360^\circ}{6}=60^\circ
      </annotation>
     </semantics>
    </math>
   </span>
   <span aria-hidden="true" class="katex-html">
    <span class="strut" style="height:0.9179250000000001em;">
    </span>
    <span class="strut bottom" style="height:1.262925em;vertical-align:-0.345em;">
    </span>
    <span class="base">
     <span class="mord">
      <span class="mopen nulldelimiter">
      </span>
      <span class="mfrac">
       <span class="vlist-t vlist-t2">
        <span class="vlist-r">
         <span class="vlist" style="height:0.9179250000000001em;">
          <span style="top:-2.6550000000000002em;">
           <span class="pstrut" style="height:3em;">
           </span>
           <span class="sizing reset-size6 size3 mtight">
            <span class="mord mtight">
             <span class="mord mtight">
              6
             </span>
            </span>
           </span>
          </span>
          <span style="top:-3.15em;">
           <span class="pstrut" style="height:3em;">
           </span>
           <span class="stretchy" style="height:0.2em;">
            <svg height="0.2em" preserveaspectratio="xMinYMin slice" viewbox="0 0 400000 200" width="400em">
             <path d="M0 80H400000 v40H0z M0 80H400000 v40H0z">
             </path>
            </svg>
           </span>
          </span>
          <span style="top:-3.394em;">
           <span class="pstrut" style="height:3em;">
           </span>
           <span class="sizing reset-size6 size3 mtight">
            <span class="mord mtight">
             <span class="mord mtight">
              3
             </span>
             <span class="mord mtight">
              6
             </span>
             <span class="mord mtight">
              <span class="mord mtight">
               0
              </span>
              <span class="msupsub">
               <span class="vlist-t">
                <span class="vlist-r">
                 <span class="vlist" style="height:0.7484642857142858em;">
                  <span style="top:-2.931em;margin-right:0.07142857142857144em;">
                   <span class="pstrut" style="height:2.5em;">
                   </span>
                   <span class="sizing reset-size3 size1 mtight">
                    <span class="mbin mtight">
                     ∘
                    </span>
                   </span>
                  </span>
                 </span>
                </span>
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
         <span class="vlist-s">
          ​
         </span>
        </span>
        <span class="vlist-r">
         <span class="vlist" style="height:0.345em;">
         </span>
        </span>
       </span>
      </span>
      <span class="mclose nulldelimiter">
      </span>
     </span>
     <span class="mord rule" style="margin-right:0.2777777777777778em;">
     </span>
     <span class="mrel">
      =
     </span>
     <span class="mord rule" style="margin-right:0.2777777777777778em;">
     </span>
     <span class="mord">
      6
     </span>
     <span class="mord">
      <span class="mord">
       0
      </span>
      <span class="msupsub">
       <span class="vlist-t">
        <span class="vlist-r">
         <span class="vlist" style="height:0.674115em;">
          <span style="top:-3.063em;margin-right:0.05em;">
           <span class="pstrut" style="height:2.7em;">
           </span>
           <span class="sizing reset-size6 size3 mtight">
            <span class="mbin mtight">
             ∘
            </span>
           </span>
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
  </span>
 </span>
 Mais pourquoi exactement ? Eh bien, c’est simple avec un peu d’imagination (et quelques dessins). Si l’on commence par alimenter le premier enroulement, le A, le rotor va s’aligner avec. Maintenant que se passera-t-il si l’on alimente B ? Le rotor, qui était alors positionné avec une de ses branches bien en face de A, va bouger pour s’aligner correctement vers B. Ensuite, si l’on alimente C il va se passer de même, le rotor va encore tourner de 15° pour s’aligner, etc. Si l’on effectue cette opération 24 fois, on fera un tour complet car :
 <span class="inlineMath">
  <span class="katex">
   <span class="katex-mathml">
    <math>
     <semantics>
      <mrow>
       <mn>
        2
       </mn>
       <mn>
        4
       </mn>
       <mo>
        ×
       </mo>
       <mn>
        1
       </mn>
       <msup>
        <mn>
         5
        </mn>
        <mo>
         ∘
        </mo>
       </msup>
       <mo>
        =
       </mo>
       <mn>
        3
       </mn>
       <mn>
        6
       </mn>
       <msup>
        <mn>
         0
        </mn>
        <mo>
         ∘
        </mo>
       </msup>
      </mrow>
      <annotation encoding="application/x-tex">
       24 \times 15^\circ = 360^\circ
      </annotation>
     </semantics>
    </math>
   </span>
   <span aria-hidden="true" class="katex-html">
    <span class="strut" style="height:0.674115em;">
    </span>
    <span class="strut bottom" style="height:0.757445em;vertical-align:-0.08333em;">
    </span>
    <span class="base">
     <span class="mord">
      2
     </span>
     <span class="mord">
      4
     </span>
     <span class="mord rule" style="margin-right:0.2222222222222222em;">
     </span>
     <span class="mbin">
      ×
     </span>
     <span class="mord rule" style="margin-right:0.2222222222222222em;">
     </span>
     <span class="mord">
      1
     </span>
     <span class="mord">
      <span class="mord">
       5
      </span>
      <span class="msupsub">
       <span class="vlist-t">
        <span class="vlist-r">
         <span class="vlist" style="height:0.674115em;">
          <span style="top:-3.063em;margin-right:0.05em;">
           <span class="pstrut" style="height:2.7em;">
           </span>
           <span class="sizing reset-size6 size3 mtight">
            <span class="mbin mtight">
             ∘
            </span>
           </span>
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
     <span class="mord rule" style="margin-right:0.2777777777777778em;">
     </span>
     <span class="mrel">
      =
     </span>
     <span class="mord rule" style="margin-right:0.2777777777777778em;">
     </span>
     <span class="mord">
      3
     </span>
     <span class="mord">
      6
     </span>
     <span class="mord">
      <span class="mord">
       0
      </span>
      <span class="msupsub">
       <span class="vlist-t">
        <span class="vlist-r">
         <span class="vlist" style="height:0.674115em;">
          <span style="top:-3.063em;margin-right:0.05em;">
           <span class="pstrut" style="height:2.7em;">
           </span>
           <span class="sizing reset-size6 size3 mtight">
            <span class="mbin mtight">
             ∘
            </span>
           </span>
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </span>
  </span>
 </span>
</p>
<div class="custom-block alert alert-primary">
 <div class="custom-block-body">
  <p>
   Vous remarquerez que dans cet exemple le rotor tourne dans le sens horaire alors que l’alimentation des bobines se fera dans le sens antihoraire.
  </p>
 </div>
</div>
<p>
 Ces moteurs ont certains avantages. Parmi ces derniers, il n’y a pas besoin de polariser les bobines (peu importe le sens du champ magnétique, l’entrefer n’étant pas polarisé essaiera de s’aligner sans chipoter). Le fait que l’on utilise un simple entrefer en fer doux le rend aussi moins cher qu’un modèle avec des aimants permanents. Vous savez maintenant tout sur les trois types de moteurs pas-à-pas que l’on peut trouver, place maintenant à la pratique !
</p>
<div class="custom-block alert alert-warning">
 <div class="custom-block-body">
  <p>
   De manière générale, n’essayez pas d’ouvrir vos moteurs pas-à-pas pour regarder comment c’est fait et espérer les remonter après. Le simple démontage à tendance à faire diminuer la qualité des aimants permanents à l’intérieur et donc votre moteur ne sera plus aussi bon après remontage.
  </p>
 </div>
</div>
<h3 id="se-servir-du-moteur">
 <a aria-hidden="true" href="#se-servir-du-moteur">
  <span class="es-autolink-heading">
  </span>
 </a>
 Se servir du moteur
</h3>
<p>
 Continuons à parler de notre super moteur. Si vous avez suivi ce que j’ai dit plus tôt, j’ai expliqué qu’il y avait des bobines qui généraient un champ magnétique. Lorsqu’elles sont alimentées, ces bobines ont besoin de courant pour pouvoir générer un champ magnétique suffisant. Vous ne serez donc pas surpris si je vous dis qu’il faudra utiliser un composant pour faire passer la puissance dans ces dernières. Et là, comme les choses sont bien faites, nous allons retrouver le pont en H et le L298.
 <img alt=":)" class="smiley" src="./static/smileys/smile.png"/>
</p>
<div class="custom-block alert alert-primary">
 <div class="custom-block-body">
  <p>
   Afin de limiter la redondance d’informations, je vais me contenter de vous expliquer le pilotage du moteur unipolaire et bipolaire. Si vous comprenez correctement ces derniers, vous n’aurez aucun problème avec le moteur restant
   <img alt=";)" class="smiley" src="./static/smileys/clin.png"/>
  </p>
 </div>
</div>
<div class="custom-block alert alert-danger">
 <div class="custom-block-body">
  <p>
   Les schémas qui vont suivre ont pour source d’énergie une pile +9V. Cependant il est déconseillé de les faire avec car la consommation des moteurs est assez importante et la pile risque de se fatiguer très vite. Utilisez plutôt une source d’alimentation prévue à cet effet (une alimentation de laboratoire).
  </p>
 </div>
</div>
<h4 id="le-moteur-unipolaire-1">
 <a aria-hidden="true" href="#le-moteur-unipolaire-1">
  <span class="es-autolink-heading">
  </span>
 </a>
 Le moteur unipolaire
</h4>
<h5 id="connecter-un-moteur-unipolaire">
 <a aria-hidden="true" href="#connecter-un-moteur-unipolaire">
  <span class="es-autolink-heading">
  </span>
 </a>
 Connecter un moteur unipolaire
</h5>
<p>
 Pour rappel, voici la structure du moteur unipolaire :
</p>
<p>
 <img alt="Vue en coupe d'un moteur pas-à-pas unipolaire" src="./images/uploaded/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas/vue-en-coupe-dun-moteur-pas-a-pas-unipolaire.png"/>
</p>
<p>
 Si vous avez bien lu la partie précédente, vous devez avoir retenu que ce moteur est assez simple à piloter. En effet, il suffit d’alimenter une à une les bobines pour que le moteur tourne. Et c’est tout ! Il nous faut juste utiliser le bon composant pour alimenter les bobines et en avant ! A priori, le bon composant serait un bon transistor qui pourrait supporter 50V et 500mA pour débuter. À cela il faudrait ensuite rajouter une diode de roue libre pour ne pas l’abîmer lors des phases de roue libre (tout cela multiplié par 4 puisqu’on a 4 bobines). Plutôt que de s’embêter à câbler tout ça, je vous propose l’intervention d’un nouveau composant : le ULN2003A. Ce dernier regroupe les transistors pour faire passer la puissance et aussi la diode. Il est très simple à câbler puisqu’il faut simplement amener l’alimentation et les broches de commandes. Chacune de ces dernières possède respectivement une sortie où la tension sera celle de l’alimentation. Voici une illustration de ce câblage :
</p>
<p>
 <img alt="Câblage simple du moteur unipolaire - Schéma" src="./images/uploaded/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas/cablage-simple-du-moteur-unipolaire-schema.jpg"/>
</p>
<p>
 <img alt="Câblage simple du moteur unipolaire - Montage" src="./images/uploaded/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas/cablage-simple-du-moteur-unipolaire-montage.jpg"/>
</p>
<h5 id="utiliser-un-moteur-unipolaire">
 <a aria-hidden="true" href="#utiliser-un-moteur-unipolaire">
  <span class="es-autolink-heading">
  </span>
 </a>
 Utiliser un moteur unipolaire
</h5>
<p>
 Je l’ai maintenant dit et répété plusieurs fois, pour ce moteur il suffit de piloter chaque bobine une à une, chacune leur tour. Je vais donc vous résumer tout cela de manière plus schématique et on sera bon pour ce moteur.
 <img alt=":D" class="smiley" src="./static/smileys/heureux.png"/>
 A la fin, si vous avez bien compris vous devriez être capable de le faire tourner tout doucement en plaçant alternativement les fils In1 à 4 (abrégé In1..4) au 5V ou à la masse.
</p>
<p>
 <img alt="Séquence du moteur unipolaire" src="./images/uploaded/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas/sequence-du-moteur-unipolaire.jpg"/>
</p>
<div class="custom-block alert alert-primary">
 <div class="custom-block-body">
  <p>
   Les différentes illustrations de séquences peuvent êtres trouvées sous licence CC-BY-SA
   <a href="http://fr.wikipedia.org/wiki/Moteur_pas_à_pas">
    sur wikipedia
   </a>
   (M4RC0)
  </p>
 </div>
</div>
<div class="text-center">
 <figure>
  <div class="table-wrapper">
   <table class=" table table-bordered table-striped">
    <thead>
     <tr>
      <th>
       Etape
      </th>
      <th>
       In 1
      </th>
      <th>
       In 2
      </th>
      <th>
       In 3
      </th>
      <th>
       In 4
      </th>
     </tr>
    </thead>
    <tbody>
     <tr>
      <td>
       Pas n°1
      </td>
      <td>
       HIGH
      </td>
      <td>
       LOW
      </td>
      <td>
       LOW
      </td>
      <td>
       LOW
      </td>
     </tr>
     <tr>
      <td>
       Pas n°2
      </td>
      <td>
       LOW
      </td>
      <td>
       HIGH
      </td>
      <td>
       LOW
      </td>
      <td>
       LOW
      </td>
     </tr>
     <tr>
      <td>
       Pas n°3
      </td>
      <td>
       LOW
      </td>
      <td>
       LOW
      </td>
      <td>
       HIGH
      </td>
      <td>
       LOW
      </td>
     </tr>
     <tr>
      <td>
       Pas n°4
      </td>
      <td>
       LOW
      </td>
      <td>
       LOW
      </td>
      <td>
       LOW
      </td>
      <td>
       HIGH
      </td>
     </tr>
    </tbody>
   </table>
  </div>
  <figcaption>
   Séquence du moteur unipolaire
  </figcaption>
 </figure>
</div>
<p>
 <img alt="Chronogramme du moteur unipolaire" src="./images/uploaded/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas/chronogramme-du-moteur-unipolaire.jpg"/>
</p>
<p>
 Si vous placez les fils de commande à la masse ou au 5V convenablement, votre moteur devrait tourner
 <img alt=":)" class="smiley" src="./static/smileys/smile.png"/>
 Vous n’avez plus qu’à créer le programme qui va bien pour piloter tout ce bazar… ben vous vous attendiez à quoi ? Une solution peut-être ? Non.
 <img alt=":diable:" class="smiley" src="./static/smileys/diable.png"/>
 Bon bon, d’accord… vous vous souvenez de vos premiers pas avec le chenillard ? Tout est dit.
 <img alt=";)" class="smiley" src="./static/smileys/clin.png"/>
 (et si vous ne voulez pas vous fatiguer, attendez la suite du tuto
 <img alt=":D" class="smiley" src="./static/smileys/heureux.png"/>
 )
</p>
<h4 id="le-moteur-bipolaire">
 <a aria-hidden="true" href="#le-moteur-bipolaire">
  <span class="es-autolink-heading">
  </span>
 </a>
 Le moteur bipolaire
</h4>
<h5 id="le-câbler-la-théorie">
 <a aria-hidden="true" href="#le-câbler-la-théorie">
  <span class="es-autolink-heading">
  </span>
 </a>
 Le câbler, la théorie
</h5>
<p>
 Nous avons vu dans le chapitre précédent que le moteur bipolaire a besoin, à un moment, d’une inversion de courant si l’on veut pouvoir utiliser les bobines à bon escient. Vous vous souvenez probablement que nous avons vu précédemment un composant capable de faire cela : le pont en H. L’idée va donc être de câbler correctement les bobines pour pouvoir faire passer le courant dans un sens, ou dans l’autre. Je vous rappelle la structure du pont en H :
</p>
<p>
 <img alt="Le pont en H - vue simplifiée" src="./images/uploaded/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas/le-pont-en-h-vue-simplifiee.png"/>
</p>
<p>
 Problème, un pont en H ne peut piloter qu’une "paire de bobines" (celle qui sont dans le même axe et relié entre elles), or nous en avons deux à piloter. Heureusement, le L298 est un composant très bien pensé et ne possède non pas un mais bien deux ponts en H ! Du coup, nous pourrons en utiliser un par couple de bobines.
 <img alt=":)" class="smiley" src="./static/smileys/smile.png"/>
 Plutôt sympa non ?
</p>
<h5 id="la-pratique-avec-le-l298">
 <a aria-hidden="true" href="#la-pratique-avec-le-l298">
  <span class="es-autolink-heading">
  </span>
 </a>
 La pratique avec le L298
</h5>
<p>
 Dans le chapitre précédent, nous avons justement vu un composant qui possède deux ponts en H : le L298. Le reste du travail semble presque trop simple ! Pour la partie "sortie/puissance", vous devrez relier les sorties Out1 (broche 2) et Out2 (broche 3) à la première bobine et ensuite Out3 et Out4 (13 et 14) à la seconde. N’oubliez pas les diodes de roue libre (8 au total et qui supporte la puissance) ! Enfin, il ne reste qu’à connecter les entrées In1..4 à 4 entrée/sortie numérique (pas besoin de PWM). Pour l’instant, pas besoin de les relier à l’Arduino, contentez-vous de les mettre à la masse, nous allons faire un test ensemble. Comme nous voulons activer les deux ponts, mettez les deux entrées "enable" au +5V. Nous verrons dans la prochaine partie comment l’utiliser avec Arduino
 <img alt=";)" class="smiley" src="./static/smileys/clin.png"/>
 . Voici un petit schéma récapitulatif :
</p>
<p>
 <img alt="Câblage simple - Schéma" src="./images/uploaded/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas/cablage-simple-schema.png"/>
</p>
<p>
 Le schéma de montage avec quelques condensateurs de filtrage qui viennent aider l’alimentation en cas de forte demande de courant et des condensateurs qui filtre les parasites engendrés par les bobines du moteur.
</p>
<p>
 <img alt="Câblage simple - Montage" src="./images/uploaded/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas/cablage-simple-montage.png"/>
</p>
<h4 id="piloter-le-moteur-bipolaire">
 <a aria-hidden="true" href="#piloter-le-moteur-bipolaire">
  <span class="es-autolink-heading">
  </span>
 </a>
 Piloter le moteur bipolaire
</h4>
<p>
 Une fois que le moteur est branché, nous allons pouvoir le faire tourner. Comme son nom l’indique, il s’appelle pas à pas et donc nous allons le faire pivoter étape par étape et non de manière continue comme le moteur à courant continu. Cependant, en répétant les étapes de rotation rapidement et successivement, le moteur donnera l’impression de tourner sans s’arrêter entre chaque étape. Il existe trois méthodes distinctes pour piloter les moteurs bipolaires. Nous allons maintenant les voir une par une. Dans les cas qui vont suivre, on va considérer un moteur de 4 pas par tour (ce qui est ridiculement faible). Voici ce à quoi il va ressembler (comment sont placées ses bobines) :
</p>
<p>
 <img alt="Vue schématisé d'un moteur pas-à-pas" src="./images/uploaded/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas/vue-schematise-dun-moteur-pas-a-pas.png"/>
</p>
<h5 id="rotation-par-pas-complet">
 <a aria-hidden="true" href="#rotation-par-pas-complet">
  <span class="es-autolink-heading">
  </span>
 </a>
 Rotation par pas complet
</h5>
<p>
 Ce mode de fonctionnement est le plus simple, c’est pourquoi nous allons commencer par lui. Grâce à ce dernier, vous allez pouvoir faire des rotations "pas par pas". Pour cela, nous allons alternativement alimenter les bobines de droites et de gauche et inverser le sens du courant pour pouvoir faire une rotation complète du champ magnétique. Voici l’illustration Wikipédia très bien faite à ce sujet :
</p>
<p>
 <img alt="Séquence à pas complet" src="./images/uploaded/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas/sequence-a-pas-complet.jpg"/>
</p>
<div class="custom-block alert alert-primary">
 <div class="custom-block-body">
  <p>
   En rouge la bobine alimentée ainsi que le sens du courant symbolisé par une flèche et en noir la bobine qui n’est pas alimentée.
  </p>
 </div>
</div>
<p>
 En considérant que la bobine A est connectée aux entrées IN1 et IN2 et que la bobine B est connectée aux commandes IN3 et IN4, on peut donc écrire la séquence de commande suivante :
</p>
<div class="text-center">
 <figure>
  <div class="table-wrapper">
   <table class=" table table-bordered table-striped">
    <thead>
     <tr>
      <th>
       Etape
      </th>
      <th>
       In 1
      </th>
      <th>
       In 2
      </th>
      <th>
       In 3
      </th>
      <th>
       In 4
      </th>
     </tr>
    </thead>
    <tbody>
     <tr>
      <td>
       Pas n°1
      </td>
      <td>
       HIGH
      </td>
      <td>
       LOW
      </td>
      <td>
       -
      </td>
      <td>
       -
      </td>
     </tr>
     <tr>
      <td>
       Pas n°2
      </td>
      <td>
       -
      </td>
      <td>
       -
      </td>
      <td>
       HIGH
      </td>
      <td>
       LOW
      </td>
     </tr>
     <tr>
      <td>
       Pas n°3
      </td>
      <td>
       LOW
      </td>
      <td>
       HIGH
      </td>
      <td>
       -
      </td>
      <td>
       -
      </td>
     </tr>
     <tr>
      <td>
       Pas n°4
      </td>
      <td>
       -
      </td>
      <td>
       -
      </td>
      <td>
       LOW
      </td>
      <td>
       HIGH
      </td>
     </tr>
    </tbody>
   </table>
  </div>
  <figcaption>
   Séquence à pas complet
  </figcaption>
 </figure>
</div>
<p>
 (un état '-' signifie "non nécessaire", placez-le à 0V pour que la bobine soit bien inactive).
</p>
<p>
 On peut traduire cette activité par le chronogramme suivant :
</p>
<p>
 <img alt="Chronogramme du pilotage à pas entier" src="./images/uploaded/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas/chronogramme-du-pilotage-a-pas-entier.jpg"/>
</p>
<p>
 Comme vous pouvez le voir à travers ces différents moyens d’explication, c’est somme toute assez simple. On va chercher à déplacer l’aimant central en le faisant tourner petit à petit. Pour cela on cherchera à l’attirer dans différentes positions.
</p>
<h5 id="rotation-à-couple-maximal">
 <a aria-hidden="true" href="#rotation-à-couple-maximal">
  <span class="es-autolink-heading">
  </span>
 </a>
 Rotation à couple maximal
</h5>
<p>
 Un autre mode de fonctionnement est celui dit à
 <strong>
  couple maximal
 </strong>
 . Cette méthode de pilotage utilise toutes les bobines à la fois pour pouvoir immobiliser au maximum l’aimant central. En effet, en utilisant plus de champs magnétiques on obtient une force supplémentaire. Par contre, on consomme évidemment d’avantage de courant. Pour comprendre ce fonctionnement, voyons les différentes étapes par un dessin puis par un chronogramme. Vous verrez, ce n’est pas très compliqué, le fonctionnement est très similaire, seules les activations de bobines changent un peu :
</p>
<p>
 <img alt="Séquence à couple maximal" src="./images/uploaded/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas/sequence-a-couple-maximal.jpg"/>
</p>
<div class="custom-block alert alert-primary">
 <div class="custom-block-body">
  <p>
   Avez-vous remarqué quelque chose de particulier ? Dans cette utilisation, l’aimant ne fait plus face aux bobines mais se place
   <em>
    entre
   </em>
   les deux. Par contre, il effectue toujours des pas entiers, ces derniers ont juste un décalage constant par rapport à avant.
  </p>
 </div>
</div>
<p>
 Voici le tableau correspondant au pilotage des bobines :
</p>
<div class="text-center">
 <figure>
  <div class="table-wrapper">
   <table class=" table table-bordered table-striped">
    <thead>
     <tr>
      <th>
       Etape
      </th>
      <th>
       In 1
      </th>
      <th>
       In 2
      </th>
      <th>
       In 3
      </th>
      <th>
       In 4
      </th>
     </tr>
    </thead>
    <tbody>
     <tr>
      <td>
       Pas n°1
      </td>
      <td>
       HIGH
      </td>
      <td>
       LOW
      </td>
      <td>
       HIGH
      </td>
      <td>
       LOW
      </td>
     </tr>
     <tr>
      <td>
       Pas n°2
      </td>
      <td>
       HIGH
      </td>
      <td>
       LOW
      </td>
      <td>
       LOW
      </td>
      <td>
       HIGH
      </td>
     </tr>
     <tr>
      <td>
       Pas n°3
      </td>
      <td>
       LOW
      </td>
      <td>
       HIGH
      </td>
      <td>
       LOW
      </td>
      <td>
       HIGH
      </td>
     </tr>
     <tr>
      <td>
       Pas n°4
      </td>
      <td>
       LOW
      </td>
      <td>
       HIGH
      </td>
      <td>
       HIGH
      </td>
      <td>
       LOW
      </td>
     </tr>
    </tbody>
   </table>
  </div>
  <figcaption>
   Séquence à couple maximal
  </figcaption>
 </figure>
</div>
<p>
 (un état '-' signifie "non nécessaire", placez-le à 0V pour que la bobine soit bien inactive).
</p>
<p>
 <img alt="Chronogramme pour un couple max." src="./images/uploaded/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas/chronogramme-pour-un-couple-max.jpg"/>
</p>
<h5 id="rotation-par-demi-pas">
 <a aria-hidden="true" href="#rotation-par-demi-pas">
  <span class="es-autolink-heading">
  </span>
 </a>
 Rotation par demi-pas
</h5>
<p>
 Enfin, le dernier mode de fonctionnement est celui dit à
 <strong>
  demi-pas
 </strong>
 . Ce mode mélange les deux précédents puisqu’on va alterner les étapes du mode à pas complet et les étapes du mode à couple maximal. En effet, comme nous avons pu le voir dans les explications précédentes, les deux modes placent l’aimant central de manière différente. L’un est "en face des bobines" alors qu’avec l’autre est plutôt "entre les bobines".
</p>
<p>
 Ainsi, en se mettant alternativement "en face" puis "entre" les bobines on va effectuer deux fois plus de pas que précédemment puisqu’on intercalera des étapes supplémentaires. Attention, lorsque je dis "deux fois plus de pas" je veux surtout dire que l’on aura des étapes intermédiaires qui augmentent la précision du déplacement. Ce mode de pilotage est un peu plus compliqué que les précédents puisqu’il est "plus long" (8 étapes au lieu de 4) mais rien d’insurmontable vous allez voir !
</p>
<p>
 <img alt="Séquence à demi-pas" src="./images/uploaded/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas/sequence-a-demi-pas.jpg"/>
</p>
<div class="text-center">
 <figure>
  <div class="table-wrapper">
   <table class=" table table-bordered table-striped">
    <thead>
     <tr>
      <th>
       Etape
      </th>
      <th>
       In 1
      </th>
      <th>
       In 2
      </th>
      <th>
       In 3
      </th>
      <th>
       In 4
      </th>
     </tr>
    </thead>
    <tbody>
     <tr>
      <td>
       Pas n°1
      </td>
      <td>
       HIGH
      </td>
      <td>
       LOW
      </td>
      <td>
       -
      </td>
      <td>
       -
      </td>
     </tr>
     <tr>
      <td>
       Pas n°1 ½
      </td>
      <td>
       HIGH
      </td>
      <td>
       LOW
      </td>
      <td>
       HIGH
      </td>
      <td>
       LOW
      </td>
     </tr>
     <tr>
      <td>
       Pas n°2
      </td>
      <td>
       -
      </td>
      <td>
       -
      </td>
      <td>
       HIGH
      </td>
      <td>
       LOW
      </td>
     </tr>
     <tr>
      <td>
       Pas n°2 ½
      </td>
      <td>
       LOW
      </td>
      <td>
       HIGH
      </td>
      <td>
       HIGH
      </td>
      <td>
       LOW
      </td>
     </tr>
     <tr>
      <td>
       Pas n°3
      </td>
      <td>
       LOW
      </td>
      <td>
       HIGH
      </td>
      <td>
       -
      </td>
      <td>
       -
      </td>
     </tr>
     <tr>
      <td>
       Pas n°3 ½
      </td>
      <td>
       LOW
      </td>
      <td>
       HIGH
      </td>
      <td>
       LOW
      </td>
      <td>
       HIGH
      </td>
     </tr>
     <tr>
      <td>
       Pas n°4
      </td>
      <td>
       -
      </td>
      <td>
       -
      </td>
      <td>
       LOW
      </td>
      <td>
       HIGH
      </td>
     </tr>
     <tr>
      <td>
       Pas n°4 ½
      </td>
      <td>
       HIGH
      </td>
      <td>
       LOW
      </td>
      <td>
       LOW
      </td>
      <td>
       HIGH
      </td>
     </tr>
    </tbody>
   </table>
  </div>
  <figcaption>
   Séquence à demi-pas
  </figcaption>
 </figure>
</div>
<p>
 (un état '-' signifie "non nécessaire", placez-le à 0V pour que la bobine soit bien inactive).
</p>
<p>
 <img alt="Chronogramme du pilotage à demi-pas" src="./images/uploaded/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas/chronogramme-du-pilotage-a-demi-pas.jpg"/>
</p>
<p>
 Maintenant que vous connaissez les différents modes de fonctionnement, vous pouvez essayer de faire tourner le moteur en branchant les entrées IN1..4 à la masse ou au 5V. Si vous le faites dans le bon ordre, votre moteur devrait tourner tout doucement, en allant d’une étape vers l’autre.
 <img alt=":)" class="smiley" src="./static/smileys/smile.png"/>
</p>
<div class="custom-block alert alert-warning">
 <div class="custom-block-body">
  <p>
   Si vous avez une charge qui demande trop de couple (par exemple un poids à faire monter), il peut arrive que le moteur "saute" un/des pas. Cette donnée est à prendre en compte si vous vous servez du nombre de pas effectué logiciellement comme moyen de calcul de distance.
  </p>
 </div>
</div>
<h3 id="utilisation-avec-arduino">
 <a aria-hidden="true" href="#utilisation-avec-arduino">
  <span class="es-autolink-heading">
  </span>
 </a>
 Utilisation avec Arduino
</h3>
<h4 id="câbler-les-moteurs">
 <a aria-hidden="true" href="#câbler-les-moteurs">
  <span class="es-autolink-heading">
  </span>
 </a>
 Câbler les moteurs
</h4>
<p>
 Avec les chapitres précédents, vous avez vu comment on devait utiliser les moteurs avec les composants gérant la puissance. Cependant, nous n’avons pas vu à quoi relier les broches de commande… Et c’est très simple ! En effet, tous les signaux sont tout ou rien et n’ont même pas besoin d’être des PWM ! Ce qui veut dire que les 4 broches de pilotage ont juste besoin d’être reliées à 4 broches numériques de la carte Arduino (2, 3, 4, 5 par exemple). Voyons ce que cela donne en schéma (qui sont exactement les mêmes que ceux de la partie précédente, mais avec une carte Arduino en plus
 <img alt=":D" class="smiley" src="./static/smileys/heureux.png"/>
 )
</p>
<h5 id="le-moteur-unipolaire-2">
 <a aria-hidden="true" href="#le-moteur-unipolaire-2">
  <span class="es-autolink-heading">
  </span>
 </a>
 Le moteur unipolaire
</h5>
<p>
 <img alt="Câblage du moteur unipolaire - Schéma" src="./images/uploaded/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas/cablage-du-moteur-unipolaire-schema.jpg"/>
</p>
<p>
 <img alt="Câblage du moteur unipolaire - Montage" src="./images/uploaded/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas/cablage-du-moteur-unipolaire-montage.jpg"/>
</p>
<h5 id="le-moteur-bipolaire-1">
 <a aria-hidden="true" href="#le-moteur-bipolaire-1">
  <span class="es-autolink-heading">
  </span>
 </a>
 Le moteur bipolaire
</h5>
<p>
 <img alt="Câblage du moteur bipolaire - Schéma" src="./images/uploaded/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas/cablage-du-moteur-bipolaire-schema.png"/>
</p>
<p>
 <img alt="Câblage du moteur bipolaire - Montage" src="./images/uploaded/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas/cablage-du-moteur-bipolaire-montage.png"/>
</p>
<p>
 Jusque là rien de vraiment compliqué, on passe à la suite !
</p>
<h4 id="piloter-les-moteurs-avec-arduino">
 <a aria-hidden="true" href="#piloter-les-moteurs-avec-arduino">
  <span class="es-autolink-heading">
  </span>
 </a>
 Piloter les moteurs avec Arduino
</h4>
<h5 id="le-principe">
 <a aria-hidden="true" href="#le-principe">
  <span class="es-autolink-heading">
  </span>
 </a>
 Le principe
</h5>
<p>
 L’idée est toute simple, il suffit de générer la bonne séquence pour piloter les moteurs à la bonne vitesse, vous vous en doutez surement. La principale difficulté réside dans la génération des signaux dans le bon ordre afin que le moteur se déplace correctement. Bien entendu, c’est plus facile à dire qu’à faire. En effet, pour que le mouvement soit fluide, il faut que les changements dans la séquence soient faits de manière régulière et pour cela il faut une gestion du temps correcte. Ça peut sembler simple au premier abord, mais quand il s’agira de mixer le comportement du moteur avec celui du programme principal (qui devra peut-être faire des traitements assez lourds) cela deviendra probablement beaucoup moins trivial. Une bonne méthode consisterait à utiliser un
 <strong>
  timer
 </strong>
 sur lequel on réglerait la période à avoir qui refléterait ainsi la vitesse à obtenir. Mais avec Arduino vous allez voir que tout devient plus simple…
</p>
<h5 id="lobjet-stepper">
 <a aria-hidden="true" href="#lobjet-stepper">
  <span class="es-autolink-heading">
  </span>
 </a>
 L’objet Stepper
</h5>
<p>
 Sur Arduino les choses sont bien faites pour rester simples et accessibles, un objet a déjà été créé pour vous aider à piloter un moteur pas à pas. Attention cependant, il ne fonctionne que pour les moteurs unipolaires et bipolaires. Il tire parti du fait que ces deux types de moteur peuvent fonctionner avec une séquence commune. Ainsi, tout est généralisé et utilisable le plus simplement possible ! Ce nouveau composant s’appelle "
 <a href="http://arduino.cc/en/Reference/Stepper">
  Stepper
 </a>
 ". À sa création, il prend en argument le nombre de pas total que fait le moteur pour faire un tour (information trouvable dans la documentation constructeur ou empiriquement). Cette information sert à déterminer la vitesse de rotation par minute que vous pourrez ensuite régler à loisir pour faire des déplacements lents ou rapides. Il prend aussi en arguments les quatre broches servant à contrôler l’engin. Son constructeur est donc :
 <a href="http://arduino.cc/en/Reference/StepperConstructor">
  <code>
   Stepper(steps, pin1, pin2, pin3, pin4)
  </code>
 </a>
 . Pour initialiser le moteur, nous pouvons donc écrire la ligne suivante :
</p>
<figure>
 <div class="hljs-code-div">
  <div class="hljs-line-numbers">
   <span>
   </span>
   <span>
   </span>
  </div>
  <pre><code class="hljs language-cpp"><span class="hljs-comment">// pour un moteur de 200 pas par tour et brancher sur les broches 2, 3, 4, 5</span>
<span class="hljs-function">Stepper <span class="hljs-title">moteur</span><span class="hljs-params">(<span class="hljs-number">200</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)</span></span>;
</code></pre>
 </div>
 <figcaption>
  Initialisation d’un moteur pas à pas
 </figcaption>
</figure>
<p>
 Pour l’utiliser, deux fonctions sont utilisables. La première sert à définir la vitesse de rotation, exprimée en tours par minute (
 <strong>
  trs/min
 </strong>
 ). Pour cela, on utilise la fonction
 <a href="http://arduino.cc/en/Reference/StepperSetSpeed">
  <code>
   step(steps)
  </code>
 </a>
 qui prend en paramètre le nombre de pas à effectuer. Si ce nombre est négatif, le moteur tournera en sens inverse du nombre de pas spécifié. Voici un petit exemple qui va faire faire un aller-retour de 200 pas toutes les 2 secondes à votre moteur :
</p>
<figure>
 <div class="hljs-code-div">
  <div class="hljs-line-numbers">
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
   <span>
   </span>
  </div>
  <pre><code class="hljs language-cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Stepper.h&gt;</span></span>

<span class="hljs-comment">// pour un moteur de 200 pas par tour et brancher sur les broches 2, 3, 4, 5</span>
<span class="hljs-function">Stepper <span class="hljs-title">moteur</span><span class="hljs-params">(<span class="hljs-number">200</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)</span></span>;

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span>
</span>{
    moteur.setSpeed(<span class="hljs-number">30</span>); <span class="hljs-comment">// 30 tours par minute</span>
    <span class="hljs-comment">// (rappel : ici le moteur fait 200 pas par tour,</span>
    <span class="hljs-comment">// on fera donc 6000 pas par minute)</span>
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span>
</span>{
    moteur.step(<span class="hljs-number">1000</span>);
    delay(<span class="hljs-number">100</span>);
    moteur.step(<span class="hljs-number">-1000</span>);
    delay(<span class="hljs-number">2000</span>);
}
</code></pre>
 </div>
 <figcaption>
  Utilisation simple d’un moteur pas à pas
 </figcaption>
</figure>
<div class="custom-block alert alert-warning">
 <div class="custom-block-body">
  <p>
   La fonction
   <code>
    step(x)
   </code>
   est bloquante. Cela signifie qu’elle agit comme un délai. Tant que le moteur n’a pas fait les x pas demandés, le reste du programme est en attente.
  </p>
 </div>
</div>
<h4 id="aller-plus-loin">
 <a aria-hidden="true" href="#aller-plus-loin">
  <span class="es-autolink-heading">
  </span>
 </a>
 Aller plus loin
</h4>
<p>
 Vous êtes devenus incollables sur les moteurs pas à pas ? Vous en voulez encore plus ? Suffit de demander, voilà du bonus d’informations rien que pour toi cher lecteur !
</p>
<h5 id="2-fils-au-lieu-de-4">
 <a aria-hidden="true" href="#2-fils-au-lieu-de-4">
  <span class="es-autolink-heading">
  </span>
 </a>
 2 fils au lieu de 4 !
</h5>
<p>
 On a toujours utilisé 4 fils pour commander les moteurs. C’est bien, mais que diriez-vous de sauver deux broches et de passer à seulement 2 fils au lieu de 4 ? Pas mal comme amélioration non ? Petite anecdote : un jour, un utilisateur des moteurs pàp s’est rendu compte d’un truc, dans une paire de fils pour piloter un moteur (dans la séquence utilisée par Arduino), l’information est toujours antagoniste. Si un fil est à HIGH, sa paire sera à LOW et vice versa. Du coup il suffit d’un peu d’électronique pour pouvoir inverser un des deux signaux et se retrouver ainsi avec seulement deux fils au lieu de 4 sortants d’Arduino.
 <img alt=":)" class="smiley" src="./static/smileys/smile.png"/>
</p>
<p>
 <img alt="Moteur bipolaire avec 2 fils" src="./images/uploaded/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas/moteur-bipolaire-avec-2-fils.jpg"/>
</p>
<p>
 <img alt="Moteur unipolaire avec 2 fils" src="./images/uploaded/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas/moteur-unipolaire-avec-2-fils.jpg"/>
</p>
<p>
 (source des images :
 <a href="http://www.tigoe.net/pcomp/code/circuits/motors/stepper-motors/">
  tigoe.net
 </a>
 ) Cette solution est plutôt intéressante du fait que les entrées/sorties sont parfois une denrée rare sur Arduino !
 <img alt="^^" class="smiley" src="./static/smileys/hihi.png"/>
</p>
<h5 id="le-l297">
 <a aria-hidden="true" href="#le-l297">
  <span class="es-autolink-heading">
  </span>
 </a>
 Le L297
</h5>
<p>
 Lorsque vous utilisez votre Arduino, vous ne pouvez utiliser qu’une seule séquence. Par exemple pour un moteur bipolaire vous n’avez pas le choix entre le mode pas entier, demi-pas ou couple max. Une des solutions serait de générer vous-même les séquences. Mais c’est assez fastidieux. Une autre solution est électronique et compensera le développement informatique à faire. Un composant, nommé L297 (de la famille du L298 vous vous en doutez) est justement fait pour générer les séquences de moteur pas à pas. Il possède 4 broches de sorties pour générer la séquence et plusieurs en entrée pour "paramétrer" le fonctionnement voulu. Parmi elles on en retrouve trois principales :
</p>
<ul>
 <li>
  CW/CCW : (ClockWise ou Counter ClockWise) qui décidera du sens de rotation du moteur (horaire ou antihoraire).
 </li>
 <li>
  Half/Full : Qui décide si on est en mode pas entier ou demi-pas.
 </li>
 <li>
  Clk : (Clock) qui est l’horloge pour la vitesse. À chaque front descendant, le moteur fera un pas.
Je vous laisse un peu chercher sur le net, vous trouverez de plus amples informations à ce sujet. Avant même de regarder sur le net, en fait, regardez plutôt sa datasheet !!
  <img alt=";)" class="smiley" src="./static/smileys/clin.png"/>
  Un des avantages de délester le travail des séquences au L297 est que vous n’aurez plus besoin de l’objet Stepper et de sa fonction step() bloquante. Il faudra cependant toujours utiliser un composant de puissance pour laisser passer les forts courants nécessaires au moteur (comme le L298 par exemple).
 </li>
</ul>
            </div>
            <!-- /.entry-content -->
            <hr>
            <div class="row bg-light my-2 py-2 rounded">
                <div class="col mr-auto">
                    <a class="" href="/tuto-arduino-602-un-moteur-qui-a-de-la-tête-le-servomoteur" rel="prev">
                        <i class="fas fa-chevron-left fa-lg"></i>
                        tuto-arduino-602-un-moteur-qui-a-de-la-tête-le-servomoteur
                    </a>
                </div>
                <div class="col-auto">
                    <a class="" href="/tuto-arduino-701-les-écrans-lcd" rel="next">
                        tuto-arduino-701-les-écrans-lcd
                        <i class="fas fa-chevron-right fa-lg"></i>
                    </a>
                </div>
            </div>
            <div class="text-center">
                <img class="es-licence-pic" src="/static/images/CC BY-NC-SA.png" alt="Licence CC BY-NC-SA" title="Article sous licence CC BY-NC-SA">
            </div>
            <div class="my-3 text-center">
                <a class="btn btn-outline-dark mx-1" href="https://twitter.com/share?url=https://eskimon.fr/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas&amp;text=A petits pas, le moteur pas-à-pas - https://eskimon.fr/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas" rel="nofollow" title="Partager cet article sur Twitter" role="button" data-toggle="tooltip" data-placement="top">
                    <i class="fab fa-twitter fa-lg"></i>
                </a>
                <a class="btn btn-outline-dark mx-1" href="https://www.facebook.com/sharer.php?u=https://eskimon.fr/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas&amp;t=A petits pas, le moteur pas-à-pas - https://eskimon.fr/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas" rel="nofollow" title="Partager cet article sur Facebook" role="button" data-toggle="tooltip" data-placement="top">
                    <i class="fab fa-facebook-f fa-lg"></i>
                </a>
                <a class="btn btn-outline-dark mx-1" href="https://plus.google.com/share?url=https://eskimon.fr/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas&amp;hl=fr" rel="nofollow" title="Partager cet article sur Google +" role="button" data-toggle="tooltip" data-placement="top">
                    <i class="fab fa-google-plus fa-lg"></i>
                </a>
                <!--<a class="btn btn-outline-dark mx-1" href="http://sharetodiaspora.github.io/?url=https://eskimon.fr/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas&amp;title=A petits pas, le moteur pas-à-pas - https://eskimon.fr/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas" rel="nofollow"  title="Partager cet article sur Diaspora" role="button" data-toggle="tooltip" data-placement="top">
                    <i class="fab fa-google-plus fa-lg"></i>
                </a>-->
                <a class="btn btn-outline-dark mx-1" href="mailto:?subject=A petits pas, le moteur pas-à-pas&amp;body=https://eskimon.fr/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas"rel="nofollow" title="Partager cet article par email" role="button" data-toggle="tooltip" data-placement="top">
                    <i class="far fa-envelope fa-lg"></i>
                </a>
            </div>
            <hr>
            <!-- disqus start -->
            <div id="disqus_thread"></div>
            <script>
                var disqus_config = function () {
                    this.page.url = 'https://eskimon.fr/tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas';
                    this.page.identifier = 'tuto-arduino-603-a-petits-pas-le-moteur-pas-à-pas';
                    this.page.title = 'A petits pas, le moteur pas-à-pas';
                };
                (function () { // DON'T EDIT BELOW THIS LINE
                    var d = document, s = d.createElement('script');
                    s.src = 'https://eskimon-fr.disqus.com/embed.js';
                    s.setAttribute('data-timestamp', +new Date());
                    (d.head || d.body).appendChild(s);
                })();
            </script>
            <noscript>Please enable JavaScript to view the
                <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
            </noscript>
            <!-- disqus end -->
        </article>
    </div>
    <div class="d-none d-xl-block col-xl-1 offset-xl-1 px-0">
        <div class="d-flex flex-column justify-content-around align-items-end h-100" id="es-right-ad-block">
            <!-- Pub ajouté auto -->
        </div>
    </div>
</div>
    </div>
<footer class="container-fluid bg-dark small text-white px-3">
<div class="row">
    <div class="col align-self-center">
        © Eskimon -
        Blog propulsé par <a class="bold text-white" href="https://blog.getpelican.com/" rel="nofollow">Pelican</a> -
        Thème fait maison
    </div>
    <div class="col align-self-end text-right">
        <a class="btn btn-lg text-light" href="https://github.com/Eskimon" rel="nofollow" title="Mon profil Github">
            <i class="fab fa-github fa-lg"></i>
        </a>
        <a class="btn btn-lg text-light" href="https://twitter.com/Eskimon_fr" rel="nofollow" title="Me suivre sur Linkedin">
            <i class="fab fa-twitter fa-lg"></i>
        </a>
    </div>
  </div>
</footer>
    <!-- For formula -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!-- Font awesome -->
    <script src="https://use.fontawesome.com/releases/v5.0.0/js/all.js"></script>
    <!-- JQuery first -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <!-- Popper.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <!-- Bootstrap -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <!-- For tooltips -->
    <script>$(function () {  $('[data-toggle="tooltip"]').tooltip()})</script>
    <script src="/static/js/my-scripts.js"></script>
<script>
function create_side_summary() {
    // Duplicate summary
    var main_summary = $('#sommaire').next();
    if(main_summary.length === 0)
        return
    var side_summary = main_summary.clone();
    side_summary.addClass('pl-0');
    var all_p = side_summary.find('p');
    all_p.contents().unwrap();
    var all_li = side_summary.find('li');
    all_li.addClass('pl-1');

    // scrollspy - in
    side_summary.attr('id', 'es-side-summary-mainlist');
    //side_summary.addClass('nav');
    //all_li.addClass('nav-item');
    var all_a = side_summary.find('a');
    all_a.addClass('nav-link');
    var all_ul = side_summary.find('ul');
    all_ul.addClass('pl-1');
    $('body').scrollspy({ target: '#es-side-summary-mainlist' });
    // scrollspy - out

    var summary_title = document.createElement("h4");
    summary_title.className = 'navbar-brand';
    summary_title.innerHTML = 'Sommaire';
    $(summary_title).prependTo('#es-side-summary-content');
    side_summary.appendTo('#es-side-summary-content');
    main_summary.addClass('es-subul-collapse');
}

function generate_spoilers() {
    all_secret = $('.custom-block-spoiler');
    all_secret.each(function( index ) {
        let content = $(this).html();
        $(this).html('');
        $(this).addClass('card');
        var headerText = document.createElement("button");
        var cardHeader = document.createElement("div");
        var cardBodyWrapper = document.createElement("div");
        var cardBody = document.createElement("div");
        $(headerText).text('Contenu masqué, cliquez pour afficher');
        $(headerText).addClass('btn btn-link btn-sm');
        $(headerText).attr('data-toggle', 'collapse');
        $(headerText).attr('data-target', '#collapse-' + index);
        $(headerText).attr('aria-controls', 'collapse-' + index);
        $(headerText).attr('aria-expanded', 'false');
        $(cardHeader).append(headerText);
        $(cardHeader).addClass('card-header');
        $(cardHeader).attr('id', 'spoiler-' + index);
        $(cardBody).html(content);
        $(cardBody).addClass('card-body');
        $(cardBodyWrapper).append(cardBody);
        $(cardBodyWrapper).addClass('collapse hide');
        $(cardBodyWrapper).attr('id', 'collapse-' + index)
        $(cardBodyWrapper).attr('aria-labelledby', 'spoiler-' + index)
        $(this).prepend(cardHeader);
        $(this).append(cardBodyWrapper);
    });

    $('.collapse').collapse({toggle: false});
}

function load_extra_ads() {
    // Load right side blocks
    var sidebar = $('#es-right-ad-block');
    var n_height = Math.floor(sidebar.height() / 2000);
    for (i = 0; i < n_height; i++) {
        var frag = document.createDocumentFragment();
        var newAdBlock = document.createElement("div");
        var block1 = document.createElement("ins");
        var block2 = document.createElement("script");

        block1.innerHTML = '<ins class="adsbygoogle" ' +
            'style="display:inline-block;width:120px;height:600px" ' +
            'data-ad-client="ca-pub-2080155902357792" ' +
            'data-ad-slot="4023722026"></ins>';
        block2.innerHTML = '(adsbygoogle = window.adsbygoogle || []).push({});';

        $(newAdBlock).append(block1);
        $(newAdBlock).append(block2);
        $(frag).append(newAdBlock);

        $(sidebar).append(frag);
    }

    // Load in feed blocks (above every h3)
    var frag = document.createDocumentFragment();
    var newAdBlock = document.createElement("div");
    var block1 = document.createElement("ins");
    var block2 = document.createElement("script");
    block1.innerHTML = '<ins class="adsbygoogle"' +
    'style = "display:inline-block;width:970px;height:90px"' +
    'data - ad - client="ca-pub-2080155902357792"' +
    'data - ad - slot="7100712740" ></ins >'
    block2.innerHTML = '(adsbygoogle = window.adsbygoogle || []).push({});';
    $(newAdBlock).append(block1);
    $(newAdBlock).append(block2);
    newAdBlock.className = 'my-3 text-center';
    $(frag).append(newAdBlock);
    var titles = $('.entry-content h3').slice(1);
    $(frag).insertBefore(titles);
}

$(document).ready(function () {

    create_side_summary();
    generate_spoilers();

    // when opening the sidebar
    $('#sidebarCollapse').on('click', function () {
        // open sidebar
        $('#es-side-summary').removeClass('d-none');
        $('#es-content').addClass('d-none');
        $('#sidebarCollapse').removeClass('sticky-top');
    });

    // if dismiss or overlay was clicked
    $('#es-side-summary').on('click', function () {
      // hide the sidebar
      $('#es-side-summary').addClass('d-none');
      $('#es-content').removeClass('d-none');
      $('#sidebarCollapse').addClass('sticky-top');
    });
});
</script>

</body>

</html>
